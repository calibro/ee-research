import{g as te,c as se}from"../chunks/download.C-N7S_0U.js";import"../chunks/index.CzR0xuCU.js";import{b as O}from"../chunks/paths.BwafARYV.js";import{s as N,v as oe,w as W,r as le,c as ae,o as ce,n as ue,f as ie}from"../chunks/scheduler.DqfkSni8.js";import{S as re,i as ne,e as L,m as D,s as P,c as w,a as T,n as V,f as j,d as y,o as v,C as F,g as M,h as E,p as C,k as q,l as k,q as U,G as fe,B as X,x as B,z as Q,y as Y}from"../chunks/index.Ck_lgHTT.js";import{e as z,u as me,o as de}from"../chunks/each.BXnJiQdI.js";import{S as he,q as ge,a as pe,g as _e,b as ve}from"../chunks/index.SYSOGrwO.js";import{T as G}from"../chunks/text.Cqgp7NCy.js";const ye=!1,be=!0,$e=!1;async function qe({params:c,fetch:e}){const n=`${O}/assets/gettyimages/queries.csv`,{data:t,error:l}=await te({key:"gettyimages-queries",url:n,type:"text"},e);return!t||l?(console.error("error",l),l(404,"Not found")):{queries:se(t)}}const Xe=Object.freeze(Object.defineProperty({__proto__:null,csr:be,load:qe,prerender:ye,ssr:$e},Symbol.toStringTag,{value:"Module"})),ke=c=>{const e=o=>{const a=o.target.closest(".scroll-container");if(!a)return;const s={left:a.scrollLeft,top:a.scrollTop,x:o.clientX,y:o.clientY},r=u=>{const d=u.clientX-s.x,_=u.clientY-s.y;a.scrollTop=s.top-_,a.scrollLeft=s.left-d,t(a)},m=()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",m),l(a)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",m)},n=o=>{const a=containerRef.current;if(!a)return;const s=o.touches[0],r={left:a.scrollLeft,top:a.scrollTop,x:s.clientX,y:s.clientY},m=d=>{const _=d.touches[0],h=_.clientX-r.x,f=_.clientY-r.y;a.scrollTop=r.top-f,a.scrollLeft=r.left-h,t(a)},u=()=>{document.removeEventListener("touchmove",m),document.removeEventListener("touchend",u),l(a)};document.addEventListener("touchmove",m),document.addEventListener("touchend",u)},t=o=>{o.style.cursor="grabbing",o.style.userSelect="none"},l=o=>{o.style.cursor="grab",o.style.removeProperty("user-select")};return document.addEventListener("mousedown",e,!0),document.addEventListener("touchstart",n,!0),{destroy(){document.removeEventListener("mousedown",e,!0),document.removeEventListener("touchstart",n,!0)}}};function H(c,e,n){const t=c.slice();return t[9]=e[n],t[11]=n,t}function J(c){let e,n,t,l,o,a,s;function r(...u){return c[5](c[11],...u)}function m(...u){return c[6](c[11],...u)}return{c(){e=L("div"),n=L("img"),o=P(),this.h()},l(u){e=w(u,"DIV",{class:!0,role:!0});var d=T(e);n=w(d,"IMG",{src:!0,alt:!0,loading:!0,draggable:!0}),o=j(d),d.forEach(y),this.h()},h(){W(n.src,t=c[2](c[9].id))||v(n,"src",t),v(n,"alt",l=c[9].title),v(n,"loading","lazy"),v(n,"draggable","false"),v(e,"class","image-container svelte-sa8e9"),v(e,"role","img")},m(u,d){M(u,e,d),E(e,n),E(e,o),a||(s=[X(e,"mouseover",r),X(e,"focus",m),X(e,"mouseout",c[7]),X(e,"blur",c[8])],a=!0)},p(u,d){c=u,d&1&&!W(n.src,t=c[2](c[9].id))&&v(n,"src",t),d&1&&l!==(l=c[9].title)&&v(n,"alt",l)},d(u){u&&y(e),a=!1,le(s)}}}function Ee(c){var A;let e,n,t,l,o,a,s,r,m,u,d,_,h;l=new G({props:{typo:"label",content:"Stereotype",class:"case-upper"}}),a=new G({props:{typo:"h3",content:c[0][1][0].clusterLabel,class:"mb-xs"}}),r=new G({props:{typo:"label",content:"Images: "+((A=c[0][1])==null?void 0:A.length),class:"case-upper"}});let f=z(c[0][1]),g=[];for(let i=0;i<f.length;i+=1)g[i]=J(H(c,f,i));return{c(){e=L("div"),n=L("div"),t=L("div"),D(l.$$.fragment),o=P(),D(a.$$.fragment),s=P(),D(r.$$.fragment),m=P(),u=L("div");for(let i=0;i<g.length;i+=1)g[i].c();this.h()},l(i){e=w(i,"DIV",{class:!0});var b=T(e);n=w(b,"DIV",{class:!0});var $=T(n);t=w($,"DIV",{});var I=T(t);V(l.$$.fragment,I),o=j(I),V(a.$$.fragment,I),I.forEach(y),s=j($),V(r.$$.fragment,$),$.forEach(y),m=j(b),u=w(b,"DIV",{class:!0,style:!0});var S=T(u);for(let p=0;p<g.length;p+=1)g[p].l(S);S.forEach(y),b.forEach(y),this.h()},h(){v(n,"class","col-[span-2] flex-col-btw-start p-s"),v(u,"class","images col-[span-7] scrollbar-hide scroll-container svelte-sa8e9"),F(u,"--columns",c[1]),v(e,"class","getty grid-9-gap svelte-sa8e9")},m(i,b){M(i,e,b),E(e,n),E(n,t),C(l,t,null),E(t,o),C(a,t,null),E(n,s),C(r,n,null),E(e,m),E(e,u);for(let $=0;$<g.length;$+=1)g[$]&&g[$].m(u,null);d=!0,_||(h=oe(ke.call(null,u)),_=!0)},p(i,[b]){var S;const $={};b&1&&($.content=i[0][1][0].clusterLabel),a.$set($);const I={};if(b&1&&(I.content="Images: "+((S=i[0][1])==null?void 0:S.length)),r.$set(I),b&13){f=z(i[0][1]);let p;for(p=0;p<f.length;p+=1){const R=H(i,f,p);g[p]?g[p].p(R,b):(g[p]=J(R),g[p].c(),g[p].m(u,null))}for(;p<g.length;p+=1)g[p].d(1);g.length=f.length}(!d||b&2)&&F(u,"--columns",i[1])},i(i){d||(q(l.$$.fragment,i),q(a.$$.fragment,i),q(r.$$.fragment,i),d=!0)},o(i){k(l.$$.fragment,i),k(a.$$.fragment,i),k(r.$$.fragment,i),d=!1},d(i){i&&y(e),U(l),U(a),U(r),fe(g,i),_=!1,h()}}}function Le(c,e,n){var _;let{cluster:t}=e,{query:l}=e;const o=h=>`${O}/assets/gettyimages/${l}/images/${h}.jpg`;let a=Array.from({length:(_=t[1])==null?void 0:_.length},()=>"30px").join(" ");const s=(h,f)=>{var g;n(1,a=Array.from({length:(g=t[1])==null?void 0:g.length},(A,i)=>i===f?`${h.target.clientWidth}px`:"30px").join(" "))},r=(h,f)=>s(f,h),m=(h,f)=>s(f,h),u=h=>s(),d=h=>s();return c.$$set=h=>{"cluster"in h&&n(0,t=h.cluster),"query"in h&&n(4,l=h.query)},[t,a,o,s,l,r,m,u,d]}class we extends re{constructor(e){super(),ne(this,e,Le,Ee,N,{cluster:0,query:4})}}function K(c,e,n){const t=c.slice();return t[11]=e[n],t[13]=n,t}function Z(c){let e=[],n=new Map,t,l,o=z(c[1]);const a=s=>{var r;return`${s[0]}-${s[13]}-${(r=s[11])==null?void 0:r[0]}`};for(let s=0;s<o.length;s+=1){let r=K(c,o,s),m=a(r);n.set(m,e[s]=x(m,r))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=Y()},l(s){for(let r=0;r<e.length;r+=1)e[r].l(s);t=Y()},m(s,r){for(let m=0;m<e.length;m+=1)e[m]&&e[m].m(s,r);M(s,t,r),l=!0},p(s,r){r&3&&(o=z(s[1]),Q(),e=me(e,r,a,1,s,o,n,t.parentNode,de,x,t,K),B())},i(s){if(!l){for(let r=0;r<o.length;r+=1)q(e[r]);l=!0}},o(s){for(let r=0;r<e.length;r+=1)k(e[r]);l=!1},d(s){s&&y(t);for(let r=0;r<e.length;r+=1)e[r].d(s)}}}function x(c,e){let n,t,l;return t=new we({props:{cluster:e[11],query:e[0]}}),{key:c,first:null,c(){n=Y(),D(t.$$.fragment),this.h()},l(o){n=Y(),V(t.$$.fragment,o),this.h()},h(){this.first=n},m(o,a){M(o,n,a),C(t,o,a),l=!0},p(o,a){e=o;const s={};a&2&&(s.cluster=e[11]),a&1&&(s.query=e[0]),t.$set(s)},i(o){l||(q(t.$$.fragment,o),l=!0)},o(o){k(t.$$.fragment,o),l=!1},d(o){o&&y(n),U(t,o)}}}function ee(c){let e,n,t=c[1].length&&Z(c);return{c(){e=L("div"),t&&t.c(),this.h()},l(l){e=w(l,"DIV",{class:!0});var o=T(e);t&&t.l(o),o.forEach(y),this.h()},h(){v(e,"class","container p-s grid-1-s svelte-1bhb5im")},m(l,o){M(l,e,o),t&&t.m(e,null),n=!0},p(l,o){l[1].length?t?(t.p(l,o),o&2&&q(t,1)):(t=Z(l),t.c(),q(t,1),t.m(e,null)):t&&(Q(),k(t,1,1,()=>{t=null}),B())},i(l){n||(q(t),n=!0)},o(l){k(t),n=!1},d(l){l&&y(e),t&&t.d()}}}function Ie(c){let e,n,t,l=c[0],o;n=new he({props:{queries:c[2],showLang:!1,description:c[3]("description"),question:c[3]("research_question")}});let a=ee(c);return{c(){e=L("div"),D(n.$$.fragment),t=P(),a.c(),this.h()},l(s){e=w(s,"DIV",{class:!0});var r=T(e);V(n.$$.fragment,r),t=j(r),a.l(r),r.forEach(y),this.h()},h(){v(e,"class","page l:flex-start-start")},m(s,r){M(s,e,r),C(n,e,null),E(e,t),a.m(e,null),o=!0},p(s,[r]){r&1&&N(l,l=s[0])?(Q(),k(a,1,1,ue),B(),a=ee(s),a.c(),q(a,1),a.m(e,null)):a.p(s,r)},i(s){o||(q(n.$$.fragment,s),q(a),o=!0)},o(s){k(n.$$.fragment,s),k(a),o=!1},d(s){s&&y(e),U(n),a.d(s)}}}function Te(c,e,n){let t,l,{data:o}=e;const{queries:a}=o,s=pe("getty_stereotypes");let r,m,u=!1,d=ge("query");ae(c,d,f=>n(0,l=f)),ce(()=>{var f;l||ie(d,l=(f=a[0])==null?void 0:f.query,l)});const _=`${O}/assets/gettyimages`,h=async()=>{if(u||!ve)return;if(u=!0,!l){u=!1,n(6,r=null);return}const{data:f,error:g}=await te({key:"getty-stereotypes-data",url:t,type:"text"});f?n(6,r=se(f)):n(6,r=null),u=!1};return c.$$set=f=>{"data"in f&&n(5,o=f.data)},c.$$.update=()=>{c.$$.dirty&1&&n(7,t=`${_}/${l}/${l}.csv`),c.$$.dirty&64&&n(1,m=r!=null&&r.length?_e(r,f=>f.cluster):[]),c.$$.dirty&128&&h()},[l,m,a,s,d,o,r,t]}class Ye extends re{constructor(e){super(),ne(this,e,Te,Ie,N,{data:5})}}export{Ye as component,Xe as universal};
