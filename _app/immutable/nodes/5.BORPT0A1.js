import{s as B,l as ut,n as z,r as at,d as K,e as ie,o as ft,k as be,E as xe,c as ue,F as Ee}from"../chunks/scheduler.BvAkape9.js";import{S as W,i as G,e as P,s as T,m as X,r as F,x as M,c as V,a as j,f as N,n as Y,d as w,y as I,q as $,g as O,h as D,z as S,G as J,k as b,u as Z,l as x,v as ee,F as ae,A as C,B as re,I as qe,t as et,b as tt,H as nt,o as rt,p as fe,D as ce,K as ct,L as Ae,j as ht,M as De}from"../chunks/index.FHAnUYL_.js";import{e as H,u as dt,o as gt}from"../chunks/each.CV5-vln6.js";import{d as pt,w as _t,g as mt}from"../chunks/entry.CIZ-jQA-.js";import{p as vt}from"../chunks/stores.DTM4Itcc.js";import{f as Me,l as oe,D as $t,g as wt,c as kt}from"../chunks/download.DdnUWAe_.js";import{T as R}from"../chunks/text.C__H_QYt.js";import{g as lt,L as Q,e as yt}from"../chunks/link.DAml-Oo4.js";import{b as bt}from"../chunks/tokens.DVXvbK2-.js";import{b as xt}from"../chunks/paths.B5Vr2_i3.js";const Et=!0,qt=Et;let st;st=vt;const At={keepFocus:!0,noScroll:!0,replaceState:!0},Dt={keepFocus:!0,noScroll:!0,replaceState:!1};function _e(t,e,n=(r,l)=>JSON.stringify(r)===JSON.stringify(l)){return typeof t=="object"&&typeof e=="object"&&n(t,e)}const me=new Set;let Ie;const Se=new Map,ve={encode:t=>t.toString(),decode:t=>t?t.toString():null};function he(t,{encode:e=ve.encode,decode:n=ve.decode,defaultValue:r}=ve,{debounceHistory:l=0,pushHistory:o=!0,sort:s=!0,showDefaults:i=!0,equalityFn:u}={}){const a=_t(null);let g=!0,c;function d(y,f){g=!1;const h=window.location.hash,E=m=>{if(y==null)m.delete(t);else{const _=e(y);_==null?m.delete(t):m.set(t,_)}};me.add(E),clearTimeout(Ie);const v=new URLSearchParams(window.location.search);Ie=setTimeout(async()=>{me.forEach(m=>{m(v)}),clearTimeout(Se.get(t));{a.set(y);async function m(){s&&v.sort(),await mt(`?${v}${h}`,o?Dt:At),a.set(null)}f||l===0?m():Se.set(t,setTimeout(m,l))}me.clear()})}const{subscribe:k}=pt([st,a],([y,f],h)=>{var m,_,p;if(f!=null)return _e(c,f,u)?void 0:(c=structuredClone(f),h(f));const E=(p=(_=(m=y==null?void 0:y.url)==null?void 0:m.searchParams)==null?void 0:_.get)==null?void 0:p.call(_,t);if(E==null&&r!=null)return i&&d(r,g),_e(c,r,u)?void 0:(c=structuredClone(r),h(r));const v=n(E);if(!_e(c,v,u))return c=structuredClone(v),h(v)});return{set(y){d(y)},subscribe:k,update:y=>{const f=y(c);d(f)}}}class Mt extends Map{constructor(e,n=Ct){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,l]of e)this.set(r,l)}get(e){return super.get(Ce(this,e))}has(e){return super.has(Ce(this,e))}set(e,n){return super.set(It(this,e),n)}delete(e){return super.delete(St(this,e))}}function Ce({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function It({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function St({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(n),t.delete(r)),n}function Ct(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Oe(t){return t}function Ot(t,...e){return jt(t,Oe,Oe,e)}function jt(t,e,n,r){return function l(o,s){if(s>=r.length)return n(o);const i=new Mt,u=r[s++];let a=-1;for(const g of o){const c=u(g,++a,o),d=i.get(c);d?d.push(g):i.set(c,[g])}for(const[g,c]of i)i.set(g,l(c,s));return e(i)}(t,0)}function Lt(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function Tt(){return this.eachAfter(Lt)}function Nt(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function Pt(t,e){for(var n=this,r=[n],l,o,s=-1;n=r.pop();)if(t.call(e,n,++s,this),l=n.children)for(o=l.length-1;o>=0;--o)r.push(l[o]);return this}function Vt(t,e){for(var n=this,r=[n],l=[],o,s,i,u=-1;n=r.pop();)if(l.push(n),o=n.children)for(s=0,i=o.length;s<i;++s)r.push(o[s]);for(;n=l.pop();)t.call(e,n,++u,this);return this}function Ut(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function Rt(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,l=r&&r.length;--l>=0;)n+=r[l].value;e.value=n})}function Ft(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function Ht(t){for(var e=this,n=zt(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var l=r.length;t!==n;)r.splice(l,0,t),t=t.parent;return r}function zt(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),l=null;for(t=n.pop(),e=r.pop();t===e;)l=t,t=n.pop(),e=r.pop();return l}function Bt(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function Wt(){return Array.from(this)}function Gt(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function Jt(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*Kt(){var t=this,e,n=[t],r,l,o;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(l=0,o=r.length;l<o;++l)n.push(r[l]);while(n.length)}function ke(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=Yt)):e===void 0&&(e=Xt);for(var n=new de(t),r,l=[n],o,s,i,u;r=l.pop();)if((s=e(r.data))&&(u=(s=Array.from(s)).length))for(r.children=s,i=u-1;i>=0;--i)l.push(o=s[i]=new de(s[i])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(en)}function Qt(){return ke(this).eachBefore(Zt)}function Xt(t){return t.children}function Yt(t){return Array.isArray(t)?t[1]:null}function Zt(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function en(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function de(t){this.data=t,this.depth=this.height=0,this.parent=null}de.prototype=ke.prototype={constructor:de,count:Tt,each:Nt,eachAfter:Vt,eachBefore:Pt,find:Ut,sum:Rt,sort:Ft,path:Ht,ancestors:Bt,descendants:Wt,leaves:Gt,links:Jt,copy:Qt,[Symbol.iterator]:Kt};function tn(t){return t==null?null:nn(t)}function nn(t){if(typeof t!="function")throw new Error;return t}function je(){return 0}function rn(t){return function(){return t}}const ln=1664525,sn=1013904223,Le=4294967296;function on(){let t=1;return()=>(t=(ln*t+sn)%Le)/Le}function un(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function an(t,e){let n=t.length,r,l;for(;n;)l=e()*n--|0,r=t[n],t[n]=t[l],t[l]=r;return t}function fn(t,e){for(var n=0,r=(t=an(Array.from(t),e)).length,l=[],o,s;n<r;)o=t[n],s&&ot(s,o)?++n:(s=hn(l=cn(l,o)),n=0);return s}function cn(t,e){var n,r;if($e(e,t))return[e];for(n=0;n<t.length;++n)if(le(e,t[n])&&$e(te(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(le(te(t[n],t[r]),e)&&le(te(t[n],e),t[r])&&le(te(t[r],e),t[n])&&$e(it(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function le(t,e){var n=t.r-e.r,r=e.x-t.x,l=e.y-t.y;return n<0||n*n<r*r+l*l}function ot(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,r=e.x-t.x,l=e.y-t.y;return n>0&&n*n>r*r+l*l}function $e(t,e){for(var n=0;n<e.length;++n)if(!ot(t,e[n]))return!1;return!0}function hn(t){switch(t.length){case 1:return dn(t[0]);case 2:return te(t[0],t[1]);case 3:return it(t[0],t[1],t[2])}}function dn(t){return{x:t.x,y:t.y,r:t.r}}function te(t,e){var n=t.x,r=t.y,l=t.r,o=e.x,s=e.y,i=e.r,u=o-n,a=s-r,g=i-l,c=Math.sqrt(u*u+a*a);return{x:(n+o+u/c*g)/2,y:(r+s+a/c*g)/2,r:(c+l+i)/2}}function it(t,e,n){var r=t.x,l=t.y,o=t.r,s=e.x,i=e.y,u=e.r,a=n.x,g=n.y,c=n.r,d=r-s,k=r-a,y=l-i,f=l-g,h=u-o,E=c-o,v=r*r+l*l-o*o,m=v-s*s-i*i+u*u,_=v-a*a-g*g+c*c,p=k*y-d*f,q=(y*_-f*m)/(p*2)-r,A=(f*h-y*E)/p,L=(k*m-d*_)/(p*2)-l,U=(d*E-k*h)/p,ge=A*A+U*U-1,ne=2*(o+q*A+L*U),ye=q*q+L*L-o*o,pe=-(Math.abs(ge)>1e-6?(ne+Math.sqrt(ne*ne-4*ge*ye))/(2*ge):ye/ne);return{x:r+q+A*pe,y:l+L+U*pe,r:pe}}function Te(t,e,n){var r=t.x-e.x,l,o,s=t.y-e.y,i,u,a=r*r+s*s;a?(o=e.r+n.r,o*=o,u=t.r+n.r,u*=u,o>u?(l=(a+u-o)/(2*a),i=Math.sqrt(Math.max(0,u/a-l*l)),n.x=t.x-l*r-i*s,n.y=t.y-l*s+i*r):(l=(a+o-u)/(2*a),i=Math.sqrt(Math.max(0,o/a-l*l)),n.x=e.x+l*r-i*s,n.y=e.y+l*s+i*r)):(n.x=e.x+n.r,n.y=e.y)}function Ne(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,l=e.y-t.y;return n>0&&n*n>r*r+l*l}function Pe(t){var e=t._,n=t.next._,r=e.r+n.r,l=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return l*l+o*o}function se(t){this._=t,this.next=null,this.previous=null}function gn(t,e){if(!(o=(t=un(t)).length))return 0;var n,r,l,o,s,i,u,a,g,c,d;if(n=t[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;Te(r,n,l=t[2]),n=new se(n),r=new se(r),l=new se(l),n.next=l.previous=r,r.next=n.previous=l,l.next=r.previous=n;e:for(u=3;u<o;++u){Te(n._,r._,l=t[u]),l=new se(l),a=r.next,g=n.previous,c=r._.r,d=n._.r;do if(c<=d){if(Ne(a._,l._)){r=a,n.next=r,r.previous=n,--u;continue e}c+=a._.r,a=a.next}else{if(Ne(g._,l._)){n=g,n.next=r,r.previous=n,--u;continue e}d+=g._.r,g=g.previous}while(a!==g.next);for(l.previous=n,l.next=r,n.next=r.previous=r=l,s=Pe(n);(l=l.next)!==r;)(i=Pe(l))<s&&(n=l,s=i);r=n.next}for(n=[r._],l=r;(l=l.next)!==r;)n.push(l._);for(l=fn(n,e),u=0;u<o;++u)n=t[u],n.x-=l.x,n.y-=l.y;return l.r}function pn(t){return Math.sqrt(t.value)}function _n(){var t=null,e=1,n=1,r=je;function l(o){const s=on();return o.x=e/2,o.y=n/2,t?o.eachBefore(Ve(t)).eachAfter(we(r,.5,s)).eachBefore(Ue(1)):o.eachBefore(Ve(pn)).eachAfter(we(je,1,s)).eachAfter(we(r,o.r/Math.min(e,n),s)).eachBefore(Ue(Math.min(e,n)/(2*o.r))),o}return l.radius=function(o){return arguments.length?(t=tn(o),l):t},l.size=function(o){return arguments.length?(e=+o[0],n=+o[1],l):[e,n]},l.padding=function(o){return arguments.length?(r=typeof o=="function"?o:rn(+o),l):r},l}function Ve(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function we(t,e,n){return function(r){if(l=r.children){var l,o,s=l.length,i=t(r)*e||0,u;if(i)for(o=0;o<s;++o)l[o].r+=i;if(u=gn(l,n),i)for(o=0;o<s;++o)l[o].r-=i;r.r=u+i}}}function Ue(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function Re(t,e,n){const r=t.slice();return r[12]=e[n],r}function Fe(t,e,n){const r=t.slice();return r[12]=e[n],r}function He(t){var o;let e,n,r,l;return n=new R({props:{typo:"small",content:(o=t[2].data)==null?void 0:o.text,class:"px-xs py-xxs",ellipsis:!0}}),{c(){e=P("div"),M(n.$$.fragment),this.h()},l(s){e=V(s,"DIV",{class:!0,style:!0});var i=j(e);I(n.$$.fragment,i),i.forEach(w),this.h()},h(){$(e,"class","tooltip svelte-1xtkxgk"),re(e,"--top",t[1].y+"px"),re(e,"--left",t[1].x+"px")},m(s,i){O(s,e,i),S(n,e,null),l=!0},p(s,i){var a;const u={};i&4&&(u.content=(a=s[2].data)==null?void 0:a.text),n.$set(u),(!l||i&2)&&re(e,"--top",s[1].y+"px"),(!l||i&2)&&re(e,"--left",s[1].x+"px")},i(s){l||(b(n.$$.fragment,s),s&&ut(()=>{l&&(r||(r=qe(e,Me,{duration:150},!0)),r.run(1))}),l=!0)},o(s){x(n.$$.fragment,s),s&&(r||(r=qe(e,Me,{duration:150},!1)),r.run(0)),l=!1},d(s){s&&w(e),C(n),s&&r&&r.end()}}}function mn(t){let e,n,r;function l(){return t[7](t[12])}function o(){return t[8](t[12])}return{c(){e=X("circle"),this.h()},l(s){e=Y(s,"circle",{class:!0,cx:!0,cy:!0,r:!0,role:!0,fill:!0,tabindex:!0}),j(e).forEach(w),this.h()},h(){var s;$(e,"class","tooltip-actor svelte-1xtkxgk"),$(e,"cx",t[12].x),$(e,"cy",t[12].y),$(e,"r",t[12].r),$(e,"role","tooltip"),$(e,"fill",(s=t[12].data)==null?void 0:s.color),$(e,"tabindex","-1")},m(s,i){O(s,e,i),n||(r=[J(e,"mouseover",l),J(e,"focus",o),J(e,"mouseout",t[9]),J(e,"blur",t[10])],n=!0)},p(s,i){t=s},d(s){s&&w(e),n=!1,at(r)}}}function vn(t){let e;return{c(){e=X("circle"),this.h()},l(n){e=Y(n,"circle",{cx:!0,cy:!0,r:!0,fill:!0,class:!0}),j(e).forEach(w),this.h()},h(){var n;$(e,"cx",t[12].x),$(e,"cy",t[12].y),$(e,"r",t[12].r),$(e,"fill",(n=t[12].data)==null?void 0:n.color),$(e,"class","svelte-1xtkxgk")},m(n,r){O(n,e,r)},p:z,d(n){n&&w(e)}}}function ze(t){let e;function n(o,s){return o[4](o[12].r)>6?vn:mn}let l=n(t)(t);return{c(){l.c(),e=F()},l(o){l.l(o),e=F()},m(o,s){l.m(o,s),O(o,e,s)},p(o,s){l.p(o,s)},d(o){o&&w(e),l.d(o)}}}function $n(t){var l;let e,n=((l=t[12].data)==null?void 0:l.text)+"",r;return{c(){e=X("text"),r=et(n),this.h()},l(o){e=Y(o,"text",{x:!0,y:!0,"text-anchor":!0,"dominant-baseline":!0,"font-size":!0,class:!0});var s=j(e);r=tt(s,n),s.forEach(w),this.h()},h(){$(e,"x",t[12].x),$(e,"y",t[12].y),$(e,"text-anchor","middle"),$(e,"dominant-baseline","middle"),$(e,"font-size",t[4](t[12].r)),$(e,"class","svelte-1xtkxgk")},m(o,s){O(o,e,s),D(e,r)},p:z,d(o){o&&w(e)}}}function Be(t){let e=t[4](t[12].r)>6,n,r=e&&$n(t);return{c(){r&&r.c(),n=F()},l(l){r&&r.l(l),n=F()},m(l,o){r&&r.m(l,o),O(l,n,o)},p(l,o){e&&r.p(l,o)},d(l){l&&w(n),r&&r.d(l)}}}function wn(t){let e,n,r,l,o,s,i,u,a,g,c=t[2]&&He(t),d=H(t[3]),k=[];for(let h=0;h<d.length;h+=1)k[h]=ze(Fe(t,d,h));let y=H(t[3]),f=[];for(let h=0;h<y.length;h+=1)f[h]=Be(Re(t,y,h));return i=new R({props:{typo:"p",content:t[0][1][0].clusterLabel,class:"px-m py-xs",ellipsis:!0}}),{c(){e=P("div"),c&&c.c(),n=T(),r=X("svg");for(let h=0;h<k.length;h+=1)k[h].c();l=F();for(let h=0;h<f.length;h+=1)f[h].c();o=T(),s=P("div"),M(i.$$.fragment),this.h()},l(h){e=V(h,"DIV",{class:!0,role:!0,tabindex:!0});var E=j(e);c&&c.l(E),n=N(E),r=Y(E,"svg",{width:!0,viewBox:!0,class:!0});var v=j(r);for(let _=0;_<k.length;_+=1)k[_].l(v);l=F();for(let _=0;_<f.length;_+=1)f[_].l(v);v.forEach(w),o=N(E),s=V(E,"DIV",{class:!0});var m=j(s);I(i.$$.fragment,m),m.forEach(w),E.forEach(w),this.h()},h(){$(r,"width","100%"),$(r,"viewBox","0 0 200 200"),$(r,"class","ratio-square svelte-1xtkxgk"),$(s,"class","title svelte-1xtkxgk"),$(e,"class","circle-packing flex-col-center-start svelte-1xtkxgk"),$(e,"role","button"),$(e,"tabindex","0")},m(h,E){O(h,e,E),c&&c.m(e,null),D(e,n),D(e,r);for(let v=0;v<k.length;v+=1)k[v]&&k[v].m(r,null);D(r,l);for(let v=0;v<f.length;v+=1)f[v]&&f[v].m(r,null);D(e,o),D(e,s),S(i,s,null),u=!0,a||(g=J(e,"mousemove",t[5]),a=!0)},p(h,[E]){if(h[2]?c?(c.p(h,E),E&4&&b(c,1)):(c=He(h),c.c(),b(c,1),c.m(e,n)):c&&(Z(),x(c,1,1,()=>{c=null}),ee()),E&88){d=H(h[3]);let m;for(m=0;m<d.length;m+=1){const _=Fe(h,d,m);k[m]?k[m].p(_,E):(k[m]=ze(_),k[m].c(),k[m].m(r,l))}for(;m<k.length;m+=1)k[m].d(1);k.length=d.length}if(E&24){y=H(h[3]);let m;for(m=0;m<y.length;m+=1){const _=Re(h,y,m);f[m]?f[m].p(_,E):(f[m]=Be(_),f[m].c(),f[m].m(r,null))}for(;m<f.length;m+=1)f[m].d(1);f.length=y.length}const v={};E&1&&(v.content=h[0][1][0].clusterLabel),i.$set(v)},i(h){u||(b(c),b(i.$$.fragment,h),u=!0)},o(h){x(c),x(i.$$.fragment,h),u=!1},d(h){h&&w(e),c&&c.d(),ae(k,h),ae(f,h),C(i),a=!1,g()}}}function kn(t,e,n){let{cluster:r}=e;const o=((f,h,E)=>{const v=_n().size([h,E]).padding(5),m=ke(f,p=>Array.isArray(p)?p[1]:null).sum(p=>p.videosNumber),_=v(m).descendants();return _.shift(),_})(r,200,200),s=f=>Math.min(f/3,13);let i={x:0,y:0};const u=f=>{n(1,i.x=f.clientX,i),n(1,i.y=f.clientY,i)};let a;const g=f=>{n(2,a=f)},c=f=>g(f),d=f=>g(f),k=()=>g(null),y=()=>g(null);return t.$$set=f=>{"cluster"in f&&n(0,r=f.cluster)},[r,i,a,o,s,u,g,c,d,k,y]}class yn extends W{constructor(e){super(),G(this,e,kn,wn,B,{cluster:0})}}function bn(t){let e,n,r='<path d="M13 1L7 7L1 0.999999" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>',l=[{viewBox:"0 0 14 8"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},t[0]],o={};for(let s=0;s<l.length;s+=1)o=K(o,l[s]);return{c(){e=X("svg"),n=new nt(!0),this.h()},l(s){e=Y(s,"svg",{viewBox:!0,fill:!0,xmlns:!0});var i=j(e);n=rt(i,!0),i.forEach(w),this.h()},h(){n.a=null,fe(e,o)},m(s,i){O(s,e,i),n.m(r,e)},p(s,[i]){fe(e,o=lt(l,[{viewBox:"0 0 14 8"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i&1&&s[0]]))},i:z,o:z,d(s){s&&w(e)}}}function xn(t,e,n){return t.$$set=r=>{n(0,e=K(K({},e),ie(r)))},e=ie(e),[e]}class En extends W{constructor(e){super(),G(this,e,xn,bn,B,{})}}function We(t,e,n){const r=t.slice();return r[9]=e[n],r}function qn(t){var o,s;let e,n,r,l;return e=new R({props:{class:t[3]?"":"opacity-50",content:(o=t[1])!=null&&o.length?((s=t[3])==null?void 0:s.title)||"Select":"Loading...",typo:"p"}}),r=new En({props:{width:12}}),{c(){M(e.$$.fragment),n=T(),M(r.$$.fragment)},l(i){I(e.$$.fragment,i),n=N(i),I(r.$$.fragment,i)},m(i,u){S(e,i,u),O(i,n,u),S(r,i,u),l=!0},p(i,u){var g,c;const a={};u&8&&(a.class=i[3]?"":"opacity-50"),u&10&&(a.content=(g=i[1])!=null&&g.length?((c=i[3])==null?void 0:c.title)||"Select":"Loading..."),e.$set(a)},i(i){l||(b(e.$$.fragment,i),b(r.$$.fragment,i),l=!0)},o(i){x(e.$$.fragment,i),x(r.$$.fragment,i),l=!1},d(i){i&&w(n),C(e,i),C(r,i)}}}function Ge(t){let e,n,r=H(t[1]),l=[];for(let s=0;s<r.length;s+=1)l[s]=Je(We(t,r,s));const o=s=>x(l[s],1,1,()=>{l[s]=null});return{c(){e=P("div");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=V(s,"DIV",{class:!0});var i=j(e);for(let u=0;u<l.length;u+=1)l[u].l(i);i.forEach(w),this.h()},h(){$(e,"class","list scrollbar-hide svelte-rjfnlc"),ce(e,"show",t[2])},m(s,i){O(s,e,i);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(e,null);n=!0},p(s,i){if(i&19){r=H(s[1]);let u;for(u=0;u<r.length;u+=1){const a=We(s,r,u);l[u]?(l[u].p(a,i),b(l[u],1)):(l[u]=Je(a),l[u].c(),b(l[u],1),l[u].m(e,null))}for(Z(),u=r.length;u<l.length;u+=1)o(u);ee()}(!n||i&4)&&ce(e,"show",s[2])},i(s){if(!n){for(let i=0;i<r.length;i+=1)b(l[i]);n=!0}},o(s){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)x(l[i]);n=!1},d(s){s&&w(e),ae(l,s)}}}function Je(t){let e,n;function r(){return t[7](t[9])}return e=new Q({props:{class:`button p-xs ${t[9].slug===t[0]?"selected":""}`,text:t[9].title,fn:r}}),{c(){M(e.$$.fragment)},l(l){I(e.$$.fragment,l)},m(l,o){S(e,l,o),n=!0},p(l,o){t=l;const s={};o&3&&(s.class=`button p-xs ${t[9].slug===t[0]?"selected":""}`),o&2&&(s.text=t[9].title),o&2&&(s.fn=r),e.$set(s)},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){x(e.$$.fragment,l),n=!1},d(l){C(e,l)}}}function An(t){var s;let e,n,r,l;n=new Q({props:{class:`dropdown-btn flex-btw-center p-xs ${t[2]?"active":""}`,fn:t[6],$$slots:{default:[qn]},$$scope:{ctx:t}}});let o=((s=t[1])==null?void 0:s.length)&&Ge(t);return{c(){e=P("div"),M(n.$$.fragment),r=T(),o&&o.c(),this.h()},l(i){e=V(i,"DIV",{class:!0,ref:!0});var u=j(e);I(n.$$.fragment,u),r=N(u),o&&o.l(u),u.forEach(w),this.h()},h(){$(e,"class","dropdown svelte-rjfnlc"),$(e,"ref",t[5])},m(i,u){O(i,e,u),S(n,e,null),D(e,r),o&&o.m(e,null),l=!0},p(i,[u]){var g;const a={};u&4&&(a.class=`dropdown-btn flex-btw-center p-xs ${i[2]?"active":""}`),u&4&&(a.fn=i[6]),u&4106&&(a.$$scope={dirty:u,ctx:i}),n.$set(a),(g=i[1])!=null&&g.length?o?(o.p(i,u),u&2&&b(o,1)):(o=Ge(i),o.c(),b(o,1),o.m(e,null)):o&&(Z(),x(o,1,1,()=>{o=null}),ee())},i(i){l||(b(n.$$.fragment,i),b(o),l=!0)},o(i){x(n.$$.fragment,i),x(o),l=!1},d(i){i&&w(e),C(n),o&&o.d()}}}function Dn(t,e,n){let r,{items:l}=e,{value:o=null}=e,s=!1;const i=d=>{n(0,o=d),n(2,s=!1)};let u;ft(()=>(document.addEventListener("click",a),()=>{document.removeEventListener("click",a)}));const a=d=>{d.target.closest(".dropdown")||n(2,s=!1)},g=()=>n(2,s=!s),c=d=>i(d.slug);return t.$$set=d=>{"items"in d&&n(1,l=d.items),"value"in d&&n(0,o=d.value)},t.$$.update=()=>{var d;t.$$.dirty&3&&n(3,r=(d=l==null?void 0:l.find)==null?void 0:d.call(l,k=>k.slug===o))},[o,l,s,r,i,u,g,c]}class Mn extends W{constructor(e){super(),G(this,e,Dn,An,B,{items:1,value:0})}}function In(t){let e,n,r='<path d="M2 2H32" stroke="currentColor" stroke-width="3" stroke-linecap="round"/><path d="M6 11H28" stroke="currentColor" stroke-width="3" stroke-linecap="round"/><path d="M11 20H23" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>',l=[{viewBox:"0 0 34 22"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},t[0]],o={};for(let s=0;s<l.length;s+=1)o=K(o,l[s]);return{c(){e=X("svg"),n=new nt(!0),this.h()},l(s){e=Y(s,"svg",{viewBox:!0,fill:!0,xmlns:!0});var i=j(e);n=rt(i,!0),i.forEach(w),this.h()},h(){n.a=null,fe(e,o)},m(s,i){O(s,e,i),n.m(r,e)},p(s,[i]){fe(e,o=lt(l,[{viewBox:"0 0 34 22"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i&1&&s[0]]))},i:z,o:z,d(s){s&&w(e)}}}function Sn(t,e,n){return t.$$set=r=>{n(0,e=K(K({},e),ie(r)))},e=ie(e),[e]}class Cn extends W{constructor(e){super(),G(this,e,Sn,In,B,{})}}function Ke(t,e,n){const r=t.slice();return r[5]=e[n].label,r[6]=e[n].code,r[7]=e[n].color,r}function Qe(t){let e,n,r,l=!1,o,s,i=t[5]+"",u,a,g,c,d,k,y;return d=ct(t[4][0]),{c(){e=P("input"),o=T(),s=P("label"),u=et(i),a=T(),this.h()},l(f){e=V(f,"INPUT",{class:!0,type:!0,id:!0}),o=N(f),s=V(f,"LABEL",{class:!0,for:!0,style:!0});var h=j(s);u=tt(h,i),a=N(h),h.forEach(w),this.h()},h(){$(e,"class","sr-only svelte-1q0yvuu"),$(e,"type","radio"),$(e,"id",n=t[6]),e.__value=r=t[6],Ae(e,e.__value),$(s,"class","typo-small svelte-1q0yvuu"),$(s,"for",g=t[6]),$(s,"style",c=`--background: var(--color-${t[7]})`),d.p(e)},m(f,h){O(f,e,h),e.checked=e.__value===t[0],O(f,o,h),O(f,s,h),D(s,u),D(s,a),k||(y=J(e,"change",t[3]),k=!0)},p(f,h){h&2&&n!==(n=f[6])&&$(e,"id",n),h&2&&r!==(r=f[6])&&(e.__value=r,Ae(e,e.__value),l=!0),(l||h&3)&&(e.checked=e.__value===f[0]),h&2&&i!==(i=f[5]+"")&&ht(u,i),h&2&&g!==(g=f[6])&&$(s,"for",g),h&2&&c!==(c=`--background: var(--color-${f[7]})`)&&$(s,"style",c)},d(f){f&&(w(e),w(o),w(s)),d.r(),k=!1,y()}}}function On(t){let e,n=H(t[1]),r=[];for(let l=0;l<n.length;l+=1)r[l]=Qe(Ke(t,n,l));return{c(){e=P("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=V(l,"DIV",{role:!0,class:!0});var o=j(e);for(let s=0;s<r.length;s+=1)r[s].l(o);o.forEach(w),this.h()},h(){$(e,"role","radiogroup"),$(e,"class","grid-2-xs l:flex flex-wrap items-center gap-xs")},m(l,o){O(l,e,o);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(e,null)},p(l,[o]){if(o&3){n=H(l[1]);let s;for(s=0;s<n.length;s+=1){const i=Ke(l,n,s);r[s]?r[s].p(i,o):(r[s]=Qe(i),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},i:z,o:z,d(l){l&&w(e),ae(r,l)}}}function jn(t,e,n){let r,{items:l}=e,{value:o=null}=e;const s=[[]];function i(){o=this.__value,n(0,o)}return t.$$set=u=>{"items"in u&&n(2,l=u.items),"value"in u&&n(0,o=u.value)},t.$$.update=()=>{t.$$.dirty&4&&n(1,r=Array.isArray(l)?l:Object.values(l))},[o,r,l,i,s]}class Ln extends W{constructor(e){super(),G(this,e,jn,On,B,{items:2,value:0})}}function Tn(t){let e,n;return e=new Cn({props:{height:"16"}}),{c(){M(e.$$.fragment)},l(r){I(e.$$.fragment,r)},m(r,l){S(e,r,l),n=!0},i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){x(e.$$.fragment,r),n=!1},d(r){C(e,r)}}}function Nn(t){let e,n;return e=new R({props:{content:"Confirm",typo:"small"}}),{c(){M(e.$$.fragment)},l(r){I(e.$$.fragment,r)},m(r,l){S(e,r,l),n=!0},i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){x(e.$$.fragment,r),n=!1},d(r){C(e,r)}}}function Pn(t){let e,n,r,l;const o=[Nn,Tn],s=[];function i(u,a){return u[1]?0:1}return e=i(t),n=s[e]=o[e](t),{c(){n.c(),r=F()},l(u){n.l(u),r=F()},m(u,a){s[e].m(u,a),O(u,r,a),l=!0},p(u,a){let g=e;e=i(u),e!==g&&(Z(),x(s[g],1,1,()=>{s[g]=null}),ee(),n=s[e],n||(n=s[e]=o[e](u),n.c()),b(n,1),n.m(r.parentNode,r))},i(u){l||(b(n),l=!0)},o(u){x(n),l=!1},d(u){u&&w(r),s[e].d(u)}}}function Vn(t){let e,n,r,l,o,s,i,u,a,g,c,d,k,y,f,h;r=new R({props:{typo:"label",content:"Query",class:"case-upper"}});function E(p){t[6](p)}let v={items:t[0]};t[2]!==void 0&&(v.value=t[2]),o=new Mn({props:v}),be.push(()=>De(o,"value",E)),a=new R({props:{typo:"label",content:"Language",class:"case-upper"}});function m(p){t[7](p)}let _={items:oe};return t[3]!==void 0&&(_.value=t[3]),c=new Ln({props:_}),be.push(()=>De(c,"value",m)),f=new Q({props:{class:"button pointer-events-initial",fn:t[8],theme:"cta",$$slots:{default:[Pn]},$$scope:{ctx:t}}}),{c(){e=P("div"),n=P("div"),M(r.$$.fragment),l=T(),M(o.$$.fragment),i=T(),u=P("div"),M(a.$$.fragment),g=T(),M(c.$$.fragment),k=T(),y=P("div"),M(f.$$.fragment),this.h()},l(p){e=V(p,"DIV",{class:!0});var q=j(e);n=V(q,"DIV",{class:!0});var A=j(n);I(r.$$.fragment,A),l=N(A),I(o.$$.fragment,A),A.forEach(w),i=N(q),u=V(q,"DIV",{class:!0});var L=j(u);I(a.$$.fragment,L),g=N(L),I(c.$$.fragment,L),L.forEach(w),q.forEach(w),k=N(p),y=V(p,"DIV",{class:!0});var U=j(y);I(f.$$.fragment,U),U.forEach(w),this.h()},h(){$(n,"class","group flex flex-col gap-xs"),$(u,"class","group flex flex-col gap-xs"),$(e,"class","filters px-s py-m l:p-0 svelte-j7mje2"),ce(e,"show",t[1]),$(y,"class","cta pointer-events-none l:hidden svelte-j7mje2")},m(p,q){O(p,e,q),D(e,n),S(r,n,null),D(n,l),S(o,n,null),D(e,i),D(e,u),S(a,u,null),D(u,g),S(c,u,null),O(p,k,q),O(p,y,q),S(f,y,null),h=!0},p(p,[q]){const A={};q&1&&(A.items=p[0]),!s&&q&4&&(s=!0,A.value=p[2],xe(()=>s=!1)),o.$set(A);const L={};!d&&q&8&&(d=!0,L.value=p[3],xe(()=>d=!1)),c.$set(L),(!h||q&2)&&ce(e,"show",p[1]);const U={};q&2&&(U.fn=p[8]),q&514&&(U.$$scope={dirty:q,ctx:p}),f.$set(U)},i(p){h||(b(r.$$.fragment,p),b(o.$$.fragment,p),b(a.$$.fragment,p),b(c.$$.fragment,p),b(f.$$.fragment,p),h=!0)},o(p){x(r.$$.fragment,p),x(o.$$.fragment,p),x(a.$$.fragment,p),x(c.$$.fragment,p),x(f.$$.fragment,p),h=!1},d(p){p&&(w(e),w(k),w(y)),C(r),C(o),C(a),C(c),C(f)}}}function Un(t,e,n){let r,l,{queries:o}=e,s=he("query"),i=he("lang");ue(t,s,d=>n(2,r=d)),ue(t,i,d=>n(3,l=d));let u=!1;function a(d){r=d,s.set(r)}function g(d){l=d,i.set(l)}const c=()=>n(1,u=!u);return t.$$set=d=>{"queries"in d&&n(0,o=d.queries)},t.$$.update=()=>{t.$$.dirty&2&&document.body.classList.toggle("scroll-lock",u)},innerWidth>yt(bt.l)&&n(1,u=!1),[o,u,r,l,s,i,a,g,c]}class Rn extends W{constructor(e){super(),G(this,e,Un,Vn,B,{queries:0})}}function Fn(t){let e,n,r,l;return e=new R({props:{typo:"small",content:"download data"}}),r=new $t({props:{width:"8"}}),{c(){M(e.$$.fragment),n=T(),M(r.$$.fragment)},l(o){I(e.$$.fragment,o),n=N(o),I(r.$$.fragment,o)},m(o,s){S(e,o,s),O(o,n,s),S(r,o,s),l=!0},p:z,i(o){l||(b(e.$$.fragment,o),b(r.$$.fragment,o),l=!0)},o(o){x(e.$$.fragment,o),x(r.$$.fragment,o),l=!1},d(o){o&&w(n),C(e,o),C(r,o)}}}function Hn(t){let e,n;return e=new R({props:{typo:"small",content:"view protocol"}}),{c(){M(e.$$.fragment)},l(r){I(e.$$.fragment,r)},m(r,l){S(e,r,l),n=!0},p:z,i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){x(e.$$.fragment,r),n=!1},d(r){C(e,r)}}}function zn(t){let e,n,r,l,o,s,i,u,a,g,c,d,k,y,f,h,E,v,m;return r=new R({props:{typo:"h2",content:"Looking at pollution on stock photos platforms"}}),s=new R({props:{typo:"label",content:"WHAT AM I LOOKING AT?"}}),u=new R({props:{typo:"p",content:"Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Donec id elit non mi porta gravida at eget metus."}}),g=new Rn({props:{queries:t[0]}}),k=new R({props:{typo:"label",content:"Resources",class:"case-upper"}}),h=new Q({props:{url:t[1],theme:"download",class:"flex gap-xxs items-center",$$slots:{default:[Fn]},$$scope:{ctx:t}}}),v=new Q({props:{url:t[1],theme:"download",class:"flex gap-xs items-center",$$slots:{default:[Hn]},$$scope:{ctx:t}}}),{c(){e=P("div"),n=P("div"),M(r.$$.fragment),l=T(),o=P("div"),M(s.$$.fragment),i=T(),M(u.$$.fragment),a=T(),M(g.$$.fragment),c=T(),d=P("div"),M(k.$$.fragment),y=T(),f=P("div"),M(h.$$.fragment),E=T(),M(v.$$.fragment),this.h()},l(_){e=V(_,"DIV",{class:!0});var p=j(e);n=V(p,"DIV",{class:!0});var q=j(n);I(r.$$.fragment,q),q.forEach(w),l=N(p),o=V(p,"DIV",{class:!0});var A=j(o);I(s.$$.fragment,A),i=N(A),I(u.$$.fragment,A),A.forEach(w),a=N(p),I(g.$$.fragment,p),c=N(p),d=V(p,"DIV",{class:!0});var L=j(d);I(k.$$.fragment,L),y=N(L),f=V(L,"DIV",{class:!0});var U=j(f);I(h.$$.fragment,U),E=N(U),I(v.$$.fragment,U),U.forEach(w),L.forEach(w),p.forEach(w),this.h()},h(){$(n,"class","group"),$(o,"class","group flex flex-col gap-xs"),$(f,"class","flex gap-xs"),$(d,"class","group flex flex-col gap-xs"),$(e,"class","sidebar flex flex-col gap-l py-m px-s svelte-fvv8ff")},m(_,p){O(_,e,p),D(e,n),S(r,n,null),D(e,l),D(e,o),S(s,o,null),D(o,i),S(u,o,null),D(e,a),S(g,e,null),D(e,c),D(e,d),S(k,d,null),D(d,y),D(d,f),S(h,f,null),D(f,E),S(v,f,null),m=!0},p(_,[p]){const q={};p&1&&(q.queries=_[0]),g.$set(q);const A={};p&2&&(A.url=_[1]),p&4&&(A.$$scope={dirty:p,ctx:_}),h.$set(A);const L={};p&2&&(L.url=_[1]),p&4&&(L.$$scope={dirty:p,ctx:_}),v.$set(L)},i(_){m||(b(r.$$.fragment,_),b(s.$$.fragment,_),b(u.$$.fragment,_),b(g.$$.fragment,_),b(k.$$.fragment,_),b(h.$$.fragment,_),b(v.$$.fragment,_),m=!0)},o(_){x(r.$$.fragment,_),x(s.$$.fragment,_),x(u.$$.fragment,_),x(g.$$.fragment,_),x(k.$$.fragment,_),x(h.$$.fragment,_),x(v.$$.fragment,_),m=!1},d(_){_&&w(e),C(r),C(s),C(u),C(g),C(k),C(h),C(v)}}}function Bn(t,e,n){let{queries:r}=e,{dataUrl:l}=e;return t.$$set=o=>{"queries"in o&&n(0,r=o.queries),"dataUrl"in o&&n(1,l=o.dataUrl)},[r,l]}class Wn extends W{constructor(e){super(),G(this,e,Bn,zn,B,{queries:0,dataUrl:1})}}function Xe(t,e,n){const r=t.slice();return r[15]=e[n],r[17]=n,r}function Ye(t){let e=[],n=new Map,r,l,o=H(t[4]);const s=i=>{var u;return`${i[1]}-${i[2]}-${i[17]}-${(u=i[15])==null?void 0:u[0]}`};for(let i=0;i<o.length;i+=1){let u=Xe(t,o,i),a=s(u);n.set(a,e[i]=Ze(a,u))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();r=F()},l(i){for(let u=0;u<e.length;u+=1)e[u].l(i);r=F()},m(i,u){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(i,u);O(i,r,u),l=!0},p(i,u){u&278&&(o=H(i[4]),Z(),e=dt(e,u,s,1,i,o,n,r.parentNode,gt,Ze,r,Xe),ee())},i(i){if(!l){for(let u=0;u<o.length;u+=1)b(e[u]);l=!0}},o(i){for(let u=0;u<e.length;u+=1)x(e[u]);l=!1},d(i){i&&w(r);for(let u=0;u<e.length;u+=1)e[u].d(i)}}}function Gn(t){let e,n,r;return e=new yn({props:{cluster:t[15]}}),{c(){M(e.$$.fragment),n=T()},l(l){I(e.$$.fragment,l),n=N(l)},m(l,o){S(e,l,o),O(l,n,o),r=!0},p(l,o){const s={};o&16&&(s.cluster=l[15]),e.$set(s)},i(l){r||(b(e.$$.fragment,l),r=!0)},o(l){x(e.$$.fragment,l),r=!1},d(l){l&&w(n),C(e,l)}}}function Ze(t,e){let n,r,l;return r=new Q({props:{url:e[8](e[15]),class:"contents",$$slots:{default:[Gn]},$$scope:{ctx:e}}}),{key:t,first:null,c(){n=F(),M(r.$$.fragment),this.h()},l(o){n=F(),I(r.$$.fragment,o),this.h()},h(){this.first=n},m(o,s){O(o,n,s),S(r,o,s),l=!0},p(o,s){e=o;const i={};s&16&&(i.url=e[8](e[15])),s&262160&&(i.$$scope={dirty:s,ctx:e}),r.$set(i)},i(o){l||(b(r.$$.fragment,o),l=!0)},o(o){x(r.$$.fragment,o),l=!1},d(o){o&&w(n),C(r,o)}}}function Jn(t){let e,n,r,l,o;n=new Wn({props:{queries:t[3],dataUrl:t[5]}});let s=t[0]&&Ye(t);return{c(){e=P("div"),M(n.$$.fragment),r=T(),l=P("div"),s&&s.c(),this.h()},l(i){e=V(i,"DIV",{class:!0});var u=j(e);I(n.$$.fragment,u),r=N(u),l=V(u,"DIV",{class:!0});var a=j(l);s&&s.l(a),a.forEach(w),u.forEach(w),this.h()},h(){$(l,"class","container p-s grid-1-s s:grid-2-s xl:grid-3-s xxl:grid-4-s svelte-1v06egl"),$(e,"class","page l:flex-start-start")},m(i,u){O(i,e,u),S(n,e,null),D(e,r),D(e,l),s&&s.m(l,null),o=!0},p(i,[u]){const a={};u&8&&(a.queries=i[3]),u&32&&(a.dataUrl=i[5]),n.$set(a),i[0]?s?(s.p(i,u),u&1&&b(s,1)):(s=Ye(i),s.c(),b(s,1),s.m(l,null)):s&&(Z(),x(s,1,1,()=>{s=null}),ee())},i(i){o||(b(n.$$.fragment,i),b(s),o=!0)},o(i){x(n.$$.fragment,i),x(s),o=!1},d(i){i&&w(e),C(n),s&&s.d()}}}function Kn(t,e,n){let r,l,o,s,i,u,a,g,c,d,k=!1,y=he("query");ue(t,y,v=>n(1,a=v));let f=he("lang");ue(t,f,v=>n(2,g=v));const h=async(v=(m=>(m=Object.keys(oe))==null?void 0:m[0])())=>{var q;if(k||!qt)return;k=!0;const{data:_,error:p}=await wt({key:`tiktok-${v}-data`,url:i,type:"text"});_?(n(9,d=kt(_)),c!=null&&c.length||(n(3,c=[]),d.forEach(A=>{c.find(L=>L.slug===A.querySlug)||c.push({slug:A.querySlug,title:A.query})}),a||Ee(y,a=(q=c[0])==null?void 0:q.slug,a),g||Ee(f,g=v,g))):n(9,d=null),k=!1},E=v=>{const m=v==null?void 0:v[0];return`/tiktok/${g}/${a}/${m}`};return t.$$.update=()=>{var v,m,_;t.$$.dirty&518&&n(0,r=(d==null?void 0:d.length)&&a&&g),t.$$.dirty&4&&n(11,l=((v=oe)==null?void 0:v[g])||((m=oe)==null?void 0:m.us)),t.$$.dirty&514&&n(10,o=(_=d==null?void 0:d.filter)==null?void 0:_.call(d,p=>(p==null?void 0:p.querySlug)===a)),t.$$.dirty&2048&&n(12,s=`${xt}/tiktokAssets/${l==null?void 0:l.code}`),t.$$.dirty&6144&&n(5,i=l?`${s}/clusters_${l.code}.csv`:null),t.$$.dirty&2048&&h(l==null?void 0:l.code),t.$$.dirty&1025&&n(4,u=r?Ot(o,p=>p.cluster):[])},[r,a,g,c,u,i,y,f,E,d,o,l,s]}class or extends W{constructor(e){super(),G(this,e,Kn,Jn,B,{})}}export{or as component};
