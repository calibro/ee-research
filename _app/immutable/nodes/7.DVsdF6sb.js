import{g as W,c as Q,f as z}from"../chunks/download.D2r-P-1V.js";import"../chunks/index.CzR0xuCU.js";import{b as U}from"../chunks/paths.Bj7KZwBc.js";import{s as J,o as K,q as te,p as re,v as se,r as ne,m as oe,c as le,f as ae}from"../chunks/scheduler.DNhbA_Mc.js";import{S as Z,i as x,e as q,m as I,s as M,c as k,a as w,n as S,f as T,d as p,o as y,g as L,h as $,p as D,k as _,z as X,l as b,x as Y,q as V,I as F,G as ie,B as P,y as j}from"../chunks/index._vs4WPtb.js";import{e as A,u as ce,o as ue}from"../chunks/each.D6wE_PoE.js";import{S as fe,q as de,a as me,g as he,b as ge}from"../chunks/index.B0hft4KO.js";import{T as C}from"../chunks/text.JoT1ARhU.js";const pe=!1,_e=!0,ve=!1;async function ye({params:i,fetch:t}){const n=`${U}/assets/gettyimages/queries.csv`,{data:o,error:a}=await W({key:"gettyimages-queries",url:n,type:"text"},t);return!o||a?(console.error("error",a),a(404,"Not found")):{queries:Q(o)}}const je=Object.freeze(Object.defineProperty({__proto__:null,csr:_e,load:ye,prerender:pe,ssr:ve},Symbol.toStringTag,{value:"Module"})),be=i=>{const t=l=>{const s=l.target.closest(".scroll-container");if(!s)return;const r={left:s.scrollLeft,top:s.scrollTop,x:l.clientX,y:l.clientY},e=u=>{const d=u.clientX-r.x,v=u.clientY-r.y;s.scrollTop=r.top-v,s.scrollLeft=r.left-d,o(s)},c=()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",c),a(s)};document.addEventListener("mousemove",e),document.addEventListener("mouseup",c)},n=l=>{const s=containerRef.current;if(!s)return;const r=l.touches[0],e={left:s.scrollLeft,top:s.scrollTop,x:r.clientX,y:r.clientY},c=d=>{const v=d.touches[0],h=v.clientX-e.x,m=v.clientY-e.y;s.scrollTop=e.top-m,s.scrollLeft=e.left-h,o(s)},u=()=>{document.removeEventListener("touchmove",c),document.removeEventListener("touchend",u),a(s)};document.addEventListener("touchmove",c),document.addEventListener("touchend",u)},o=l=>{l.style.cursor="grabbing",l.style.userSelect="none"},a=l=>{l.style.cursor="grab",l.style.removeProperty("user-select")};return document.addEventListener("mousedown",t,!0),document.addEventListener("touchstart",n,!0),{destroy(){document.removeEventListener("mousedown",t,!0),document.removeEventListener("touchstart",n,!0)}}};function G(i,t,n){const o=i.slice();return o[12]=t[n],o[14]=n,o}function H(i){let t,n,o,a,l,s=A(i[4]),r=[];for(let e=0;e<s.length;e+=1)r[e]=O(G(i,s,e));return{c(){t=q("div");for(let e=0;e<r.length;e+=1)r[e].c();this.h()},l(e){t=k(e,"DIV",{class:!0});var c=w(t);for(let u=0;u<r.length;u+=1)r[u].l(c);c.forEach(p),this.h()},h(){y(t,"class","images col-[span-9] l:col-[span-7] scrollbar-hide scroll-container svelte-ndfj1q")},m(e,c){L(e,t,c);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(t,null);o=!0,a||(l=te(be.call(null,t)),a=!0)},p(e,c){if(c&56){s=A(e[4]);let u;for(u=0;u<s.length;u+=1){const d=G(e,s,u);r[u]?r[u].p(d,c):(r[u]=O(d),r[u].c(),r[u].m(t,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=s.length}},i(e){o||(e&&re(()=>{o&&(n||(n=F(t,z,{},!0)),n.run(1))}),o=!0)},o(e){e&&(n||(n=F(t,z,{},!1)),n.run(0)),o=!1},d(e){e&&p(t),ie(r,e),e&&n&&n.end(),a=!1,l()}}}function O(i){let t,n,o,a,l,s;function r(...c){return i[7](i[14],...c)}function e(...c){return i[8](i[14],...c)}return{c(){t=q("div"),n=q("img"),a=M(),this.h()},l(c){t=k(c,"DIV",{class:!0,role:!0});var u=w(t);n=k(u,"IMG",{src:!0,alt:!0,loading:!0,draggable:!0}),a=T(u),u.forEach(p),this.h()},h(){se(n.src,o=i[3](i[12].id))||y(n,"src",o),y(n,"alt",i[12].title),y(n,"loading","lazy"),y(n,"draggable","false"),y(t,"class","image-container svelte-ndfj1q"),y(t,"role","img")},m(c,u){L(c,t,u),$(t,n),$(t,a),l||(s=[P(t,"mouseover",r),P(t,"focus",e),P(t,"mouseout",i[9]),P(t,"blur",i[10])],l=!0)},p(c,u){i=c},d(c){c&&p(t),l=!1,ne(s)}}}function $e(i){var v;let t,n,o,a,l,s,r,e,c,u;a=new C({props:{typo:"label",content:"Stereotype",class:"case-upper"}}),s=new C({props:{typo:"h3",content:i[0][1][0].clusterLabel,class:"mb-xs"}}),e=new C({props:{typo:"label",content:"Images: "+((v=i[0][1])==null?void 0:v.length),class:"case-upper"}});let d=i[2]&&H(i);return{c(){t=q("div"),n=q("div"),o=q("div"),I(a.$$.fragment),l=M(),I(s.$$.fragment),r=M(),I(e.$$.fragment),c=M(),d&&d.c(),this.h()},l(h){t=k(h,"DIV",{class:!0});var m=w(t);n=k(m,"DIV",{class:!0});var f=w(n);o=k(f,"DIV",{});var g=w(o);S(a.$$.fragment,g),l=T(g),S(s.$$.fragment,g),g.forEach(p),r=T(f),S(e.$$.fragment,f),f.forEach(p),c=T(m),d&&d.l(m),m.forEach(p),this.h()},h(){y(n,"class","col-[span-9] l:col-[span-2] flex-btw-start l:flex-col-btw-start p-s"),y(t,"class","getty grid-9-gap svelte-ndfj1q")},m(h,m){L(h,t,m),$(t,n),$(n,o),D(a,o,null),$(o,l),D(s,o,null),$(n,r),D(e,n,null),$(t,c),d&&d.m(t,null),i[11](t),u=!0},p(h,[m]){var E;const f={};m&1&&(f.content=h[0][1][0].clusterLabel),s.$set(f);const g={};m&1&&(g.content="Images: "+((E=h[0][1])==null?void 0:E.length)),e.$set(g),h[2]?d?(d.p(h,m),m&4&&_(d,1)):(d=H(h),d.c(),_(d,1),d.m(t,null)):d&&(X(),b(d,1,1,()=>{d=null}),Y())},i(h){u||(_(a.$$.fragment,h),_(s.$$.fragment,h),_(e.$$.fragment,h),_(d),u=!0)},o(h){b(a.$$.fragment,h),b(s.$$.fragment,h),b(e.$$.fragment,h),b(d),u=!1},d(h){h&&p(t),V(a),V(s),V(e),d&&d.d(),i[11](null)}}}function qe(i,t,n){let{cluster:o}=t,{query:a}=t;const l=f=>`${U}/assets/gettyimages/${a}/images/${f}.jpg`,s=o[1].sort((f,g)=>f.rank-g.rank);let r;const e=(f,g)=>{window.matchMedia("(hover: hover)").matches&&(f!=null&&f.target?f.target.closest(".image-container").style.minWidth=`${f.target.clientWidth}px`:r.querySelectorAll(".image-container").forEach(ee=>{ee.removeAttribute("style")}))};let c=!1;K(()=>{let f;const g=()=>{const E=r.getBoundingClientRect();if(n(2,c=E.top<window.innerHeight&&E.bottom>=0),c){cancelAnimationFrame(f);return}f=requestAnimationFrame(g)};return g(),()=>{cancelAnimationFrame(f)}});const u=(f,g)=>e(g),d=(f,g)=>e(g),v=f=>e(),h=f=>e();function m(f){oe[f?"unshift":"push"](()=>{r=f,n(1,r)})}return i.$$set=f=>{"cluster"in f&&n(0,o=f.cluster),"query"in f&&n(6,a=f.query)},[o,r,c,l,s,e,a,u,d,v,h,m]}class ke extends Z{constructor(t){super(),x(this,t,qe,$e,J,{cluster:0,query:6})}}function B(i,t,n){const o=i.slice();return o[11]=t[n],o[13]=n,o}function N(i){let t=[],n=new Map,o,a,l=A(i[0]);const s=r=>{var e;return`${r[1]}-${r[13]}-${(e=r[11])==null?void 0:e[0]}`};for(let r=0;r<l.length;r+=1){let e=B(i,l,r),c=s(e);n.set(c,t[r]=R(c,e))}return{c(){for(let r=0;r<t.length;r+=1)t[r].c();o=j()},l(r){for(let e=0;e<t.length;e+=1)t[e].l(r);o=j()},m(r,e){for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(r,e);L(r,o,e),a=!0},p(r,e){e&3&&(l=A(r[0]),X(),t=ce(t,e,s,1,r,l,n,o.parentNode,ue,R,o,B),Y())},i(r){if(!a){for(let e=0;e<l.length;e+=1)_(t[e]);a=!0}},o(r){for(let e=0;e<t.length;e+=1)b(t[e]);a=!1},d(r){r&&p(o);for(let e=0;e<t.length;e+=1)t[e].d(r)}}}function R(i,t){let n,o,a;return o=new ke({props:{cluster:t[11],query:t[1]}}),{key:i,first:null,c(){n=j(),I(o.$$.fragment),this.h()},l(l){n=j(),S(o.$$.fragment,l),this.h()},h(){this.first=n},m(l,s){L(l,n,s),D(o,l,s),a=!0},p(l,s){t=l;const r={};s&1&&(r.cluster=t[11]),s&2&&(r.query=t[1]),o.$set(r)},i(l){a||(_(o.$$.fragment,l),a=!0)},o(l){b(o.$$.fragment,l),a=!1},d(l){l&&p(n),V(o,l)}}}function we(i){let t,n,o,a,l;n=new fe({props:{queries:i[2],showLang:!1,description:i[3]("description"),question:i[3]("research_question")}});let s=i[0].length&&N(i);return{c(){t=q("div"),I(n.$$.fragment),o=M(),a=q("div"),s&&s.c(),this.h()},l(r){t=k(r,"DIV",{class:!0});var e=w(t);S(n.$$.fragment,e),o=T(e),a=k(e,"DIV",{class:!0});var c=w(a);s&&s.l(c),c.forEach(p),e.forEach(p),this.h()},h(){y(a,"class","container p-s grid-1-s svelte-1bhb5im"),y(t,"class","page l:flex-start-start")},m(r,e){L(r,t,e),D(n,t,null),$(t,o),$(t,a),s&&s.m(a,null),l=!0},p(r,[e]){r[0].length?s?(s.p(r,e),e&1&&_(s,1)):(s=N(r),s.c(),_(s,1),s.m(a,null)):s&&(X(),b(s,1,1,()=>{s=null}),Y())},i(r){l||(_(n.$$.fragment,r),_(s),l=!0)},o(r){b(n.$$.fragment,r),b(s),l=!1},d(r){r&&p(t),V(n),s&&s.d()}}}function Ee(i,t,n){let o,a,{data:l}=t;const{queries:s}=l,r=me("getty_stereotypes");let e,c,u=!1,d=de("query");le(i,d,m=>n(1,a=m)),K(()=>{var m;a||ae(d,a=(m=s[0])==null?void 0:m.query,a)});const v=`${U}/assets/gettyimages`,h=async()=>{if(u||!ge)return;if(u=!0,!a){u=!1,n(6,e=null);return}const{data:m,error:f}=await W({key:"getty-stereotypes-data",url:o,type:"text"});m?n(6,e=Q(m)):n(6,e=null),u=!1};return i.$$set=m=>{"data"in m&&n(5,l=m.data)},i.$$.update=()=>{i.$$.dirty&2&&n(7,o=`${v}/${a}/${a}.csv`),i.$$.dirty&64&&n(0,c=e!=null&&e.length?he(e,m=>m.cluster).sort((m,f)=>m[0]==="other"?1:f[0]==="other"?-1:m[0]>f[0]?1:-1):[]),i.$$.dirty&128&&h(),i.$$.dirty&1&&console.log(c)},[c,a,s,r,d,l,e,o]}class Ae extends Z{constructor(t){super(),x(this,t,Ee,we,J,{data:5})}}export{Ae as component,je as universal};
