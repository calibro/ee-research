import{g as te,c as se}from"../chunks/download.C-N7S_0U.js";import"../chunks/index.CzR0xuCU.js";import{b as O}from"../chunks/paths.DTArjLTa.js";import{s as N,v as oe,w as W,r as le,c as ae,o as ce,n as ue,f as ie}from"../chunks/scheduler.DqfkSni8.js";import{S as re,i as ne,e as w,m as D,s as U,c as T,a as I,n as P,f as X,d as b,o as $,C as F,g as M,h as E,p as V,k as q,l as k,q as j,G as fe,B as C,x as B,z as Q,y as Y}from"../chunks/index.Ck_lgHTT.js";import{e as z,u as me,o as de}from"../chunks/each.BXnJiQdI.js";import{S as he,q as ge,a as pe,g as _e,b as ye}from"../chunks/index.BLF_H_fo.js";import{T as G}from"../chunks/text.Cqgp7NCy.js";const ve=!1,be=!0,$e=!1;async function qe({params:c,fetch:e}){const n=`${O}/assets/gettyimages/queries.csv`,{data:s,error:l}=await te({key:"gettyimages-queries",url:n,type:"text"},e);return!s||l?(console.error("error",l),l(404,"Not found")):{queries:se(s)}}const Xe=Object.freeze(Object.defineProperty({__proto__:null,csr:be,load:qe,prerender:ve,ssr:$e},Symbol.toStringTag,{value:"Module"})),ke=c=>{const e=o=>{const a=o.target.closest(".scroll-container");if(!a)return;const r={left:a.scrollLeft,top:a.scrollTop,x:o.clientX,y:o.clientY},t=m=>{const p=m.clientX-r.x,_=m.clientY-r.y;a.scrollTop=r.top-_,a.scrollLeft=r.left-p,s(a)},i=()=>{document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",i),l(a)};document.addEventListener("mousemove",t),document.addEventListener("mouseup",i)},n=o=>{const a=containerRef.current;if(!a)return;const r=o.touches[0],t={left:a.scrollLeft,top:a.scrollTop,x:r.clientX,y:r.clientY},i=p=>{const _=p.touches[0],d=_.clientX-t.x,f=_.clientY-t.y;a.scrollTop=t.top-f,a.scrollLeft=t.left-d,s(a)},m=()=>{document.removeEventListener("touchmove",i),document.removeEventListener("touchend",m),l(a)};document.addEventListener("touchmove",i),document.addEventListener("touchend",m)},s=o=>{o.style.cursor="grabbing",o.style.userSelect="none"},l=o=>{o.style.cursor="grab",o.style.removeProperty("user-select")};return document.addEventListener("mousedown",e,!0),document.addEventListener("touchstart",n,!0),{destroy(){document.removeEventListener("mousedown",e,!0),document.removeEventListener("touchstart",n,!0)}}};function H(c,e,n){const s=c.slice();return s[9]=e[n],s[11]=n,s}function J(c){let e,n,s,l,o;function a(...t){return c[5](c[11],...t)}function r(...t){return c[6](c[11],...t)}return{c(){e=w("img"),this.h()},l(t){e=T(t,"IMG",{src:!0,alt:!0,loading:!0,draggable:!0}),this.h()},h(){W(e.src,n=c[2](c[9].id))||$(e,"src",n),$(e,"alt",s=c[9].title),$(e,"loading","lazy"),$(e,"draggable","false")},m(t,i){M(t,e,i),l||(o=[C(e,"mouseover",a),C(e,"focus",r),C(e,"mouseout",c[7]),C(e,"blur",c[8])],l=!0)},p(t,i){c=t,i&1&&!W(e.src,n=c[2](c[9].id))&&$(e,"src",n),i&1&&s!==(s=c[9].title)&&$(e,"alt",s)},d(t){t&&b(e),l=!1,le(o)}}}function Le(c){var A;let e,n,s,l,o,a,r,t,i,m,p,_,d;l=new G({props:{typo:"label",content:"Stereotype",class:"case-upper"}}),a=new G({props:{typo:"h3",content:c[0][1][0].clusterLabel,class:"mb-xs"}}),t=new G({props:{typo:"label",content:"Images: "+((A=c[0][1])==null?void 0:A.length),class:"case-upper"}});let f=z(c[0][1]),h=[];for(let u=0;u<f.length;u+=1)h[u]=J(H(c,f,u));return{c(){e=w("div"),n=w("div"),s=w("div"),D(l.$$.fragment),o=U(),D(a.$$.fragment),r=U(),D(t.$$.fragment),i=U(),m=w("div");for(let u=0;u<h.length;u+=1)h[u].c();this.h()},l(u){e=T(u,"DIV",{class:!0});var y=I(e);n=T(y,"DIV",{class:!0});var v=I(n);s=T(v,"DIV",{});var L=I(s);P(l.$$.fragment,L),o=X(L),P(a.$$.fragment,L),L.forEach(b),r=X(v),P(t.$$.fragment,v),v.forEach(b),i=X(y),m=T(y,"DIV",{class:!0,style:!0});var S=I(m);for(let g=0;g<h.length;g+=1)h[g].l(S);S.forEach(b),y.forEach(b),this.h()},h(){$(n,"class","col-[span-2] flex-col-btw-start p-s"),$(m,"class","images col-[span-7] scrollbar-hide scroll-container svelte-1sqyefy"),F(m,"--columns",c[1]),$(e,"class","getty grid-9-gap svelte-1sqyefy")},m(u,y){M(u,e,y),E(e,n),E(n,s),V(l,s,null),E(s,o),V(a,s,null),E(n,r),V(t,n,null),E(e,i),E(e,m);for(let v=0;v<h.length;v+=1)h[v]&&h[v].m(m,null);p=!0,_||(d=oe(ke.call(null,m)),_=!0)},p(u,[y]){var S;const v={};y&1&&(v.content=u[0][1][0].clusterLabel),a.$set(v);const L={};if(y&1&&(L.content="Images: "+((S=u[0][1])==null?void 0:S.length)),t.$set(L),y&13){f=z(u[0][1]);let g;for(g=0;g<f.length;g+=1){const R=H(u,f,g);h[g]?h[g].p(R,y):(h[g]=J(R),h[g].c(),h[g].m(m,null))}for(;g<h.length;g+=1)h[g].d(1);h.length=f.length}(!p||y&2)&&F(m,"--columns",u[1])},i(u){p||(q(l.$$.fragment,u),q(a.$$.fragment,u),q(t.$$.fragment,u),p=!0)},o(u){k(l.$$.fragment,u),k(a.$$.fragment,u),k(t.$$.fragment,u),p=!1},d(u){u&&b(e),j(l),j(a),j(t),fe(h,u),_=!1,d()}}}function Ee(c,e,n){var _;let{cluster:s}=e,{query:l}=e;const o=d=>`${O}/assets/gettyimages/${l}/images/${d}.jpg`;let a=Array.from({length:(_=s[1])==null?void 0:_.length},()=>"30px").join(" ");const r=(d,f)=>{var h;n(1,a=Array.from({length:(h=s[1])==null?void 0:h.length},(A,u)=>u===f?`${d.target.clientWidth}px`:"30px").join(" "))},t=(d,f)=>r(f,d),i=(d,f)=>r(f,d),m=d=>r(),p=d=>r();return c.$$set=d=>{"cluster"in d&&n(0,s=d.cluster),"query"in d&&n(4,l=d.query)},[s,a,o,r,l,t,i,m,p]}class we extends re{constructor(e){super(),ne(this,e,Ee,Le,N,{cluster:0,query:4})}}function K(c,e,n){const s=c.slice();return s[11]=e[n],s[13]=n,s}function Z(c){let e=[],n=new Map,s,l,o=z(c[0]);const a=r=>{var t;return`${r[1]}-${r[13]}-${(t=r[11])==null?void 0:t[0]}`};for(let r=0;r<o.length;r+=1){let t=K(c,o,r),i=a(t);n.set(i,e[r]=x(i,t))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();s=Y()},l(r){for(let t=0;t<e.length;t+=1)e[t].l(r);s=Y()},m(r,t){for(let i=0;i<e.length;i+=1)e[i]&&e[i].m(r,t);M(r,s,t),l=!0},p(r,t){t&3&&(o=z(r[0]),Q(),e=me(e,t,a,1,r,o,n,s.parentNode,de,x,s,K),B())},i(r){if(!l){for(let t=0;t<o.length;t+=1)q(e[t]);l=!0}},o(r){for(let t=0;t<e.length;t+=1)k(e[t]);l=!1},d(r){r&&b(s);for(let t=0;t<e.length;t+=1)e[t].d(r)}}}function x(c,e){let n,s,l;return s=new we({props:{cluster:e[11],query:e[1]}}),{key:c,first:null,c(){n=Y(),D(s.$$.fragment),this.h()},l(o){n=Y(),P(s.$$.fragment,o),this.h()},h(){this.first=n},m(o,a){M(o,n,a),V(s,o,a),l=!0},p(o,a){e=o;const r={};a&1&&(r.cluster=e[11]),a&2&&(r.query=e[1]),s.$set(r)},i(o){l||(q(s.$$.fragment,o),l=!0)},o(o){k(s.$$.fragment,o),l=!1},d(o){o&&b(n),j(s,o)}}}function ee(c){let e,n,s=c[0].length&&Z(c);return{c(){e=w("div"),s&&s.c(),this.h()},l(l){e=T(l,"DIV",{class:!0});var o=I(e);s&&s.l(o),o.forEach(b),this.h()},h(){$(e,"class","container p-s grid-1-s svelte-1bhb5im")},m(l,o){M(l,e,o),s&&s.m(e,null),n=!0},p(l,o){l[0].length?s?(s.p(l,o),o&1&&q(s,1)):(s=Z(l),s.c(),q(s,1),s.m(e,null)):s&&(Q(),k(s,1,1,()=>{s=null}),B())},i(l){n||(q(s),n=!0)},o(l){k(s),n=!1},d(l){l&&b(e),s&&s.d()}}}function Te(c){let e,n,s,l=c[1],o;n=new he({props:{queries:c[2],showLang:!1,description:c[3]("description"),question:c[3]("research_question")}});let a=ee(c);return{c(){e=w("div"),D(n.$$.fragment),s=U(),a.c(),this.h()},l(r){e=T(r,"DIV",{class:!0});var t=I(e);P(n.$$.fragment,t),s=X(t),a.l(t),t.forEach(b),this.h()},h(){$(e,"class","page l:flex-start-start")},m(r,t){M(r,e,t),V(n,e,null),E(e,s),a.m(e,null),o=!0},p(r,[t]){t&2&&N(l,l=r[1])?(Q(),k(a,1,1,ue),B(),a=ee(r),a.c(),q(a,1),a.m(e,null)):a.p(r,t)},i(r){o||(q(n.$$.fragment,r),q(a),o=!0)},o(r){k(n.$$.fragment,r),k(a),o=!1},d(r){r&&b(e),j(n),a.d(r)}}}function Ie(c,e,n){let s,l,{data:o}=e;const{queries:a}=o,r=pe("getty_stereotypes");let t,i,m=!1,p=ge("query");ae(c,p,f=>n(1,l=f)),ce(()=>{var f;l||ie(p,l=(f=a[0])==null?void 0:f.query,l)});const _=`${O}/assets/gettyimages`,d=async()=>{if(m||!ye)return;if(m=!0,!l){m=!1,n(6,t=null);return}const{data:f,error:h}=await te({key:"getty-stereotypes-data",url:s,type:"text"});f?n(6,t=se(f)):n(6,t=null),m=!1};return c.$$set=f=>{"data"in f&&n(5,o=f.data)},c.$$.update=()=>{c.$$.dirty&2&&n(7,s=`${_}/${l}/${l}.csv`),c.$$.dirty&64&&n(0,i=t!=null&&t.length?_e(t,f=>f.cluster):[]),c.$$.dirty&128&&d(),c.$$.dirty&1&&console.log(i)},[i,l,a,r,p,o,t,s]}class Ye extends re{constructor(e){super(),ne(this,e,Ie,Te,N,{data:5})}}export{Ye as component,Xe as universal};
