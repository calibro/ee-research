import{b as fe}from"../chunks/entry.CNwJifys.js";import{g as he,c as de,l as x,a as ye,b as ke}from"../chunks/index.DemlbhXW.js";import{s as J,e as $,a as A,c as w,b as E,g as D,f as g,p as v,i as q,h as I,E as me,S as K,B,z as $e,A as Y,O as we,L as qe,k as ee,Q as Ce,U as te,V as pe,n as T,F as j}from"../chunks/scheduler.DYeTGcRG.js";import{S as _e,i as ge,c as F,b as H,m as O,t as y,g as N,a as k,f as P,d as U}from"../chunks/index.C5RX2N7H.js";import{g as Me}from"../chunks/globals.D0QH3NT1.js";import{e as Q,u as be,d as Ve,o as Ee}from"../chunks/each.kS4HPsoe.js";import{S as Ie,q as re,g as Le,b as Se}from"../chunks/sidebar.REozkBHh.js";import{l as Ae,c as De}from"../chunks/lockscroll.DqM8qm6-.js";import{s as Te,h as Fe}from"../chunks/customSwipe.-5bGPq0K.js";import{M as He}from"../chunks/modal.B98vi3cZ.js";import{T as G}from"../chunks/text.Ddg16gdd.js";const Oe=!1,Ue=!0,Ne=!1;async function Pe({params:o,fetch:e}){const r=`${fe}/assets/youtube/queries.csv`,{data:t,error:n}=await he({key:"youtube-queries",url:r,type:"text"},e);if(!t||n)return console.error("error",n),n(404,"Not found");const l=de(t);return l.sort((c,a)=>c.queryLabel.localeCompare(a.queryLabel)),{queries:l}}const it=Object.freeze(Object.defineProperty({__proto__:null,csr:Ue,load:Pe,prerender:Oe,ssr:Ne},Symbol.toStringTag,{value:"Module"}));function le(o,e,r){const t=o.slice();return t[14]=e[r],t[16]=r,t}function ne(o){let e,r=[],t=new Map,n,l,c,a,i=Q(o[5]);const h=s=>`${s[14].id}-${s[0][0]}-${s[16]}`;for(let s=0;s<i.length;s+=1){let d=le(o,i,s),u=h(d);t.set(u,r[s]=oe(u,d))}let f=o[1]&&ae(o);return{c(){e=$("div");for(let s=0;s<r.length;s+=1)r[s].c();n=A(),f&&f.c(),this.h()},l(s){e=w(s,"DIV",{class:!0});var d=E(e);for(let u=0;u<r.length;u+=1)r[u].l(d);n=D(d),f&&f.l(d),d.forEach(g),this.h()},h(){v(e,"class","images col-[span-9] xl:col-[span-7] scrollbar-hide scroll-container svelte-11bhkcp")},m(s,d){q(s,e,d);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);I(e,n),f&&f.m(e,null),l=!0,c||(a=K(Te.call(null,e)),c=!0)},p(s,d){d&103&&(i=Q(s[5]),r=be(r,d,h,1,s,i,t,e,Ve,oe,n,le)),s[1]?f?(f.p(s,d),d&2&&y(f,1)):(f=ae(s),f.c(),y(f,1),f.m(e,null)):f&&(N(),k(f,1,1,()=>{f=null}),P())},i(s){l||(y(f),l=!0)},o(s){k(f),l=!1},d(s){s&&g(e);for(let d=0;d<r.length;d+=1)r[d].d();f&&f.d(),c=!1,a()}}}function se(o){let e,r,t,n,l;function c(){return o[7](o[14])}return{c(){e=$("img"),this.h()},l(a){e=w(a,"IMG",{src:!0,alt:!0,loading:!0,draggable:!0}),this.h()},h(){Y(e.src,r=o[14].thumb)||v(e,"src",r),v(e,"alt",o[14].title),v(e,"loading","lazy"),v(e,"draggable","false")},m(a,i){q(a,e,i),n||(l=K(t=Fe.call(null,e,{fn:c})),n=!0)},p(a,i){o=a,t&&qe(t.update)&&i&6&&t.update.call(null,{fn:c})},d(a){a&&g(e),n=!1,l()}}}function oe(o,e){let r,t=`${e[14].name}-${e[0][0]}-${e[16]}`,n,l,c=se(e);function a(...h){return e[8](e[16],...h)}function i(...h){return e[9](e[16],...h)}return{key:o,first:null,c(){r=$("button"),c.c(),this.h()},l(h){r=w(h,"BUTTON",{class:!0,tabindex:!0});var f=E(r);c.l(f),f.forEach(g),this.h()},h(){v(r,"class","image-container svelte-11bhkcp"),v(r,"tabindex","0"),this.first=r},m(h,f){q(h,r,f),c.m(r,null),n||(l=[B(r,"mouseover",a),B(r,"focus",i),B(r,"mouseout",e[10]),B(r,"blur",e[11])],n=!0)},p(h,f){e=h,f&1&&J(t,t=`${e[14].name}-${e[0][0]}-${e[16]}`)?(c.d(1),c=se(e),c.c(),c.m(r,null)):c.p(e,f)},d(h){h&&g(r),c.d(h),n=!1,$e(l)}}}function ae(o){let e,r;return e=new He({props:{theme:"no-bg",fn:o[12],$$slots:{default:[Re]},$$scope:{ctx:o}}}),{c(){F(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){O(e,t,n),r=!0},p(t,n){const l={};n&6&&(l.fn=t[12]),n&131076&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){U(e,t)}}}function Re(o){let e,r,t;return{c(){e=$("div"),r=$("iframe"),this.h()},l(n){e=w(n,"DIV",{});var l=E(e);r=w(l,"IFRAME",{width:!0,height:!0,src:!0,title:!0,frameborder:!0,allow:!0}),E(r).forEach(g),l.forEach(g),this.h()},h(){v(r,"width","560"),v(r,"height","315"),Y(r.src,t="https://www.youtube.com/embed/"+o[2])||v(r,"src",t),v(r,"title",""),v(r,"frameborder","0"),v(r,"allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"),r.allowFullscreen=!0},m(n,l){q(n,e,l),I(e,r)},p(n,l){l&4&&!Y(r.src,t="https://www.youtube.com/embed/"+n[2])&&v(r,"src",t)},d(n){n&&g(e)}}}function ze(o){var d;let e,r,t,n,l,c,a,i,h,f;n=new G({props:{typo:"label",content:"Cluster",class:"case-upper"}}),c=new G({props:{typo:"h3",content:o[0][1][0].clusterLabel,class:"mb-xs"}}),i=new G({props:{typo:"label",content:"Videos: "+((d=o[0][1])==null?void 0:d.length),class:"case-upper"}});let s=o[4]&&ne(o);return{c(){e=$("div"),r=$("div"),t=$("div"),F(n.$$.fragment),l=A(),F(c.$$.fragment),a=A(),F(i.$$.fragment),h=A(),s&&s.c(),this.h()},l(u){e=w(u,"DIV",{class:!0});var m=E(e);r=w(m,"DIV",{class:!0});var b=E(r);t=w(b,"DIV",{});var C=E(t);H(n.$$.fragment,C),l=D(C),H(c.$$.fragment,C),C.forEach(g),a=D(b),H(i.$$.fragment,b),b.forEach(g),h=D(m),s&&s.l(m),m.forEach(g),this.h()},h(){v(r,"class","col-[span-9] xl:col-[span-2] flex-btw-start xl:flex-col-btw-start p-s"),v(e,"class","getty grid-9-gap svelte-11bhkcp")},m(u,m){q(u,e,m),I(e,r),I(r,t),O(n,t,null),I(t,l),O(c,t,null),I(r,a),O(i,r,null),I(e,h),s&&s.m(e,null),o[13](e),f=!0},p(u,[m]){var p;const b={};m&1&&(b.content=u[0][1][0].clusterLabel),c.$set(b);const C={};m&1&&(C.content="Videos: "+((p=u[0][1])==null?void 0:p.length)),i.$set(C),u[4]?s?(s.p(u,m),m&16&&y(s,1)):(s=ne(u),s.c(),y(s,1),s.m(e,null)):s&&(N(),k(s,1,1,()=>{s=null}),P())},i(u){f||(y(n.$$.fragment,u),y(c.$$.fragment,u),y(i.$$.fragment,u),y(s),f=!0)},o(u){k(n.$$.fragment,u),k(c.$$.fragment,u),k(i.$$.fragment,u),k(s),f=!1},d(u){u&&g(e),U(n),U(c),U(i),s&&s.d(),o[13](null)}}}function Be(o,e,r){let{cluster:t}=e,n=!1,l=!1;const c=t[1].sort((p,M)=>p.rank-M.rank);let a;const i=(p,M)=>{window.matchMedia("(hover: hover)").matches&&(p!=null&&p.target?p.target.closest(".image-container").style.minWidth=`${p.target.clientWidth-1}px`:a.querySelectorAll(".image-container").forEach(V=>{V.removeAttribute("style")}))};let h=!1;me(()=>{let p;const M=()=>{const _=a.getBoundingClientRect();if(r(4,h=_.top<window.innerHeight&&_.bottom>=0),h){cancelAnimationFrame(p);return}p=requestAnimationFrame(M)};return M(),()=>{cancelAnimationFrame(p)}});const f=p=>{r(1,n=!0),r(2,l=p.name)},s=(p,M)=>i(M),d=(p,M)=>i(M),u=p=>i(),m=p=>i(),b=()=>{r(1,n=!1),r(2,l=!1)};function C(p){we[p?"unshift":"push"](()=>{a=p,r(3,a)})}return o.$$set=p=>{"cluster"in p&&r(0,t=p.cluster)},[t,n,l,a,h,c,i,f,s,d,u,m,b,C]}class je extends _e{constructor(e){super(),ge(this,e,Be,ze,J,{cluster:0})}}const{document:Qe}=Me;function ie(o,e,r){const t=o.slice();return t[16]=e[r],t[18]=r,t}function We(o){let e,r,t=o[2].length&&o[6]&&ce(o);return{c(){e=$("div"),t&&t.c(),this.h()},l(n){e=w(n,"DIV",{class:!0});var l=E(e);t&&t.l(l),l.forEach(g),this.h()},h(){v(e,"class","container p-s flex-col-start gap-s svelte-15scxqn")},m(n,l){q(n,e,l),t&&t.m(e,null),r=!0},p(n,l){n[2].length&&n[6]?t?(t.p(n,l),l&4&&y(t,1)):(t=ce(n),t.c(),y(t,1),t.m(e,null)):t&&(N(),k(t,1,1,()=>{t=null}),P())},i(n){r||(y(t),r=!0)},o(n){k(t),r=!1},d(n){n&&g(e),t&&t.d()}}}function Ge(o){let e,r="<p>No data available</p>";return{c(){e=$("div"),e.innerHTML=r,this.h()},l(t){e=w(t,"DIV",{class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-kunnt3"&&(e.innerHTML=r),this.h()},h(){v(e,"class","container flex-center-center svelte-15scxqn")},m(t,n){q(t,e,n)},p:T,i:T,o:T,d(t){t&&g(e)}}}function Ye(o){let e,r="<p>Loading...</p>";return{c(){e=$("div"),e.innerHTML=r,this.h()},l(t){e=w(t,"DIV",{class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-qdph03"&&(e.innerHTML=r),this.h()},h(){v(e,"class","container flex-center-center svelte-15scxqn")},m(t,n){q(t,e,n)},p:T,i:T,o:T,d(t){t&&g(e)}}}function ce(o){let e=[],r=new Map,t,n,l=Q(o[2]);const c=a=>{var i;return`${a[18]}-${(i=a[16])==null?void 0:i[0]}`};for(let a=0;a<l.length;a+=1){let i=ie(o,l,a),h=c(i);r.set(h,e[a]=ue(h,i))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=j()},l(a){for(let i=0;i<e.length;i+=1)e[i].l(a);t=j()},m(a,i){for(let h=0;h<e.length;h+=1)e[h]&&e[h].m(a,i);q(a,t,i),n=!0},p(a,i){i&4&&(l=Q(a[2]),N(),e=be(e,i,c,1,a,l,r,t.parentNode,Ee,ue,t,ie),P())},i(a){if(!n){for(let i=0;i<l.length;i+=1)y(e[i]);n=!0}},o(a){for(let i=0;i<e.length;i+=1)k(e[i]);n=!1},d(a){a&&g(t);for(let i=0;i<e.length;i+=1)e[i].d(a)}}}function ue(o,e){let r,t,n;return t=new je({props:{cluster:e[16]}}),{key:o,first:null,c(){r=j(),F(t.$$.fragment),this.h()},l(l){r=j(),H(t.$$.fragment,l),this.h()},h(){this.first=r},m(l,c){q(l,r,c),O(t,l,c),n=!0},p(l,c){e=l;const a={};c&4&&(a.cluster=e[16]),t.$set(a)},i(l){n||(y(t.$$.fragment,l),n=!0)},o(l){k(t.$$.fragment,l),n=!1},d(l){l&&g(r),U(t,l)}}}function Je(o){let e,r,t,n,l,c,a,i,h;t=new Ie({props:{queries:o[3],description:o[5]("description"),question:o[5]("research_question"),topic:ve,download:o[8]}});const f=[Ye,Ge,We],s=[];function d(u,m){var b;return u[1]?0:(b=u[0])!=null&&b.length?2:1}return l=d(o),c=s[l]=f[l](o),{c(){e=A(),r=$("div"),F(t.$$.fragment),n=A(),c.c(),this.h()},l(u){e=D(u),r=w(u,"DIV",{class:!0});var m=E(r);H(t.$$.fragment,m),n=D(m),c.l(m),m.forEach(g),this.h()},h(){v(r,"class","page xl:flex-start-start")},m(u,m){q(u,e,m),q(u,r,m),O(t,r,null),I(r,n),s[l].m(r,null),a=!0,i||(h=K(Ae.call(null,Qe.body,o[4])),i=!0)},p(u,[m]){let b=l;l=d(u),l===b?s[l].p(u,m):(N(),k(s[b],1,1,()=>{s[b]=null}),P(),c=s[l],c?c.p(u,m):(c=s[l]=f[l](u),c.c()),y(c,1),c.m(r,null))},i(u){a||(y(t.$$.fragment,u),y(c),a=!0)},o(u){k(t.$$.fragment,u),k(c),a=!1},d(u){u&&(g(e),g(r)),U(t),s[l].d(),i=!1,h()}}}const ve="youtube_clusters";function Ke(o,e,r){let t,n,l,c,{data:a}=e;const{queries:i}=a,h=De(),f=Le(ve);let s,d,u=!1,m=re("query");ee(o,m,_=>r(13,c=_));let b=re("lang");ee(o,b,_=>r(12,l=_)),me(async()=>{var _;await Ce(),c||te(m,c=(_=i[0])==null?void 0:_.query,c),l||te(b,l=t==null?void 0:t.code,l)});const C=`${fe}/assets/youtube`,p=async()=>{if(u||!Se||!n)return;if(r(1,u=!0),!c){r(1,u=!1),r(0,s=null);return}const{data:_,error:V}=await he({key:"youtube-comparison-data",url:n,type:"text"});_?r(0,s=de(_)):r(0,s=null),r(1,u=!1)},M=()=>{if(s!=null&&s.length){const R=s,S=ye([["title","link","cluster","query","language"]].concat(R.map(L=>[L.label,`https://www.youtube.com/v/${L.name}`,L.clusterLabel,i.find(z=>z.query===c).queryLabel,L.language])));var _="data:text/csv;charset=utf-8,"+encodeURIComponent(S),V=document.createElement("a");V.setAttribute("href",_),V.setAttribute("download",`youtube-clusters_${c}_${l}.csv`),document.body.appendChild(V),V.click()}};return o.$$set=_=>{"data"in _&&r(9,a=_.data)},o.$$.update=()=>{var _,V,R;o.$$.dirty&4096&&r(11,t=((_=x)==null?void 0:_[l])||((V=x)==null?void 0:V.en)),o.$$.dirty&10240&&r(10,n=t!=null&&t.code?`${C}/clusters/${c}_${(R=t==null?void 0:t.code)==null?void 0:R.toUpperCase()}.csv`:void 0),o.$$.dirty&3&&r(2,d=s!=null&&s.length&&!u?ke(s,S=>S.cluster).sort((S,W)=>{var L,z,X,Z;return S[0]==="other"?1:W[0]==="other"?-1:((z=(L=S[1])==null?void 0:L[0])==null?void 0:z.clusterLabel)>((Z=(X=W[1])==null?void 0:X[0])==null?void 0:Z.clusterLabel)?1:-1}):[]),o.$$.dirty&1024&&p()},[s,u,d,i,h,f,m,b,M,a,n,t,l,c]}class ct extends _e{constructor(e){super(),ge(this,e,Ke,Je,J,{data:9})}}export{ct as component,it as universal};
