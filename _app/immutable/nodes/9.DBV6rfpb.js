import{b as be}from"../chunks/entry.DEV1taqI.js";import{e as ke,I as Ye}from"../chunks/image.zJzKtlTq.js";import{g as Me,c as Be,l as Ze,D as Je}from"../chunks/index.BWSmiydm.js";import{s as Pe,e as L,a as V,F as Ae,c as N,b as P,f as d,g as C,p as b,i as Q,h as c,B as et,t as Te,d as Le,V as tt,N as Re,A as nt,j as ze,n as xe,T as st}from"../chunks/scheduler.DjmlZpBi.js";import{S as Se,i as Oe,c as _,b as h,m as w,t as m,g as We,a as p,f as Xe,d as k}from"../chunks/index.D5mPgV2_.js";import{e as He}from"../chunks/each.K9NGHkqs.js";import{P as rt,L as at}from"../chunks/play.C8UkVpoY.js";import{M as lt}from"../chunks/modal.B76gFB0w.js";import{T as M}from"../chunks/text.DH_QAwnB.js";import{C as ot}from"../chunks/close.DhimUgka.js";import{L as Ne}from"../chunks/link.v6sysQXL.js";function Fe(r,e){let n=0;if(e===void 0)for(let t of r)(t=+t)&&(n+=t);else{let t=-1;for(let o of r)(o=+e(o,++t,r))&&(n+=o)}return n}const it=!1,ft=!0,$t=!1;async function ct({params:r,fetch:e}){var j,x,S,B,D,$,I;const{lang:n,query:t,slug:o}=r,s=Ze[n];if(!s)return ke(404,"Not found");const v=`${`${be}/assets/tiktok/${s.code}`}/clusters_${s.code}.csv`,{data:i,error:q}=await Me({key:`tiktok-${s.code}-data`,url:v,type:"text"},e);if(!i||q)return console.error("error",q),ke(404,"Not found");let l=[];const f=Be(i),u=(j=f==null?void 0:f.filter)==null?void 0:j.call(f,U=>(U==null?void 0:U.querySlug)===t&&(U==null?void 0:U.cluster)===o),E={label:(x=u[0])==null?void 0:x.clusterLabel,slug:(S=u[0])==null?void 0:S.cluster};if(l=(D=(B=u==null?void 0:u.map(U=>U.ids))==null?void 0:B.join("|"))==null?void 0:D.split("|"),!(l!=null&&l.length))return ke(404,"Not found");const T=`${be}/assets/tiktok/videos.csv`,{data:R,error:y}=await Me({key:"tiktok-videos",url:T,type:"text"},e);return!R||y?(console.error("error",y),ke(404,"Not found")):{videos:(I=($=Be(R))==null?void 0:$.filter)==null?void 0:I.call($,U=>l.includes(U.id)),cluster:E,lang:n,query:t}}const St=Object.freeze(Object.defineProperty({__proto__:null,csr:ft,load:ct,prerender:it,ssr:$t},Symbol.toStringTag,{value:"Module"}));function Ke(r){let e,n;return e=new lt({props:{fn:r[3],$$slots:{default:[ut]},$$scope:{ctx:r}}}),{c(){_(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,o){w(e,t,o),n=!0},p(t,o){const s={};o&2&&(s.fn=t[3]),o&17&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function ut(r){let e,n,t,o,s=r[0].username+"",g,v,i,q,l,f=r[0].video_description+"",u,E,T,R,y,K="",j;return{c(){e=L("blockquote"),n=L("section"),t=L("a"),o=Te("@"),g=Te(s),q=V(),l=L("p"),u=Te(f),R=V(),y=L("script"),y.innerHTML=K,this.h()},l(x){e=N(x,"BLOCKQUOTE",{class:!0,cite:!0,"data-video-id":!0,"data-embed-from":!0,style:!0});var S=P(e);n=N(S,"SECTION",{});var B=P(n);t=N(B,"A",{target:!0,title:!0,href:!0});var D=P(t);o=Le(D,"@"),g=Le(D,s),D.forEach(d),q=C(B),l=N(B,"P",{});var $=P(l);u=Le($,f),$.forEach(d),B.forEach(d),S.forEach(d),R=C(x),y=N(x,"SCRIPT",{src:!0,"data-svelte-h":!0}),tt(y)!=="svelte-lbz9tt"&&(y.innerHTML=K),this.h()},h(){b(t,"target","_blank"),b(t,"title",v="@"+r[0].username),b(t,"href",i="https://www.tiktok.com/@"+r[0].username+"?refer=embed"),b(e,"class","tiktok-embed"),b(e,"cite",E=r[0].link),b(e,"data-video-id",T=r[0].id),b(e,"data-embed-from","embed_page"),Re(e,"max-width","325px"),Re(e,"min-width","325px"),y.async=!0,nt(y.src,j="https://www.tiktok.com/embed.js")||b(y,"src",j)},m(x,S){Q(x,e,S),c(e,n),c(n,t),c(t,o),c(t,g),c(n,q),c(n,l),c(l,u),Q(x,R,S),Q(x,y,S)},p(x,S){S&1&&s!==(s=x[0].username+"")&&ze(g,s),S&1&&v!==(v="@"+x[0].username)&&b(t,"title",v),S&1&&i!==(i="https://www.tiktok.com/@"+x[0].username+"?refer=embed")&&b(t,"href",i),S&1&&f!==(f=x[0].video_description+"")&&ze(u,f),S&1&&E!==(E=x[0].link)&&b(e,"cite",E),S&1&&T!==(T=x[0].id)&&b(e,"data-video-id",T)},d(x){x&&(d(e),d(R),d(y))}}}function mt(r){let e,n,t,o,s,g,v,i,q,l,f,u,E,T,R,y,K,j,x,S,B;t=new Ye({props:{src:be+"/assets/tiktok/thumbs/"+r[0].id+".webp",alt:r[0].title}}),s=new M({props:{tag:"p",typo:"p",content:r[0].video_description,class:"max-lines mb-xs"}}),q=new rt({props:{width:"14"}}),f=new M({props:{tag:"p",typo:"p",content:r[0].view_count}}),T=new at({props:{width:"14"}}),y=new M({props:{tag:"p",typo:"p",content:r[0].like_count}});let D=r[1]&&Ke(r);return{c(){e=L("button"),n=L("div"),_(t.$$.fragment),o=V(),_(s.$$.fragment),g=V(),v=L("div"),i=L("div"),_(q.$$.fragment),l=V(),_(f.$$.fragment),u=V(),E=L("div"),_(T.$$.fragment),R=V(),_(y.$$.fragment),K=V(),D&&D.c(),j=Ae(),this.h()},l($){e=N($,"BUTTON",{class:!0});var I=P(e);n=N(I,"DIV",{class:!0});var U=P(n);h(t.$$.fragment,U),U.forEach(d),o=C(I),h(s.$$.fragment,I),g=C(I),v=N(I,"DIV",{class:!0});var A=P(v);i=N(A,"DIV",{class:!0});var G=P(i);h(q.$$.fragment,G),l=C(G),h(f.$$.fragment,G),G.forEach(d),u=C(A),E=N(A,"DIV",{class:!0});var H=P(E);h(T.$$.fragment,H),R=C(H),h(y.$$.fragment,H),H.forEach(d),A.forEach(d),I.forEach(d),K=C($),D&&D.l($),j=Ae(),this.h()},h(){b(n,"class","img svelte-11w1air"),b(i,"class","flex gap-xs"),b(E,"class","flex gap-xs"),b(v,"class","grid-3-xs"),b(e,"class","thumb p-s flex-col-start-stretch gap-s text-left svelte-11w1air")},m($,I){Q($,e,I),c(e,n),w(t,n,null),c(e,o),w(s,e,null),c(e,g),c(e,v),c(v,i),w(q,i,null),c(i,l),w(f,i,null),c(v,u),c(v,E),w(T,E,null),c(E,R),w(y,E,null),Q($,K,I),D&&D.m($,I),Q($,j,I),x=!0,S||(B=et(e,"click",r[2]),S=!0)},p($,[I]){const U={};I&1&&(U.src=be+"/assets/tiktok/thumbs/"+$[0].id+".webp"),I&1&&(U.alt=$[0].title),t.$set(U);const A={};I&1&&(A.content=$[0].video_description),s.$set(A);const G={};I&1&&(G.content=$[0].view_count),f.$set(G);const H={};I&1&&(H.content=$[0].like_count),y.$set(H),$[1]?D?(D.p($,I),I&2&&m(D,1)):(D=Ke($),D.c(),m(D,1),D.m(j.parentNode,j)):D&&(We(),p(D,1,1,()=>{D=null}),Xe())},i($){x||(m(t.$$.fragment,$),m(s.$$.fragment,$),m(q.$$.fragment,$),m(f.$$.fragment,$),m(T.$$.fragment,$),m(y.$$.fragment,$),m(D),x=!0)},o($){p(t.$$.fragment,$),p(s.$$.fragment,$),p(q.$$.fragment,$),p(f.$$.fragment,$),p(T.$$.fragment,$),p(y.$$.fragment,$),p(D),x=!1},d($){$&&(d(e),d(K),d(j)),k(t),k(s),k(q),k(f),k(T),k(y),D&&D.d($),S=!1,B()}}}function gt(r,e,n){let{video:t={}}=e,o=!1;const s=()=>n(1,o=!0),g=()=>n(1,o=!1);return r.$$set=v=>{"video"in v&&n(0,t=v.video)},[t,o,s,g]}class pt extends Se{constructor(e){super(),Oe(this,e,gt,mt,Pe,{video:0})}}function dt(r){let e,n,t,o;return e=new M({props:{typo:"1",content:"download data"}}),t=new Je({props:{width:"8"}}),{c(){_(e.$$.fragment),n=V(),_(t.$$.fragment)},l(s){h(e.$$.fragment,s),n=C(s),h(t.$$.fragment,s)},m(s,g){w(e,s,g),Q(s,n,g),w(t,s,g),o=!0},p:xe,i(s){o||(m(e.$$.fragment,s),m(t.$$.fragment,s),o=!0)},o(s){p(e.$$.fragment,s),p(t.$$.fragment,s),o=!1},d(s){s&&d(n),k(e,s),k(t,s)}}}function vt(r){let e,n;return e=new ot({props:{width:"26"}}),{c(){_(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,o){w(e,t,o),n=!0},p:xe,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function _t(r){let e,n,t,o;return e=new M({props:{typo:"1",content:"download data"}}),t=new Je({props:{width:"8"}}),{c(){_(e.$$.fragment),n=V(),_(t.$$.fragment)},l(s){h(e.$$.fragment,s),n=C(s),h(t.$$.fragment,s)},m(s,g){w(e,s,g),Q(s,n,g),w(t,s,g),o=!0},p:xe,i(s){o||(m(e.$$.fragment,s),m(t.$$.fragment,s),o=!0)},o(s){p(e.$$.fragment,s),p(t.$$.fragment,s),o=!1},d(s){s&&d(n),k(e,s),k(t,s)}}}function ht(r){var je,Ue;let e,n,t,o,s,g,v,i,q,l,f,u,E,T,R,y,K,j,x,S,B,D,$,I,U,A,G,H,W,he,F,X,oe,ye,Y,De,Z,ie,Ee,ee,Ie,te,fe,qe,ne,Ve,se,$e,Ce,re,we;return o=new M({props:{content:"Topic",typo:"label",class:"case-upper"}}),g=new M({props:{tag:"h3",typo:"h3",content:r[2].label,ellipsis:!0}}),q=new M({props:{content:"Tiktoks",typo:"label",class:"case-upper"}}),f=new M({props:{tag:"h3",typo:"h3",content:(je=r[3])==null?void 0:je.length}}),T=new M({props:{content:"Total Plays",typo:"label",class:"case-upper"}}),y=new M({props:{tag:"h3",typo:"h3",content:r[0]}}),x=new M({props:{content:"Total Likes",typo:"label",class:"case-upper"}}),B=new M({props:{tag:"h3",typo:"h3",content:r[1]}}),I=new M({props:{content:"Resources",typo:"label",class:"case-upper pb-xxs"}}),A=new Ne({props:{theme:"download",class:"flex gap-xxs items-center",fn:r[6],$$slots:{default:[dt]},$$scope:{ctx:r}}}),W=new Ne({props:{url:"/tiktok/?lang="+r[5]+"&query="+r[4],class:"flex-center-center",$$slots:{default:[vt]},$$scope:{ctx:r}}}),oe=new M({props:{content:"Tiktoks",typo:"label",class:"case-upper"}}),Y=new M({props:{tag:"h3",typo:"h3",content:(Ue=r[3])==null?void 0:Ue.length}}),ie=new M({props:{content:"Total Plays",typo:"label",class:"case-upper"}}),ee=new M({props:{tag:"h3",typo:"h3",content:r[0]}}),fe=new M({props:{content:"Total Likes",typo:"label",class:"case-upper"}}),ne=new M({props:{tag:"h3",typo:"h3",content:r[1]}}),$e=new M({props:{content:"Resources",typo:"label",class:"case-upper pb-xxs"}}),re=new Ne({props:{theme:"download",class:"flex gap-xxs items-center",$$slots:{default:[_t]},$$scope:{ctx:r}}}),{c(){e=L("div"),n=L("div"),t=L("div"),_(o.$$.fragment),s=V(),_(g.$$.fragment),v=V(),i=L("div"),_(q.$$.fragment),l=V(),_(f.$$.fragment),u=V(),E=L("div"),_(T.$$.fragment),R=V(),_(y.$$.fragment),K=V(),j=L("div"),_(x.$$.fragment),S=V(),_(B.$$.fragment),D=V(),$=L("div"),_(I.$$.fragment),U=V(),_(A.$$.fragment),G=V(),H=L("div"),_(W.$$.fragment),he=V(),F=L("div"),X=L("div"),_(oe.$$.fragment),ye=V(),_(Y.$$.fragment),De=V(),Z=L("div"),_(ie.$$.fragment),Ee=V(),_(ee.$$.fragment),Ie=V(),te=L("div"),_(fe.$$.fragment),qe=V(),_(ne.$$.fragment),Ve=V(),se=L("div"),_($e.$$.fragment),Ce=V(),_(re.$$.fragment),this.h()},l(a){e=N(a,"DIV",{class:!0});var O=P(e);n=N(O,"DIV",{class:!0});var z=P(n);t=N(z,"DIV",{class:!0});var ce=P(t);h(o.$$.fragment,ce),s=C(ce),h(g.$$.fragment,ce),ce.forEach(d),v=C(z),i=N(z,"DIV",{class:!0});var ue=P(i);h(q.$$.fragment,ue),l=C(ue),h(f.$$.fragment,ue),ue.forEach(d),u=C(z),E=N(z,"DIV",{class:!0});var me=P(E);h(T.$$.fragment,me),R=C(me),h(y.$$.fragment,me),me.forEach(d),K=C(z),j=N(z,"DIV",{class:!0});var ae=P(j);h(x.$$.fragment,ae),S=C(ae),h(B.$$.fragment,ae),ae.forEach(d),D=C(z),$=N(z,"DIV",{class:!0});var le=P($);h(I.$$.fragment,le),U=C(le),h(A.$$.fragment,le),le.forEach(d),G=C(z),H=N(z,"DIV",{class:!0});var _e=P(H);h(W.$$.fragment,_e),_e.forEach(d),z.forEach(d),O.forEach(d),he=C(a),F=N(a,"DIV",{class:!0});var J=P(F);X=N(J,"DIV",{class:!0});var ge=P(X);h(oe.$$.fragment,ge),ye=C(ge),h(Y.$$.fragment,ge),ge.forEach(d),De=C(J),Z=N(J,"DIV",{class:!0});var pe=P(Z);h(ie.$$.fragment,pe),Ee=C(pe),h(ee.$$.fragment,pe),pe.forEach(d),Ie=C(J),te=N(J,"DIV",{class:!0});var de=P(te);h(fe.$$.fragment,de),qe=C(de),h(ne.$$.fragment,de),de.forEach(d),Ve=C(J),se=N(J,"DIV",{class:!0});var ve=P(se);h($e.$$.fragment,ve),Ce=C(ve),h(re.$$.fragment,ve),ve.forEach(d),J.forEach(d),this.h()},h(){b(t,"class","title col-[span-3] py-s px-s svelte-1cq55h0"),b(i,"class","hidden xl:block xl:col-6 py-s px-s xl:px-0"),b(E,"class","hidden xl:block xl:col-[7/span-2] py-s px-s xl:px-0"),b(j,"class","hidden xl:block xl:col-9 py-s px-s xl:px-0"),b($,"class","hidden xl:block xl:col-[10/span-2] py-s px-s xl:px-0"),b(H,"class","col-4 xl:col-12 self-center justify-self-end px-s"),b(n,"class","content grid-4-0 xl:grid-12-gap svelte-1cq55h0"),b(e,"class","navbar svelte-1cq55h0"),b(X,"class","col-[span-2] xl:col-6 py-s px-s xl:px-0"),b(Z,"class","col-[span-2] xl:col-[7/span-2] py-s px-s xl:px-0"),b(te,"class","col-[span-2] xl:col-9 py-s px-s xl:px-0"),b(se,"class","col-[span-2] xl:col-[10/span-2] py-s px-s xl:px-0"),b(F,"class","mobile-only grid-4-0 xl:hidden bg-white svelte-1cq55h0")},m(a,O){Q(a,e,O),c(e,n),c(n,t),w(o,t,null),c(t,s),w(g,t,null),c(n,v),c(n,i),w(q,i,null),c(i,l),w(f,i,null),c(n,u),c(n,E),w(T,E,null),c(E,R),w(y,E,null),c(n,K),c(n,j),w(x,j,null),c(j,S),w(B,j,null),c(n,D),c(n,$),w(I,$,null),c($,U),w(A,$,null),c(n,G),c(n,H),w(W,H,null),Q(a,he,O),Q(a,F,O),c(F,X),w(oe,X,null),c(X,ye),w(Y,X,null),c(F,De),c(F,Z),w(ie,Z,null),c(Z,Ee),w(ee,Z,null),c(F,Ie),c(F,te),w(fe,te,null),c(te,qe),w(ne,te,null),c(F,Ve),c(F,se),w($e,se,null),c(se,Ce),w(re,se,null),we=!0},p(a,[O]){var de,ve;const z={};O&4&&(z.content=a[2].label),g.$set(z);const ce={};O&8&&(ce.content=(de=a[3])==null?void 0:de.length),f.$set(ce);const ue={};O&1&&(ue.content=a[0]),y.$set(ue);const me={};O&2&&(me.content=a[1]),B.$set(me);const ae={};O&64&&(ae.fn=a[6]),O&128&&(ae.$$scope={dirty:O,ctx:a}),A.$set(ae);const le={};O&48&&(le.url="/tiktok/?lang="+a[5]+"&query="+a[4]),O&128&&(le.$$scope={dirty:O,ctx:a}),W.$set(le);const _e={};O&8&&(_e.content=(ve=a[3])==null?void 0:ve.length),Y.$set(_e);const J={};O&1&&(J.content=a[0]),ee.$set(J);const ge={};O&2&&(ge.content=a[1]),ne.$set(ge);const pe={};O&128&&(pe.$$scope={dirty:O,ctx:a}),re.$set(pe)},i(a){we||(m(o.$$.fragment,a),m(g.$$.fragment,a),m(q.$$.fragment,a),m(f.$$.fragment,a),m(T.$$.fragment,a),m(y.$$.fragment,a),m(x.$$.fragment,a),m(B.$$.fragment,a),m(I.$$.fragment,a),m(A.$$.fragment,a),m(W.$$.fragment,a),m(oe.$$.fragment,a),m(Y.$$.fragment,a),m(ie.$$.fragment,a),m(ee.$$.fragment,a),m(fe.$$.fragment,a),m(ne.$$.fragment,a),m($e.$$.fragment,a),m(re.$$.fragment,a),we=!0)},o(a){p(o.$$.fragment,a),p(g.$$.fragment,a),p(q.$$.fragment,a),p(f.$$.fragment,a),p(T.$$.fragment,a),p(y.$$.fragment,a),p(x.$$.fragment,a),p(B.$$.fragment,a),p(I.$$.fragment,a),p(A.$$.fragment,a),p(W.$$.fragment,a),p(oe.$$.fragment,a),p(Y.$$.fragment,a),p(ie.$$.fragment,a),p(ee.$$.fragment,a),p(fe.$$.fragment,a),p(ne.$$.fragment,a),p($e.$$.fragment,a),p(re.$$.fragment,a),we=!1},d(a){a&&(d(e),d(he),d(F)),k(o),k(g),k(q),k(f),k(T),k(y),k(x),k(B),k(I),k(A),k(W),k(oe),k(Y),k(ie),k(ee),k(fe),k(ne),k($e),k(re)}}}function wt(r,e,n){let{viewCount:t,likeCount:o,cluster:s,videos:g,query:v,lang:i,download:q=()=>{}}=e;return r.$$set=l=>{"viewCount"in l&&n(0,t=l.viewCount),"likeCount"in l&&n(1,o=l.likeCount),"cluster"in l&&n(2,s=l.cluster),"videos"in l&&n(3,g=l.videos),"query"in l&&n(4,v=l.query),"lang"in l&&n(5,i=l.lang),"download"in l&&n(6,q=l.download)},[t,o,s,g,v,i,q]}class kt extends Se{constructor(e){super(),Oe(this,e,wt,ht,Pe,{viewCount:0,likeCount:1,cluster:2,videos:3,query:4,lang:5,download:6})}}function Qe(r,e,n){const t=r.slice();return t[8]=e[n],t}function Ge(r){let e,n;return e=new pt({props:{video:r[8]}}),{c(){_(e.$$.fragment)},l(t){h(e.$$.fragment,t)},m(t,o){w(e,t,o),n=!0},p:xe,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function bt(r){let e,n,t,o,s,g;n=new kt({props:{viewCount:r[4],likeCount:r[5],cluster:r[1],videos:r[0],query:r[2],lang:r[3],download:r[6]}});let v=He(r[0]),i=[];for(let l=0;l<v.length;l+=1)i[l]=Ge(Qe(r,v,l));const q=l=>p(i[l],1,1,()=>{i[l]=null});return{c(){e=L("div"),_(n.$$.fragment),t=V(),o=L("div"),s=L("div");for(let l=0;l<i.length;l+=1)i[l].c();this.h()},l(l){e=N(l,"DIV",{class:!0});var f=P(e);h(n.$$.fragment,f),t=C(f),o=N(f,"DIV",{class:!0});var u=P(o);s=N(u,"DIV",{class:!0});var E=P(s);for(let T=0;T<i.length;T+=1)i[T].l(E);E.forEach(d),u.forEach(d),f.forEach(d),this.h()},h(){b(s,"class","p-s grid-1-s s:grid-2-s l:grid-3-s xl:grid-4-s xl:grid-5-s xxl:grid-6-s"),b(o,"class","container"),b(e,"class","page")},m(l,f){Q(l,e,f),w(n,e,null),c(e,t),c(e,o),c(o,s);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(s,null);g=!0},p(l,[f]){if(f&1){v=He(l[0]);let u;for(u=0;u<v.length;u+=1){const E=Qe(l,v,u);i[u]?(i[u].p(E,f),m(i[u],1)):(i[u]=Ge(E),i[u].c(),m(i[u],1),i[u].m(s,null))}for(We(),u=v.length;u<i.length;u+=1)q(u);Xe()}},i(l){if(!g){m(n.$$.fragment,l);for(let f=0;f<v.length;f+=1)m(i[f]);g=!0}},o(l){p(n.$$.fragment,l),i=i.filter(Boolean);for(let f=0;f<i.length;f+=1)p(i[f]);g=!1},d(l){l&&d(e),k(n),st(i,l)}}}function xt(r,e,n){let{data:t}=e;const{videos:o,cluster:s,query:g,lang:v}=t,i=Number(Fe(o,f=>f.view_count)).toLocaleString(),q=Number(Fe(o,f=>f.like_count)).toLocaleString(),l=()=>{console.log(o)};return r.$$set=f=>{"data"in f&&n(7,t=f.data)},[o,s,g,v,i,q,l,t]}class Ot extends Se{constructor(e){super(),Oe(this,e,xt,bt,Pe,{data:7})}}export{Ot as component,St as universal};
