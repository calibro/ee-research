import{g as B,c as F}from"../chunks/config.Cf_oiyhn.js";import"../chunks/image.owZ0pD_T.js";import{b as J}from"../chunks/paths.ZkHu_R03.js";import{s as K,a as D,e as O,g as N,c as G,b as R,f as g,p as T,i as b,h as V,L as X,k as Y,M as Z,G as L,n as k,N as x,O as W}from"../chunks/scheduler.CrW8fofK.js";import{S as ee,i as te,c as C,b as H,m as I,a as d,e as w,t as m,d as P,g as S}from"../chunks/index.TEUI1j1C.js";import{e as j,u as re,o as le}from"../chunks/each.BRNUf2gm.js";import{S as se,q as ne,g as oe,a as ae,b as ie}from"../chunks/index.qvo19LY_.js";import{l as ce,c as ue}from"../chunks/lockscroll.DLz6los7.js";import{G as fe,a as _e}from"../chunks/gettyStereo.DVjc1sKR.js";const pe=!1,me=!0,de=!1;async function he({params:o,fetch:t}){const r=`${J}/assets/gettyimages/queries.csv`,{data:e,error:l}=await B({key:"gettyimages-queries",url:r,type:"text"},t);if(!e||l)return console.error("error",l),l(404,"Not found");const s=F(e);return s.sort((i,n)=>i.queryLabel.localeCompare(n.queryLabel)),{queries:s}}const De=Object.freeze(Object.defineProperty({__proto__:null,csr:me,load:he,prerender:pe,ssr:de},Symbol.toStringTag,{value:"Module"}));function E(o,t,r){const e=o.slice();return e[15]=t[r],e[17]=r,e}function ge(o){let t,r,e=o[3].length&&U(o);return{c(){t=O("div"),e&&e.c(),this.h()},l(l){t=G(l,"DIV",{class:!0});var s=R(t);e&&e.l(s),s.forEach(g),this.h()},h(){T(t,"class","container p-s grid-1-s svelte-fr0d3y")},m(l,s){b(l,t,s),e&&e.m(t,null),r=!0},p(l,s){l[3].length?e?(e.p(l,s),s&8&&m(e,1)):(e=U(l),e.c(),m(e,1),e.m(t,null)):e&&(S(),d(e,1,1,()=>{e=null}),w())},i(l){r||(m(e),r=!0)},o(l){d(e),r=!1},d(l){l&&g(t),e&&e.d()}}}function ye(o){let t,r="<p>No data available</p>";return{c(){t=O("div"),t.innerHTML=r,this.h()},l(e){t=G(e,"DIV",{class:!0,"data-svelte-h":!0}),W(t)!=="svelte-kunnt3"&&(t.innerHTML=r),this.h()},h(){T(t,"class","container flex-center-center svelte-fr0d3y")},m(e,l){b(e,t,l)},p:k,i:k,o:k,d(e){e&&g(t)}}}function be(o){let t,r="<p>Loading...</p>";return{c(){t=O("div"),t.innerHTML=r,this.h()},l(e){t=G(e,"DIV",{class:!0,"data-svelte-h":!0}),W(t)!=="svelte-qdph03"&&(t.innerHTML=r),this.h()},h(){T(t,"class","container flex-center-center svelte-fr0d3y")},m(e,l){b(e,t,l)},p:k,i:k,o:k,d(e){e&&g(t)}}}function U(o){let t=[],r=new Map,e,l,s=j(o[3]);const i=n=>{var a;return`${n[17]}-${(a=n[15])==null?void 0:a[0]}`};for(let n=0;n<s.length;n+=1){let a=E(o,s,n),f=i(a);r.set(f,t[n]=z(f,a))}return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=L()},l(n){for(let a=0;a<t.length;a+=1)t[a].l(n);e=L()},m(n,a){for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(n,a);b(n,e,a),l=!0},p(n,a){a&524&&(s=j(n[3]),S(),t=re(t,a,i,1,n,s,r,e.parentNode,le,z,e,E),w())},i(n){if(!l){for(let a=0;a<s.length;a+=1)m(t[a]);l=!0}},o(n){for(let a=0;a<t.length;a+=1)d(t[a]);l=!1},d(n){n&&g(e);for(let a=0;a<t.length;a+=1)t[a].d(n)}}}function z(o,t){let r,e,l;return e=new fe({props:{cluster:t[15],query:t[2],openGallery:t[9]}}),{key:o,first:null,c(){r=L(),C(e.$$.fragment),this.h()},l(s){r=L(),H(e.$$.fragment,s),this.h()},h(){this.first=r},m(s,i){b(s,r,i),I(e,s,i),l=!0},p(s,i){t=s;const n={};i&8&&(n.cluster=t[15]),i&4&&(n.query=t[2]),e.$set(n)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){s&&g(r),P(e,s)}}}function A(o){let t,r;return t=new _e({props:{gallery:o[4],close:o[10],query:o[2]}}),{c(){C(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,l){I(t,e,l),r=!0},p(e,l){const s={};l&16&&(s.gallery=e[4]),l&4&&(s.query=e[2]),t.$set(s)},i(e){r||(m(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){P(t,e)}}}function Q(o){let t,r,e=o[4].isOpen&&A(o);return{c(){e&&e.c(),t=L()},l(l){e&&e.l(l),t=L()},m(l,s){e&&e.m(l,s),b(l,t,s),r=!0},p(l,s){l[4].isOpen?e?(e.p(l,s),s&16&&m(e,1)):(e=A(l),e.c(),m(e,1),e.m(t.parentNode,t)):e&&(S(),d(e,1,1,()=>{e=null}),w())},i(l){r||(m(e),r=!0)},o(l){d(e),r=!1},d(l){l&&g(t),e&&e.d(l)}}}function ke(o){let t,r,e,l,s,i,n,a=o[2],f,q,y;e=new se({props:{queries:o[5],showLang:!1,description:o[7]("description"),question:o[7]("research_question")}});const v=[be,ye,ge],h=[];function M(c,_){var u;return c[1]?0:(u=c[0])!=null&&u.length?2:1}s=M(o),i=h[s]=v[s](o);let p=Q(o);return{c(){t=D(),r=O("div"),C(e.$$.fragment),l=D(),i.c(),n=D(),p.c(),this.h()},l(c){t=N(c),r=G(c,"DIV",{class:!0});var _=R(r);H(e.$$.fragment,_),l=N(_),i.l(_),n=N(_),p.l(_),_.forEach(g),this.h()},h(){T(r,"class","page xl:flex-start-start")},m(c,_){b(c,t,_),b(c,r,_),I(e,r,null),V(r,l),h[s].m(r,null),V(r,n),p.m(r,null),f=!0,q||(y=X(ce.call(null,document.body,o[6])),q=!0)},p(c,[_]){let u=s;s=M(c),s===u?h[s].p(c,_):(S(),d(h[u],1,1,()=>{h[u]=null}),w(),i=h[s],i?i.p(c,_):(i=h[s]=v[s](c),i.c()),m(i,1),i.m(r,n)),_&4&&K(a,a=c[2])?(S(),d(p,1,1,k),w(),p=Q(c),p.c(),m(p,1),p.m(r,null)):p.p(c,_)},i(c){f||(m(e.$$.fragment,c),m(i),m(p),f=!0)},o(c){d(e.$$.fragment,c),d(i),d(p),f=!1},d(c){c&&(g(t),g(r)),P(e),h[s].d(),p.d(c),q=!1,y()}}}function qe(o,t,r){let e,l,{data:s}=t;const{queries:i}=s,n=ue(),a=oe("getty_stereotypes");let f,q,y=!1,v=ne("query");Y(o,v,u=>r(2,l=u)),Z(()=>{var u;l||x(v,l=(u=i[0])==null?void 0:u.query,l)});const h=`${J}/assets/gettyimages`,M=async()=>{if(y||!ie)return;if(r(1,y=!0),!l){r(1,y=!1),r(0,f=null);return}const{data:u,error:$}=await B({key:"getty-stereotypes-data",url:e,type:"text"});u?r(0,f=F(u)):r(0,f=null),r(1,y=!1)};let p={isOpen:!1,index:0,cluster:[]};const c=(u,$)=>{r(4,p={isOpen:!0,index:u,cluster:$}),n.toggle(!0)},_=()=>{r(4,p={isOpen:!1,index:0,cluster:[]}),n.toggle(!1)};return o.$$set=u=>{"data"in u&&r(11,s=u.data)},o.$$.update=()=>{o.$$.dirty&4&&r(12,e=`${h}/${l}/${l}.csv`),o.$$.dirty&3&&r(3,q=f!=null&&f.length&&!y?ae(f,u=>u.cluster).sort((u,$)=>u[0]==="other"?1:$[0]==="other"?-1:u[0]>$[0]?1:-1):[]),o.$$.dirty&4096&&M()},[f,y,l,q,p,i,n,a,v,c,_,s,e]}class Ne extends ee{constructor(t){super(),te(this,t,qe,ke,K,{data:11})}}export{Ne as component,De as universal};
