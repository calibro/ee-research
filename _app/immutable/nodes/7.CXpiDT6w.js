import{g as W,c as X}from"../chunks/download.CoU2zYNt.js";import"../chunks/index.CzR0xuCU.js";import{b as O}from"../chunks/paths.Ku5nVAoT.js";import{s as Y,v as B,r as se,c as ne,o as le,f as ae}from"../chunks/scheduler.BreXE5tw.js";import{S as Z,i as x,e as I,m as V,s as T,c as S,a as D,n as j,f as z,d as $,o as b,C as N,g as C,h as k,p as L,k as v,l as q,q as M,G as ee,B as P,x as te,y as Q,z as re}from"../chunks/index.DsedCxI2.js";import{e as A}from"../chunks/each.ER_Zf6B6.js";import{S as oe,q as ie,a as ce,g as ue,b as fe}from"../chunks/index.CE09KK_u.js";import{T as G}from"../chunks/text.0cmnj9Ez.js";const ge=!1,me=!0,he=!1;async function _e({params:a,fetch:e}){const l=`${O}/assets/gettyimages/queries.csv`,{data:n,error:t}=await W({key:"gettyimages-queries",url:l,type:"text"},e);return!n||t?(console.error("error",t),t(404,"Not found")):{queries:X(n)}}const Ve=Object.freeze(Object.defineProperty({__proto__:null,csr:me,load:_e,prerender:ge,ssr:he},Symbol.toStringTag,{value:"Module"}));function F(a,e,l){const n=a.slice();return n[9]=e[l],n[11]=l,n}function H(a){let e,l,n,t,u;function r(){return a[5](a[11])}function o(){return a[6](a[11])}return{c(){e=I("img"),this.h()},l(s){e=S(s,"IMG",{src:!0,alt:!0,loading:!0}),this.h()},h(){B(e.src,l=a[2](a[9].id))||b(e,"src",l),b(e,"alt",n=a[9].title),b(e,"loading","lazy")},m(s,f){C(s,e,f),t||(u=[P(e,"mouseover",r),P(e,"focus",o),P(e,"mouseout",a[7]),P(e,"blur",a[8])],t=!0)},p(s,f){a=s,f&1&&!B(e.src,l=a[2](a[9].id))&&b(e,"src",l),f&1&&n!==(n=a[9].title)&&b(e,"alt",n)},d(s){s&&$(e),t=!1,se(u)}}}function de(a){var g;let e,l,n,t,u,r,o,s,f,m,p;t=new G({props:{typo:"label",content:"Stereotype",class:"case-upper"}}),r=new G({props:{typo:"h3",content:a[0][1][0].clusterLabel,class:"mb-xs"}}),s=new G({props:{typo:"label",content:"Images: "+((g=a[0][1])==null?void 0:g.length),class:"case-upper"}});let y=A(a[0][1]),i=[];for(let c=0;c<y.length;c+=1)i[c]=H(F(a,y,c));return{c(){e=I("div"),l=I("div"),n=I("div"),V(t.$$.fragment),u=T(),V(r.$$.fragment),o=T(),V(s.$$.fragment),f=T(),m=I("div");for(let c=0;c<i.length;c+=1)i[c].c();this.h()},l(c){e=S(c,"DIV",{class:!0});var _=D(e);l=S(_,"DIV",{class:!0});var d=D(l);n=S(d,"DIV",{});var w=D(n);j(t.$$.fragment,w),u=z(w),j(r.$$.fragment,w),w.forEach($),o=z(d),j(s.$$.fragment,d),d.forEach($),f=z(_),m=S(_,"DIV",{class:!0,style:!0});var E=D(m);for(let h=0;h<i.length;h+=1)i[h].l(E);E.forEach($),_.forEach($),this.h()},h(){b(l,"class","col-[span-2] flex-col-btw-start p-s"),b(m,"class","images col-[span-7] scrollbar-hide svelte-imek44"),N(m,"--columns",a[1]),b(e,"class","getty grid-9-gap svelte-imek44")},m(c,_){C(c,e,_),k(e,l),k(l,n),L(t,n,null),k(n,u),L(r,n,null),k(l,o),L(s,l,null),k(e,f),k(e,m);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(m,null);p=!0},p(c,[_]){var E;const d={};_&1&&(d.content=c[0][1][0].clusterLabel),r.$set(d);const w={};if(_&1&&(w.content="Images: "+((E=c[0][1])==null?void 0:E.length)),s.$set(w),_&13){y=A(c[0][1]);let h;for(h=0;h<y.length;h+=1){const U=F(c,y,h);i[h]?i[h].p(U,_):(i[h]=H(U),i[h].c(),i[h].m(m,null))}for(;h<i.length;h+=1)i[h].d(1);i.length=y.length}(!p||_&2)&&N(m,"--columns",c[1])},i(c){p||(v(t.$$.fragment,c),v(r.$$.fragment,c),v(s.$$.fragment,c),p=!0)},o(c){q(t.$$.fragment,c),q(r.$$.fragment,c),q(s.$$.fragment,c),p=!1},d(c){c&&$(e),M(t),M(r),M(s),ee(i,c)}}}function pe(a,e,l){var y;let{cluster:n}=e,{query:t}=e;const u=i=>`${O}/assets/gettyimages/${t}/images/${i}.jpg`;let r=Array.from({length:(y=n[1])==null?void 0:y.length},()=>"30px").join(" ");const o=i=>{var g;l(1,r=Array.from({length:(g=n[1])==null?void 0:g.length},(c,_)=>_===i?"300px":"30px").join(" "))},s=i=>o(i),f=i=>o(i),m=()=>o(),p=()=>o();return a.$$set=i=>{"cluster"in i&&l(0,n=i.cluster),"query"in i&&l(4,t=i.query)},[n,r,u,o,t,s,f,m,p]}class ye extends Z{constructor(e){super(),x(this,e,pe,de,Y,{cluster:0,query:4})}}function J(a,e,l){const n=a.slice();return n[11]=e[l],n}function K(a){let e,l,n=A(a[0]),t=[];for(let r=0;r<n.length;r+=1)t[r]=R(J(a,n,r));const u=r=>q(t[r],1,1,()=>{t[r]=null});return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=Q()},l(r){for(let o=0;o<t.length;o+=1)t[o].l(r);e=Q()},m(r,o){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(r,o);C(r,e,o),l=!0},p(r,o){if(o&3){n=A(r[0]);let s;for(s=0;s<n.length;s+=1){const f=J(r,n,s);t[s]?(t[s].p(f,o),v(t[s],1)):(t[s]=R(f),t[s].c(),v(t[s],1),t[s].m(e.parentNode,e))}for(re(),s=n.length;s<t.length;s+=1)u(s);te()}},i(r){if(!l){for(let o=0;o<n.length;o+=1)v(t[o]);l=!0}},o(r){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)q(t[o]);l=!1},d(r){r&&$(e),ee(t,r)}}}function R(a){let e,l;return e=new ye({props:{cluster:a[11],query:a[1]}}),{c(){V(e.$$.fragment)},l(n){j(e.$$.fragment,n)},m(n,t){L(e,n,t),l=!0},p(n,t){const u={};t&1&&(u.cluster=n[11]),t&2&&(u.query=n[1]),e.$set(u)},i(n){l||(v(e.$$.fragment,n),l=!0)},o(n){q(e.$$.fragment,n),l=!1},d(n){M(e,n)}}}function ve(a){let e,l,n,t,u;l=new oe({props:{queries:a[2],showLang:!1,description:a[3]("description"),question:a[3]("research_question")}});let r=a[0].length&&K(a);return{c(){e=I("div"),V(l.$$.fragment),n=T(),t=I("div"),r&&r.c(),this.h()},l(o){e=S(o,"DIV",{class:!0});var s=D(e);j(l.$$.fragment,s),n=z(s),t=S(s,"DIV",{class:!0});var f=D(t);r&&r.l(f),f.forEach($),s.forEach($),this.h()},h(){b(t,"class","container p-s grid-1-s svelte-1bhb5im"),b(e,"class","page l:flex-start-start")},m(o,s){C(o,e,s),L(l,e,null),k(e,n),k(e,t),r&&r.m(t,null),u=!0},p(o,[s]){o[0].length?r?(r.p(o,s),s&1&&v(r,1)):(r=K(o),r.c(),v(r,1),r.m(t,null)):r&&(re(),q(r,1,1,()=>{r=null}),te())},i(o){u||(v(l.$$.fragment,o),v(r),u=!0)},o(o){q(l.$$.fragment,o),q(r),u=!1},d(o){o&&$(e),M(l),r&&r.d()}}}function $e(a,e,l){let n,t,{data:u}=e;const{queries:r}=u,o=ce("getty_stereotypes");let s,f,m=!1,p=ie("query");ne(a,p,g=>l(1,t=g)),le(()=>{var g;t||ae(p,t=(g=r[0])==null?void 0:g.query,t)});const y=`${O}/assets/gettyimages`,i=async()=>{if(m||!fe)return;if(m=!0,!t){m=!1,l(6,s=null);return}const{data:g,error:c}=await W({key:"getty-stereotypes-data",url:n,type:"text"});g?l(6,s=X(g)):l(6,s=null),m=!1};return a.$$set=g=>{"data"in g&&l(5,u=g.data)},a.$$.update=()=>{a.$$.dirty&2&&l(7,n=`${y}/${t}/${t}.csv`),a.$$.dirty&64&&l(0,f=s!=null&&s.length?ue(s,g=>g.cluster):[]),a.$$.dirty&128&&i(),a.$$.dirty&1&&console.log(f)},[f,t,r,o,p,u,s,n]}class je extends Z{constructor(e){super(),x(this,e,$e,ve,Y,{data:5})}}export{je as component,Ve as universal};
