import{b as be}from"../chunks/paths.C21FL9nA.js";import{e as we,I as Ye}from"../chunks/image.B21KzvfK.js";import{g as Me,c as Be,l as Ze,D as Ge}from"../chunks/index.Cut6ol57.js";import{s as Pe,e as L,a as C,I as Re,c as N,b as P,f as v,g as V,p as x,i as W,h as c,D as et,t as Te,d as Le,W as tt,N as ze,C as nt,j as Ae,n as xe,U as st}from"../chunks/scheduler.CfczHrgZ.js";import{S as Se,i as Oe,c as h,b as k,m as w,t as p,g as Je,a as d,f as Xe,d as b}from"../chunks/index.ZGSVq_s-.js";import{e as He}from"../chunks/each.Bh-FyJyd.js";import{P as rt,L as at}from"../chunks/play.CftIxNRr.js";import{M as lt}from"../chunks/modal.BQMhEA-y.js";import{T as M}from"../chunks/text.BnvuL1Wy.js";import{C as ot}from"../chunks/close.CbpR2r0T.js";import{L as Ne}from"../chunks/link.JHip69Ht.js";function Ke(r,e){let n=0;if(e===void 0)for(let t of r)(t=+t)&&(n+=t);else{let t=-1;for(let l of r)(l=+e(l,++t,r))&&(n+=l)}return n}const it=!1,ft=!0,$t=!1;async function ct({params:r,fetch:e}){var O,y,S,B,E,f,q;const{lang:n,query:t,slug:l}=r,s=Ze[n];if(!s)return we(404,"Not found");const _=`${`${be}/assets/tiktok/${s.code}`}/clusters_${s.code}.csv`,{data:o,error:m}=await Me({key:`tiktok-${s.code}-data`,url:_,type:"text"},e);if(!o||m)return console.error("error",m),we(404,"Not found");let i=[];const $=Be(o),u=(O=$==null?void 0:$.filter)==null?void 0:O.call($,U=>(U==null?void 0:U.querySlug)===t&&(U==null?void 0:U.cluster)===l),I={label:(y=u[0])==null?void 0:y.clusterLabel,slug:(S=u[0])==null?void 0:S.cluster};if(i=(E=(B=u==null?void 0:u.map(U=>U.ids))==null?void 0:B.join("|"))==null?void 0:E.split("|"),!(i!=null&&i.length))return we(404,"Not found");const T=`${be}/assets/tiktok/videos.csv`,{data:z,error:D}=await Me({key:"tiktok-videos",url:T,type:"text"},e);return!z||D?(console.error("error",D),we(404,"Not found")):{videos:(q=(f=Be(z))==null?void 0:f.filter)==null?void 0:q.call(f,U=>i.includes(U.id)),cluster:I,lang:n,query:t}}const St=Object.freeze(Object.defineProperty({__proto__:null,csr:ft,load:ct,prerender:it,ssr:$t},Symbol.toStringTag,{value:"Module"}));function Qe(r){let e,n;return e=new lt({props:{fn:r[3],$$slots:{default:[ut]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,l){w(e,t,l),n=!0},p(t,l){const s={};l&2&&(s.fn=t[3]),l&17&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}function ut(r){let e,n,t,l,s=r[0].username+"",g,_,o,m,i,$=r[0].video_description+"",u,I,T,z,D,Q="",O;return{c(){e=L("blockquote"),n=L("section"),t=L("a"),l=Te("@"),g=Te(s),m=C(),i=L("p"),u=Te($),z=C(),D=L("script"),D.innerHTML=Q,this.h()},l(y){e=N(y,"BLOCKQUOTE",{class:!0,cite:!0,"data-video-id":!0,"data-embed-from":!0,style:!0});var S=P(e);n=N(S,"SECTION",{});var B=P(n);t=N(B,"A",{target:!0,title:!0,href:!0});var E=P(t);l=Le(E,"@"),g=Le(E,s),E.forEach(v),m=V(B),i=N(B,"P",{});var f=P(i);u=Le(f,$),f.forEach(v),B.forEach(v),S.forEach(v),z=V(y),D=N(y,"SCRIPT",{src:!0,"data-svelte-h":!0}),tt(D)!=="svelte-lbz9tt"&&(D.innerHTML=Q),this.h()},h(){x(t,"target","_blank"),x(t,"title",_="@"+r[0].username),x(t,"href",o="https://www.tiktok.com/@"+r[0].username+"?refer=embed"),x(e,"class","tiktok-embed"),x(e,"cite",I=r[0].link),x(e,"data-video-id",T=r[0].id),x(e,"data-embed-from","embed_page"),ze(e,"max-width","325px"),ze(e,"min-width","325px"),D.async=!0,nt(D.src,O="https://www.tiktok.com/embed.js")||x(D,"src",O)},m(y,S){W(y,e,S),c(e,n),c(n,t),c(t,l),c(t,g),c(n,m),c(n,i),c(i,u),W(y,z,S),W(y,D,S)},p(y,S){S&1&&s!==(s=y[0].username+"")&&Ae(g,s),S&1&&_!==(_="@"+y[0].username)&&x(t,"title",_),S&1&&o!==(o="https://www.tiktok.com/@"+y[0].username+"?refer=embed")&&x(t,"href",o),S&1&&$!==($=y[0].video_description+"")&&Ae(u,$),S&1&&I!==(I=y[0].link)&&x(e,"cite",I),S&1&&T!==(T=y[0].id)&&x(e,"data-video-id",T)},d(y){y&&(v(e),v(z),v(D))}}}function mt(r){let e,n,t,l,s,g,_,o,m,i,$,u,I,T,z,D,Q,O,y,S,B;t=new Ye({props:{src:be+"/assets/tiktok/thumbs/"+r[0].id+".webp",alt:r[0].title}}),s=new M({props:{tag:"p",typo:"p",content:r[0].video_description,class:"max-lines mb-xs"}}),m=new rt({props:{width:"14"}}),$=new M({props:{tag:"p",typo:"p",content:r[0].view_count}}),T=new at({props:{width:"14"}}),D=new M({props:{tag:"p",typo:"p",content:r[0].like_count}});let E=r[1]&&Qe(r);return{c(){e=L("button"),n=L("div"),h(t.$$.fragment),l=C(),h(s.$$.fragment),g=C(),_=L("div"),o=L("div"),h(m.$$.fragment),i=C(),h($.$$.fragment),u=C(),I=L("div"),h(T.$$.fragment),z=C(),h(D.$$.fragment),Q=C(),E&&E.c(),O=Re(),this.h()},l(f){e=N(f,"BUTTON",{class:!0});var q=P(e);n=N(q,"DIV",{class:!0});var U=P(n);k(t.$$.fragment,U),U.forEach(v),l=V(q),k(s.$$.fragment,q),g=V(q),_=N(q,"DIV",{class:!0});var R=P(_);o=N(R,"DIV",{class:!0});var F=P(o);k(m.$$.fragment,F),i=V(F),k($.$$.fragment,F),F.forEach(v),u=V(R),I=N(R,"DIV",{class:!0});var H=P(I);k(T.$$.fragment,H),z=V(H),k(D.$$.fragment,H),H.forEach(v),R.forEach(v),q.forEach(v),Q=V(f),E&&E.l(f),O=Re(),this.h()},h(){x(n,"class","img svelte-11w1air"),x(o,"class","flex gap-xs"),x(I,"class","flex gap-xs"),x(_,"class","grid-3-xs"),x(e,"class","thumb p-s flex-col-start-stretch gap-s text-left svelte-11w1air")},m(f,q){W(f,e,q),c(e,n),w(t,n,null),c(e,l),w(s,e,null),c(e,g),c(e,_),c(_,o),w(m,o,null),c(o,i),w($,o,null),c(_,u),c(_,I),w(T,I,null),c(I,z),w(D,I,null),W(f,Q,q),E&&E.m(f,q),W(f,O,q),y=!0,S||(B=et(e,"click",r[2]),S=!0)},p(f,[q]){const U={};q&1&&(U.src=be+"/assets/tiktok/thumbs/"+f[0].id+".webp"),q&1&&(U.alt=f[0].title),t.$set(U);const R={};q&1&&(R.content=f[0].video_description),s.$set(R);const F={};q&1&&(F.content=f[0].view_count),$.$set(F);const H={};q&1&&(H.content=f[0].like_count),D.$set(H),f[1]?E?(E.p(f,q),q&2&&p(E,1)):(E=Qe(f),E.c(),p(E,1),E.m(O.parentNode,O)):E&&(Je(),d(E,1,1,()=>{E=null}),Xe())},i(f){y||(p(t.$$.fragment,f),p(s.$$.fragment,f),p(m.$$.fragment,f),p($.$$.fragment,f),p(T.$$.fragment,f),p(D.$$.fragment,f),p(E),y=!0)},o(f){d(t.$$.fragment,f),d(s.$$.fragment,f),d(m.$$.fragment,f),d($.$$.fragment,f),d(T.$$.fragment,f),d(D.$$.fragment,f),d(E),y=!1},d(f){f&&(v(e),v(Q),v(O)),b(t),b(s),b(m),b($),b(T),b(D),E&&E.d(f),S=!1,B()}}}function pt(r,e,n){let{video:t={}}=e,l=!1;const s=()=>n(1,l=!0),g=()=>n(1,l=!1);return r.$$set=_=>{"video"in _&&n(0,t=_.video)},[t,l,s,g]}class gt extends Se{constructor(e){super(),Oe(this,e,pt,mt,Pe,{video:0})}}function dt(r){let e,n,t,l;return e=new M({props:{typo:"1",content:"download data"}}),t=new Ge({props:{width:"8"}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},l(s){k(e.$$.fragment,s),n=V(s),k(t.$$.fragment,s)},m(s,g){w(e,s,g),W(s,n,g),w(t,s,g),l=!0},p:xe,i(s){l||(p(e.$$.fragment,s),p(t.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),l=!1},d(s){s&&v(n),b(e,s),b(t,s)}}}function vt(r){let e,n;return e=new ot({props:{width:"26"}}),{c(){h(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,l){w(e,t,l),n=!0},p:xe,i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}function _t(r){let e,n,t,l;return e=new M({props:{typo:"1",content:"download data"}}),t=new Ge({props:{width:"8"}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},l(s){k(e.$$.fragment,s),n=V(s),k(t.$$.fragment,s)},m(s,g){w(e,s,g),W(s,n,g),w(t,s,g),l=!0},p:xe,i(s){l||(p(e.$$.fragment,s),p(t.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),l=!1},d(s){s&&v(n),b(e,s),b(t,s)}}}function ht(r){var Ue,je;let e,n,t,l,s,g,_,o,m,i,$,u,I,T,z,D,Q,O,y,S,B,E,f,q,U,R,F,H,J,he,K,X,le,ye,Y,De,Z,oe,Ee,ee,Ie,te,ie,qe,ne,Ce,se,fe,Ve,re,ke;return l=new M({props:{content:"Topic",typo:"label",class:"case-upper"}}),g=new M({props:{tag:"h3",typo:"h3",content:r[2].label,ellipsis:!0}}),m=new M({props:{content:"Tiktoks",typo:"label",class:"case-upper"}}),$=new M({props:{tag:"h3",typo:"h3",content:(Ue=r[3])==null?void 0:Ue.length}}),T=new M({props:{content:"Total Plays",typo:"label",class:"case-upper"}}),D=new M({props:{tag:"h3",typo:"h3",content:r[0]}}),y=new M({props:{content:"Total Likes",typo:"label",class:"case-upper"}}),B=new M({props:{tag:"h3",typo:"h3",content:r[1]}}),q=new M({props:{content:"Resources",typo:"label",class:"case-upper pb-xxs"}}),R=new Ne({props:{theme:"download",class:"flex gap-xxs items-center",$$slots:{default:[dt]},$$scope:{ctx:r}}}),J=new Ne({props:{url:"/tiktok/?lang="+r[5]+"&query="+r[4],class:"flex-center-center",$$slots:{default:[vt]},$$scope:{ctx:r}}}),le=new M({props:{content:"Tiktoks",typo:"label",class:"case-upper"}}),Y=new M({props:{tag:"h3",typo:"h3",content:(je=r[3])==null?void 0:je.length}}),oe=new M({props:{content:"Total Plays",typo:"label",class:"case-upper"}}),ee=new M({props:{tag:"h3",typo:"h3",content:r[0]}}),ie=new M({props:{content:"Total Likes",typo:"label",class:"case-upper"}}),ne=new M({props:{tag:"h3",typo:"h3",content:r[1]}}),fe=new M({props:{content:"Resources",typo:"label",class:"case-upper pb-xxs"}}),re=new Ne({props:{theme:"download",class:"flex gap-xxs items-center",$$slots:{default:[_t]},$$scope:{ctx:r}}}),{c(){e=L("div"),n=L("div"),t=L("div"),h(l.$$.fragment),s=C(),h(g.$$.fragment),_=C(),o=L("div"),h(m.$$.fragment),i=C(),h($.$$.fragment),u=C(),I=L("div"),h(T.$$.fragment),z=C(),h(D.$$.fragment),Q=C(),O=L("div"),h(y.$$.fragment),S=C(),h(B.$$.fragment),E=C(),f=L("div"),h(q.$$.fragment),U=C(),h(R.$$.fragment),F=C(),H=L("div"),h(J.$$.fragment),he=C(),K=L("div"),X=L("div"),h(le.$$.fragment),ye=C(),h(Y.$$.fragment),De=C(),Z=L("div"),h(oe.$$.fragment),Ee=C(),h(ee.$$.fragment),Ie=C(),te=L("div"),h(ie.$$.fragment),qe=C(),h(ne.$$.fragment),Ce=C(),se=L("div"),h(fe.$$.fragment),Ve=C(),h(re.$$.fragment),this.h()},l(a){e=N(a,"DIV",{class:!0});var j=P(e);n=N(j,"DIV",{class:!0});var A=P(n);t=N(A,"DIV",{class:!0});var $e=P(t);k(l.$$.fragment,$e),s=V($e),k(g.$$.fragment,$e),$e.forEach(v),_=V(A),o=N(A,"DIV",{class:!0});var ce=P(o);k(m.$$.fragment,ce),i=V(ce),k($.$$.fragment,ce),ce.forEach(v),u=V(A),I=N(A,"DIV",{class:!0});var ue=P(I);k(T.$$.fragment,ue),z=V(ue),k(D.$$.fragment,ue),ue.forEach(v),Q=V(A),O=N(A,"DIV",{class:!0});var me=P(O);k(y.$$.fragment,me),S=V(me),k(B.$$.fragment,me),me.forEach(v),E=V(A),f=N(A,"DIV",{class:!0});var ae=P(f);k(q.$$.fragment,ae),U=V(ae),k(R.$$.fragment,ae),ae.forEach(v),F=V(A),H=N(A,"DIV",{class:!0});var _e=P(H);k(J.$$.fragment,_e),_e.forEach(v),A.forEach(v),j.forEach(v),he=V(a),K=N(a,"DIV",{class:!0});var G=P(K);X=N(G,"DIV",{class:!0});var pe=P(X);k(le.$$.fragment,pe),ye=V(pe),k(Y.$$.fragment,pe),pe.forEach(v),De=V(G),Z=N(G,"DIV",{class:!0});var ge=P(Z);k(oe.$$.fragment,ge),Ee=V(ge),k(ee.$$.fragment,ge),ge.forEach(v),Ie=V(G),te=N(G,"DIV",{class:!0});var de=P(te);k(ie.$$.fragment,de),qe=V(de),k(ne.$$.fragment,de),de.forEach(v),Ce=V(G),se=N(G,"DIV",{class:!0});var ve=P(se);k(fe.$$.fragment,ve),Ve=V(ve),k(re.$$.fragment,ve),ve.forEach(v),G.forEach(v),this.h()},h(){x(t,"class","title col-[span-3] py-s px-s svelte-1cq55h0"),x(o,"class","hidden xl:block xl:col-6 py-s px-s xl:px-0"),x(I,"class","hidden xl:block xl:col-[7/span-2] py-s px-s xl:px-0"),x(O,"class","hidden xl:block xl:col-9 py-s px-s xl:px-0"),x(f,"class","hidden xl:block xl:col-[10/span-2] py-s px-s xl:px-0"),x(H,"class","col-4 xl:col-12 self-center justify-self-end px-s"),x(n,"class","content grid-4-0 xl:grid-12-gap svelte-1cq55h0"),x(e,"class","navbar svelte-1cq55h0"),x(X,"class","col-[span-2] xl:col-6 py-s px-s xl:px-0"),x(Z,"class","col-[span-2] xl:col-[7/span-2] py-s px-s xl:px-0"),x(te,"class","col-[span-2] xl:col-9 py-s px-s xl:px-0"),x(se,"class","col-[span-2] xl:col-[10/span-2] py-s px-s xl:px-0"),x(K,"class","mobile-only grid-4-0 xl:hidden bg-white svelte-1cq55h0")},m(a,j){W(a,e,j),c(e,n),c(n,t),w(l,t,null),c(t,s),w(g,t,null),c(n,_),c(n,o),w(m,o,null),c(o,i),w($,o,null),c(n,u),c(n,I),w(T,I,null),c(I,z),w(D,I,null),c(n,Q),c(n,O),w(y,O,null),c(O,S),w(B,O,null),c(n,E),c(n,f),w(q,f,null),c(f,U),w(R,f,null),c(n,F),c(n,H),w(J,H,null),W(a,he,j),W(a,K,j),c(K,X),w(le,X,null),c(X,ye),w(Y,X,null),c(K,De),c(K,Z),w(oe,Z,null),c(Z,Ee),w(ee,Z,null),c(K,Ie),c(K,te),w(ie,te,null),c(te,qe),w(ne,te,null),c(K,Ce),c(K,se),w(fe,se,null),c(se,Ve),w(re,se,null),ke=!0},p(a,[j]){var de,ve;const A={};j&4&&(A.content=a[2].label),g.$set(A);const $e={};j&8&&($e.content=(de=a[3])==null?void 0:de.length),$.$set($e);const ce={};j&1&&(ce.content=a[0]),D.$set(ce);const ue={};j&2&&(ue.content=a[1]),B.$set(ue);const me={};j&64&&(me.$$scope={dirty:j,ctx:a}),R.$set(me);const ae={};j&48&&(ae.url="/tiktok/?lang="+a[5]+"&query="+a[4]),j&64&&(ae.$$scope={dirty:j,ctx:a}),J.$set(ae);const _e={};j&8&&(_e.content=(ve=a[3])==null?void 0:ve.length),Y.$set(_e);const G={};j&1&&(G.content=a[0]),ee.$set(G);const pe={};j&2&&(pe.content=a[1]),ne.$set(pe);const ge={};j&64&&(ge.$$scope={dirty:j,ctx:a}),re.$set(ge)},i(a){ke||(p(l.$$.fragment,a),p(g.$$.fragment,a),p(m.$$.fragment,a),p($.$$.fragment,a),p(T.$$.fragment,a),p(D.$$.fragment,a),p(y.$$.fragment,a),p(B.$$.fragment,a),p(q.$$.fragment,a),p(R.$$.fragment,a),p(J.$$.fragment,a),p(le.$$.fragment,a),p(Y.$$.fragment,a),p(oe.$$.fragment,a),p(ee.$$.fragment,a),p(ie.$$.fragment,a),p(ne.$$.fragment,a),p(fe.$$.fragment,a),p(re.$$.fragment,a),ke=!0)},o(a){d(l.$$.fragment,a),d(g.$$.fragment,a),d(m.$$.fragment,a),d($.$$.fragment,a),d(T.$$.fragment,a),d(D.$$.fragment,a),d(y.$$.fragment,a),d(B.$$.fragment,a),d(q.$$.fragment,a),d(R.$$.fragment,a),d(J.$$.fragment,a),d(le.$$.fragment,a),d(Y.$$.fragment,a),d(oe.$$.fragment,a),d(ee.$$.fragment,a),d(ie.$$.fragment,a),d(ne.$$.fragment,a),d(fe.$$.fragment,a),d(re.$$.fragment,a),ke=!1},d(a){a&&(v(e),v(he),v(K)),b(l),b(g),b(m),b($),b(T),b(D),b(y),b(B),b(q),b(R),b(J),b(le),b(Y),b(oe),b(ee),b(ie),b(ne),b(fe),b(re)}}}function kt(r,e,n){let{viewCount:t,likeCount:l,cluster:s,videos:g,query:_,lang:o}=e;return r.$$set=m=>{"viewCount"in m&&n(0,t=m.viewCount),"likeCount"in m&&n(1,l=m.likeCount),"cluster"in m&&n(2,s=m.cluster),"videos"in m&&n(3,g=m.videos),"query"in m&&n(4,_=m.query),"lang"in m&&n(5,o=m.lang)},[t,l,s,g,_,o]}class wt extends Se{constructor(e){super(),Oe(this,e,kt,ht,Pe,{viewCount:0,likeCount:1,cluster:2,videos:3,query:4,lang:5})}}function We(r,e,n){const t=r.slice();return t[7]=e[n],t}function Fe(r){let e,n;return e=new gt({props:{video:r[7]}}),{c(){h(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,l){w(e,t,l),n=!0},p:xe,i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}function bt(r){let e,n,t,l,s,g;n=new wt({props:{viewCount:r[4],likeCount:r[5],cluster:r[1],videos:r[0],query:r[2],lang:r[3]}});let _=He(r[0]),o=[];for(let i=0;i<_.length;i+=1)o[i]=Fe(We(r,_,i));const m=i=>d(o[i],1,1,()=>{o[i]=null});return{c(){e=L("div"),h(n.$$.fragment),t=C(),l=L("div"),s=L("div");for(let i=0;i<o.length;i+=1)o[i].c();this.h()},l(i){e=N(i,"DIV",{class:!0});var $=P(e);k(n.$$.fragment,$),t=V($),l=N($,"DIV",{class:!0});var u=P(l);s=N(u,"DIV",{class:!0});var I=P(s);for(let T=0;T<o.length;T+=1)o[T].l(I);I.forEach(v),u.forEach(v),$.forEach(v),this.h()},h(){x(s,"class","p-s grid-1-s s:grid-2-s l:grid-3-s xl:grid-4-s xl:grid-5-s xxl:grid-6-s"),x(l,"class","container"),x(e,"class","page")},m(i,$){W(i,e,$),w(n,e,null),c(e,t),c(e,l),c(l,s);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(s,null);g=!0},p(i,[$]){if($&1){_=He(i[0]);let u;for(u=0;u<_.length;u+=1){const I=We(i,_,u);o[u]?(o[u].p(I,$),p(o[u],1)):(o[u]=Fe(I),o[u].c(),p(o[u],1),o[u].m(s,null))}for(Je(),u=_.length;u<o.length;u+=1)m(u);Xe()}},i(i){if(!g){p(n.$$.fragment,i);for(let $=0;$<_.length;$+=1)p(o[$]);g=!0}},o(i){d(n.$$.fragment,i),o=o.filter(Boolean);for(let $=0;$<o.length;$+=1)d(o[$]);g=!1},d(i){i&&v(e),b(n),st(o,i)}}}function xt(r,e,n){let{data:t}=e;const{videos:l,cluster:s,query:g,lang:_}=t,o=Number(Ke(l,i=>i.view_count)).toLocaleString(),m=Number(Ke(l,i=>i.like_count)).toLocaleString();return r.$$set=i=>{"data"in i&&n(6,t=i.data)},[l,s,g,_,o,m,t]}class Ot extends Se{constructor(e){super(),Oe(this,e,xt,bt,Pe,{data:6})}}export{Ot as component,St as universal};
