import{b as be}from"../chunks/paths.DUkr0E2u.js";import{e as we,I as Ye}from"../chunks/image.ouBMPg6R.js";import{g as Me,c as Be,l as Ze,D as Fe}from"../chunks/config.Dx8Fq6i4.js";import{s as Pe,e as L,a as V,J as Re,c as N,b as P,f as v,g as C,p as x,i as Q,h as c,E as et,t as Te,d as Le,X as tt,O as ze,D as nt,j as Ae,n as xe,V as st}from"../chunks/scheduler.WJ93fssR.js";import{S as Se,i as Oe,c as h,b as k,m as w,t as p,g as Ge,a as d,f as We,d as b}from"../chunks/index.6Yt9iutc.js";import{e as He}from"../chunks/each.Bem8oB5j.js";import{P as rt,L as at}from"../chunks/play.DJrI9uVj.js";import{M as lt}from"../chunks/modal.ovdHp3Oa.js";import{T as M}from"../chunks/text.C7VaiaFh.js";import{C as ot}from"../chunks/close.BOYIvaJ8.js";import{L as Ne}from"../chunks/link.BGLxAAP0.js";function Je(r,e){let n=0;if(e===void 0)for(let t of r)(t=+t)&&(n+=t);else{let t=-1;for(let l of r)(l=+e(l,++t,r))&&(n+=l)}return n}const it=!1,ft=!0,$t=!1;async function ct({params:r,fetch:e}){var O,y,S,B,E,f,q;const{lang:n,query:t,slug:l}=r,s=Ze[n];if(!s)return we(404,"Not found");const _=`${`${be}/assets/tiktok/${s.code}`}/clusters_${s.code}.csv`,{data:o,error:m}=await Me({key:`tiktok-${s.code}-data`,url:_,type:"text"},e);if(!o||m)return console.error("error",m),we(404,"Not found");let i=[];const $=Be(o),u=(O=$==null?void 0:$.filter)==null?void 0:O.call($,j=>(j==null?void 0:j.querySlug)===t&&(j==null?void 0:j.cluster)===l),I={label:(y=u[0])==null?void 0:y.clusterLabel,slug:(S=u[0])==null?void 0:S.cluster};if(i=(E=(B=u==null?void 0:u.map(j=>j.ids))==null?void 0:B.join("|"))==null?void 0:E.split("|"),!(i!=null&&i.length))return we(404,"Not found");const T=`${be}/assets/tiktok/videos.csv`,{data:z,error:D}=await Me({key:"tiktok-videos",url:T,type:"text"},e);return!z||D?(console.error("error",D),we(404,"Not found")):{videos:(q=(f=Be(z))==null?void 0:f.filter)==null?void 0:q.call(f,j=>i.includes(j.id)),cluster:I,lang:n,query:t}}const St=Object.freeze(Object.defineProperty({__proto__:null,csr:ft,load:ct,prerender:it,ssr:$t},Symbol.toStringTag,{value:"Module"}));function Ke(r){let e,n;return e=new lt({props:{fn:r[3],$$slots:{default:[ut]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,l){w(e,t,l),n=!0},p(t,l){const s={};l&2&&(s.fn=t[3]),l&17&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}function ut(r){let e,n,t,l,s=r[0].username+"",g,_,o,m,i,$=r[0].video_description+"",u,I,T,z,D,K="",O;return{c(){e=L("blockquote"),n=L("section"),t=L("a"),l=Te("@"),g=Te(s),m=V(),i=L("p"),u=Te($),z=V(),D=L("script"),D.innerHTML=K,this.h()},l(y){e=N(y,"BLOCKQUOTE",{class:!0,cite:!0,"data-video-id":!0,"data-embed-from":!0,style:!0});var S=P(e);n=N(S,"SECTION",{});var B=P(n);t=N(B,"A",{target:!0,title:!0,href:!0});var E=P(t);l=Le(E,"@"),g=Le(E,s),E.forEach(v),m=C(B),i=N(B,"P",{});var f=P(i);u=Le(f,$),f.forEach(v),B.forEach(v),S.forEach(v),z=C(y),D=N(y,"SCRIPT",{src:!0,"data-svelte-h":!0}),tt(D)!=="svelte-lbz9tt"&&(D.innerHTML=K),this.h()},h(){x(t,"target","_blank"),x(t,"title",_="@"+r[0].username),x(t,"href",o="https://www.tiktok.com/@"+r[0].username+"?refer=embed"),x(e,"class","tiktok-embed"),x(e,"cite",I=r[0].link),x(e,"data-video-id",T=r[0].id),x(e,"data-embed-from","embed_page"),ze(e,"max-width","325px"),ze(e,"min-width","325px"),D.async=!0,nt(D.src,O="https://www.tiktok.com/embed.js")||x(D,"src",O)},m(y,S){Q(y,e,S),c(e,n),c(n,t),c(t,l),c(t,g),c(n,m),c(n,i),c(i,u),Q(y,z,S),Q(y,D,S)},p(y,S){S&1&&s!==(s=y[0].username+"")&&Ae(g,s),S&1&&_!==(_="@"+y[0].username)&&x(t,"title",_),S&1&&o!==(o="https://www.tiktok.com/@"+y[0].username+"?refer=embed")&&x(t,"href",o),S&1&&$!==($=y[0].video_description+"")&&Ae(u,$),S&1&&I!==(I=y[0].link)&&x(e,"cite",I),S&1&&T!==(T=y[0].id)&&x(e,"data-video-id",T)},d(y){y&&(v(e),v(z),v(D))}}}function mt(r){let e,n,t,l,s,g,_,o,m,i,$,u,I,T,z,D,K,O,y,S,B;t=new Ye({props:{src:be+"/assets/tiktok/thumbs/"+r[0].id+".webp",alt:r[0].title}}),s=new M({props:{tag:"p",typo:"p",content:r[0].video_description,class:"max-lines mb-xs"}}),m=new rt({props:{width:"14"}}),$=new M({props:{tag:"p",typo:"p",content:r[0].view_count}}),T=new at({props:{width:"14"}}),D=new M({props:{tag:"p",typo:"p",content:r[0].like_count}});let E=r[1]&&Ke(r);return{c(){e=L("button"),n=L("div"),h(t.$$.fragment),l=V(),h(s.$$.fragment),g=V(),_=L("div"),o=L("div"),h(m.$$.fragment),i=V(),h($.$$.fragment),u=V(),I=L("div"),h(T.$$.fragment),z=V(),h(D.$$.fragment),K=V(),E&&E.c(),O=Re(),this.h()},l(f){e=N(f,"BUTTON",{class:!0});var q=P(e);n=N(q,"DIV",{class:!0});var j=P(n);k(t.$$.fragment,j),j.forEach(v),l=C(q),k(s.$$.fragment,q),g=C(q),_=N(q,"DIV",{class:!0});var R=P(_);o=N(R,"DIV",{class:!0});var X=P(o);k(m.$$.fragment,X),i=C(X),k($.$$.fragment,X),X.forEach(v),u=C(R),I=N(R,"DIV",{class:!0});var H=P(I);k(T.$$.fragment,H),z=C(H),k(D.$$.fragment,H),H.forEach(v),R.forEach(v),q.forEach(v),K=C(f),E&&E.l(f),O=Re(),this.h()},h(){x(n,"class","img svelte-11w1air"),x(o,"class","flex gap-xs"),x(I,"class","flex gap-xs"),x(_,"class","grid-3-xs"),x(e,"class","thumb p-s flex-col-start-stretch gap-s text-left svelte-11w1air")},m(f,q){Q(f,e,q),c(e,n),w(t,n,null),c(e,l),w(s,e,null),c(e,g),c(e,_),c(_,o),w(m,o,null),c(o,i),w($,o,null),c(_,u),c(_,I),w(T,I,null),c(I,z),w(D,I,null),Q(f,K,q),E&&E.m(f,q),Q(f,O,q),y=!0,S||(B=et(e,"click",r[2]),S=!0)},p(f,[q]){const j={};q&1&&(j.src=be+"/assets/tiktok/thumbs/"+f[0].id+".webp"),q&1&&(j.alt=f[0].title),t.$set(j);const R={};q&1&&(R.content=f[0].video_description),s.$set(R);const X={};q&1&&(X.content=f[0].view_count),$.$set(X);const H={};q&1&&(H.content=f[0].like_count),D.$set(H),f[1]?E?(E.p(f,q),q&2&&p(E,1)):(E=Ke(f),E.c(),p(E,1),E.m(O.parentNode,O)):E&&(Ge(),d(E,1,1,()=>{E=null}),We())},i(f){y||(p(t.$$.fragment,f),p(s.$$.fragment,f),p(m.$$.fragment,f),p($.$$.fragment,f),p(T.$$.fragment,f),p(D.$$.fragment,f),p(E),y=!0)},o(f){d(t.$$.fragment,f),d(s.$$.fragment,f),d(m.$$.fragment,f),d($.$$.fragment,f),d(T.$$.fragment,f),d(D.$$.fragment,f),d(E),y=!1},d(f){f&&(v(e),v(K),v(O)),b(t),b(s),b(m),b($),b(T),b(D),E&&E.d(f),S=!1,B()}}}function pt(r,e,n){let{video:t={}}=e,l=!1;const s=()=>n(1,l=!0),g=()=>n(1,l=!1);return r.$$set=_=>{"video"in _&&n(0,t=_.video)},[t,l,s,g]}class gt extends Se{constructor(e){super(),Oe(this,e,pt,mt,Pe,{video:0})}}function dt(r){let e,n,t,l;return e=new M({props:{typo:"1",content:"download data"}}),t=new Fe({props:{width:"8"}}),{c(){h(e.$$.fragment),n=V(),h(t.$$.fragment)},l(s){k(e.$$.fragment,s),n=C(s),k(t.$$.fragment,s)},m(s,g){w(e,s,g),Q(s,n,g),w(t,s,g),l=!0},p:xe,i(s){l||(p(e.$$.fragment,s),p(t.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),l=!1},d(s){s&&v(n),b(e,s),b(t,s)}}}function vt(r){let e,n;return e=new ot({props:{width:"26"}}),{c(){h(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,l){w(e,t,l),n=!0},p:xe,i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}function _t(r){let e,n,t,l;return e=new M({props:{typo:"1",content:"download data"}}),t=new Fe({props:{width:"8"}}),{c(){h(e.$$.fragment),n=V(),h(t.$$.fragment)},l(s){k(e.$$.fragment,s),n=C(s),k(t.$$.fragment,s)},m(s,g){w(e,s,g),Q(s,n,g),w(t,s,g),l=!0},p:xe,i(s){l||(p(e.$$.fragment,s),p(t.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),l=!1},d(s){s&&v(n),b(e,s),b(t,s)}}}function ht(r){var je,Ue;let e,n,t,l,s,g,_,o,m,i,$,u,I,T,z,D,K,O,y,S,B,E,f,q,j,R,X,H,G,he,J,W,le,ye,Y,De,Z,oe,Ee,ee,Ie,te,ie,qe,ne,Ve,se,fe,Ce,re,ke;return l=new M({props:{content:"Topic",typo:"label",class:"case-upper"}}),g=new M({props:{tag:"h3",typo:"h3",content:r[2].label,ellipsis:!0}}),m=new M({props:{content:"Tiktoks",typo:"label",class:"case-upper"}}),$=new M({props:{tag:"h3",typo:"h3",content:(je=r[3])==null?void 0:je.length}}),T=new M({props:{content:"Total Plays",typo:"label",class:"case-upper"}}),D=new M({props:{tag:"h3",typo:"h3",content:r[0]}}),y=new M({props:{content:"Total Likes",typo:"label",class:"case-upper"}}),B=new M({props:{tag:"h3",typo:"h3",content:r[1]}}),q=new M({props:{content:"Resources",typo:"label",class:"case-upper pb-xxs"}}),R=new Ne({props:{theme:"download",class:"flex gap-xxs items-center",$$slots:{default:[dt]},$$scope:{ctx:r}}}),G=new Ne({props:{url:"/tiktok/?lang="+r[5]+"&query="+r[4],class:"flex-center-center",$$slots:{default:[vt]},$$scope:{ctx:r}}}),le=new M({props:{content:"Tiktoks",typo:"label",class:"case-upper"}}),Y=new M({props:{tag:"h3",typo:"h3",content:(Ue=r[3])==null?void 0:Ue.length}}),oe=new M({props:{content:"Total Plays",typo:"label",class:"case-upper"}}),ee=new M({props:{tag:"h3",typo:"h3",content:r[0]}}),ie=new M({props:{content:"Total Likes",typo:"label",class:"case-upper"}}),ne=new M({props:{tag:"h3",typo:"h3",content:r[1]}}),fe=new M({props:{content:"Resources",typo:"label",class:"case-upper pb-xxs"}}),re=new Ne({props:{theme:"download",class:"flex gap-xxs items-center",$$slots:{default:[_t]},$$scope:{ctx:r}}}),{c(){e=L("div"),n=L("div"),t=L("div"),h(l.$$.fragment),s=V(),h(g.$$.fragment),_=V(),o=L("div"),h(m.$$.fragment),i=V(),h($.$$.fragment),u=V(),I=L("div"),h(T.$$.fragment),z=V(),h(D.$$.fragment),K=V(),O=L("div"),h(y.$$.fragment),S=V(),h(B.$$.fragment),E=V(),f=L("div"),h(q.$$.fragment),j=V(),h(R.$$.fragment),X=V(),H=L("div"),h(G.$$.fragment),he=V(),J=L("div"),W=L("div"),h(le.$$.fragment),ye=V(),h(Y.$$.fragment),De=V(),Z=L("div"),h(oe.$$.fragment),Ee=V(),h(ee.$$.fragment),Ie=V(),te=L("div"),h(ie.$$.fragment),qe=V(),h(ne.$$.fragment),Ve=V(),se=L("div"),h(fe.$$.fragment),Ce=V(),h(re.$$.fragment),this.h()},l(a){e=N(a,"DIV",{class:!0});var U=P(e);n=N(U,"DIV",{class:!0});var A=P(n);t=N(A,"DIV",{class:!0});var $e=P(t);k(l.$$.fragment,$e),s=C($e),k(g.$$.fragment,$e),$e.forEach(v),_=C(A),o=N(A,"DIV",{class:!0});var ce=P(o);k(m.$$.fragment,ce),i=C(ce),k($.$$.fragment,ce),ce.forEach(v),u=C(A),I=N(A,"DIV",{class:!0});var ue=P(I);k(T.$$.fragment,ue),z=C(ue),k(D.$$.fragment,ue),ue.forEach(v),K=C(A),O=N(A,"DIV",{class:!0});var me=P(O);k(y.$$.fragment,me),S=C(me),k(B.$$.fragment,me),me.forEach(v),E=C(A),f=N(A,"DIV",{class:!0});var ae=P(f);k(q.$$.fragment,ae),j=C(ae),k(R.$$.fragment,ae),ae.forEach(v),X=C(A),H=N(A,"DIV",{class:!0});var _e=P(H);k(G.$$.fragment,_e),_e.forEach(v),A.forEach(v),U.forEach(v),he=C(a),J=N(a,"DIV",{class:!0});var F=P(J);W=N(F,"DIV",{class:!0});var pe=P(W);k(le.$$.fragment,pe),ye=C(pe),k(Y.$$.fragment,pe),pe.forEach(v),De=C(F),Z=N(F,"DIV",{class:!0});var ge=P(Z);k(oe.$$.fragment,ge),Ee=C(ge),k(ee.$$.fragment,ge),ge.forEach(v),Ie=C(F),te=N(F,"DIV",{class:!0});var de=P(te);k(ie.$$.fragment,de),qe=C(de),k(ne.$$.fragment,de),de.forEach(v),Ve=C(F),se=N(F,"DIV",{class:!0});var ve=P(se);k(fe.$$.fragment,ve),Ce=C(ve),k(re.$$.fragment,ve),ve.forEach(v),F.forEach(v),this.h()},h(){x(t,"class","title col-[span-3] py-s px-s svelte-1cq55h0"),x(o,"class","hidden xl:block xl:col-6 py-s px-s xl:px-0"),x(I,"class","hidden xl:block xl:col-[7/span-2] py-s px-s xl:px-0"),x(O,"class","hidden xl:block xl:col-9 py-s px-s xl:px-0"),x(f,"class","hidden xl:block xl:col-[10/span-2] py-s px-s xl:px-0"),x(H,"class","col-4 xl:col-12 self-center justify-self-end px-s"),x(n,"class","content grid-4-0 xl:grid-12-gap svelte-1cq55h0"),x(e,"class","navbar svelte-1cq55h0"),x(W,"class","col-[span-2] xl:col-6 py-s px-s xl:px-0"),x(Z,"class","col-[span-2] xl:col-[7/span-2] py-s px-s xl:px-0"),x(te,"class","col-[span-2] xl:col-9 py-s px-s xl:px-0"),x(se,"class","col-[span-2] xl:col-[10/span-2] py-s px-s xl:px-0"),x(J,"class","mobile-only grid-4-0 xl:hidden bg-white svelte-1cq55h0")},m(a,U){Q(a,e,U),c(e,n),c(n,t),w(l,t,null),c(t,s),w(g,t,null),c(n,_),c(n,o),w(m,o,null),c(o,i),w($,o,null),c(n,u),c(n,I),w(T,I,null),c(I,z),w(D,I,null),c(n,K),c(n,O),w(y,O,null),c(O,S),w(B,O,null),c(n,E),c(n,f),w(q,f,null),c(f,j),w(R,f,null),c(n,X),c(n,H),w(G,H,null),Q(a,he,U),Q(a,J,U),c(J,W),w(le,W,null),c(W,ye),w(Y,W,null),c(J,De),c(J,Z),w(oe,Z,null),c(Z,Ee),w(ee,Z,null),c(J,Ie),c(J,te),w(ie,te,null),c(te,qe),w(ne,te,null),c(J,Ve),c(J,se),w(fe,se,null),c(se,Ce),w(re,se,null),ke=!0},p(a,[U]){var de,ve;const A={};U&4&&(A.content=a[2].label),g.$set(A);const $e={};U&8&&($e.content=(de=a[3])==null?void 0:de.length),$.$set($e);const ce={};U&1&&(ce.content=a[0]),D.$set(ce);const ue={};U&2&&(ue.content=a[1]),B.$set(ue);const me={};U&64&&(me.$$scope={dirty:U,ctx:a}),R.$set(me);const ae={};U&48&&(ae.url="/tiktok/?lang="+a[5]+"&query="+a[4]),U&64&&(ae.$$scope={dirty:U,ctx:a}),G.$set(ae);const _e={};U&8&&(_e.content=(ve=a[3])==null?void 0:ve.length),Y.$set(_e);const F={};U&1&&(F.content=a[0]),ee.$set(F);const pe={};U&2&&(pe.content=a[1]),ne.$set(pe);const ge={};U&64&&(ge.$$scope={dirty:U,ctx:a}),re.$set(ge)},i(a){ke||(p(l.$$.fragment,a),p(g.$$.fragment,a),p(m.$$.fragment,a),p($.$$.fragment,a),p(T.$$.fragment,a),p(D.$$.fragment,a),p(y.$$.fragment,a),p(B.$$.fragment,a),p(q.$$.fragment,a),p(R.$$.fragment,a),p(G.$$.fragment,a),p(le.$$.fragment,a),p(Y.$$.fragment,a),p(oe.$$.fragment,a),p(ee.$$.fragment,a),p(ie.$$.fragment,a),p(ne.$$.fragment,a),p(fe.$$.fragment,a),p(re.$$.fragment,a),ke=!0)},o(a){d(l.$$.fragment,a),d(g.$$.fragment,a),d(m.$$.fragment,a),d($.$$.fragment,a),d(T.$$.fragment,a),d(D.$$.fragment,a),d(y.$$.fragment,a),d(B.$$.fragment,a),d(q.$$.fragment,a),d(R.$$.fragment,a),d(G.$$.fragment,a),d(le.$$.fragment,a),d(Y.$$.fragment,a),d(oe.$$.fragment,a),d(ee.$$.fragment,a),d(ie.$$.fragment,a),d(ne.$$.fragment,a),d(fe.$$.fragment,a),d(re.$$.fragment,a),ke=!1},d(a){a&&(v(e),v(he),v(J)),b(l),b(g),b(m),b($),b(T),b(D),b(y),b(B),b(q),b(R),b(G),b(le),b(Y),b(oe),b(ee),b(ie),b(ne),b(fe),b(re)}}}function kt(r,e,n){let{viewCount:t,likeCount:l,cluster:s,videos:g,query:_,lang:o}=e;return r.$$set=m=>{"viewCount"in m&&n(0,t=m.viewCount),"likeCount"in m&&n(1,l=m.likeCount),"cluster"in m&&n(2,s=m.cluster),"videos"in m&&n(3,g=m.videos),"query"in m&&n(4,_=m.query),"lang"in m&&n(5,o=m.lang)},[t,l,s,g,_,o]}class wt extends Se{constructor(e){super(),Oe(this,e,kt,ht,Pe,{viewCount:0,likeCount:1,cluster:2,videos:3,query:4,lang:5})}}function Qe(r,e,n){const t=r.slice();return t[7]=e[n],t}function Xe(r){let e,n;return e=new gt({props:{video:r[7]}}),{c(){h(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,l){w(e,t,l),n=!0},p:xe,i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}function bt(r){let e,n,t,l,s,g;n=new wt({props:{viewCount:r[4],likeCount:r[5],cluster:r[1],videos:r[0],query:r[2],lang:r[3]}});let _=He(r[0]),o=[];for(let i=0;i<_.length;i+=1)o[i]=Xe(Qe(r,_,i));const m=i=>d(o[i],1,1,()=>{o[i]=null});return{c(){e=L("div"),h(n.$$.fragment),t=V(),l=L("div"),s=L("div");for(let i=0;i<o.length;i+=1)o[i].c();this.h()},l(i){e=N(i,"DIV",{class:!0});var $=P(e);k(n.$$.fragment,$),t=C($),l=N($,"DIV",{class:!0});var u=P(l);s=N(u,"DIV",{class:!0});var I=P(s);for(let T=0;T<o.length;T+=1)o[T].l(I);I.forEach(v),u.forEach(v),$.forEach(v),this.h()},h(){x(s,"class","p-s grid-1-s s:grid-2-s l:grid-3-s xl:grid-4-s xl:grid-5-s xxl:grid-6-s"),x(l,"class","container"),x(e,"class","page")},m(i,$){Q(i,e,$),w(n,e,null),c(e,t),c(e,l),c(l,s);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(s,null);g=!0},p(i,[$]){if($&1){_=He(i[0]);let u;for(u=0;u<_.length;u+=1){const I=Qe(i,_,u);o[u]?(o[u].p(I,$),p(o[u],1)):(o[u]=Xe(I),o[u].c(),p(o[u],1),o[u].m(s,null))}for(Ge(),u=_.length;u<o.length;u+=1)m(u);We()}},i(i){if(!g){p(n.$$.fragment,i);for(let $=0;$<_.length;$+=1)p(o[$]);g=!0}},o(i){d(n.$$.fragment,i),o=o.filter(Boolean);for(let $=0;$<o.length;$+=1)d(o[$]);g=!1},d(i){i&&v(e),b(n),st(o,i)}}}function xt(r,e,n){let{data:t}=e;const{videos:l,cluster:s,query:g,lang:_}=t,o=Number(Je(l,i=>i.view_count)).toLocaleString(),m=Number(Je(l,i=>i.like_count)).toLocaleString();return r.$$set=i=>{"data"in i&&n(6,t=i.data)},[l,s,g,_,o,m,t]}class Ot extends Se{constructor(e){super(),Oe(this,e,xt,bt,Pe,{data:6})}}export{Ot as component,St as universal};
