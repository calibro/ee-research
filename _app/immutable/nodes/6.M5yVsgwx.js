import{s as B,m as at,n as H,r as ut,d as J,e as ae,o as ct,l as xe,E as qe,c as ue,F as Ee}from"../chunks/scheduler.DhL_NTdI.js";import{S as W,i as Y,e as V,s as N,r as Q,x as R,m as C,c as z,a as j,f as L,u as X,d as y,n as S,o as v,g as M,h as T,p as A,B as F,k as x,y as Z,l as q,z as ee,G as ce,q as D,C as re,I as Ie,t as et,b as tt,H as nt,v as rt,w as fe,E as he,K as ft,L as Te,j as ht,M as Ce}from"../chunks/index.BoqPf9FP.js";import{e as G,u as dt,o as gt}from"../chunks/each.DcgF7d6a.js";import{d as pt,w as mt,g as _t}from"../chunks/entry.z3sIkcEm.js";import{p as $t}from"../chunks/stores.BTKW7LPi.js";import{f as Se,l as ie,D as vt,g as yt,c as wt}from"../chunks/download.DT210bqd.js";import{T as U}from"../chunks/text.D9PalPgM.js";import{L as K,e as kt}from"../chunks/link.CgHPpc7t.js";import{g as st}from"../chunks/spread.CN4WR7uZ.js";import{b as bt}from"../chunks/tokens.DVXvbK2-.js";import{b as xt}from"../chunks/paths.BvXziqEt.js";const qt=!0,Et=qt;let lt;lt=$t;const It={keepFocus:!0,noScroll:!0,replaceState:!0},Tt={keepFocus:!0,noScroll:!0,replaceState:!1};function _e(t,e,n=(r,s)=>JSON.stringify(r)===JSON.stringify(s)){return typeof t=="object"&&typeof e=="object"&&n(t,e)}const $e=new Set;let Ae;const De=new Map,ve={encode:t=>t.toString(),decode:t=>t?t.toString():null};function de(t,{encode:e=ve.encode,decode:n=ve.decode,defaultValue:r}=ve,{debounceHistory:s=0,pushHistory:o=!0,sort:l=!0,showDefaults:i=!0,equalityFn:a}={}){const u=mt(null);let d=!0,_;function g(b,c){d=!1;const w=window.location.hash,E=k=>{if(b==null)k.delete(t);else{const m=e(b);m==null?k.delete(t):k.set(t,m)}};$e.add(E),clearTimeout(Ae);const h=new URLSearchParams(window.location.search);Ae=setTimeout(async()=>{$e.forEach(k=>{k(h)}),clearTimeout(De.get(t));{u.set(b);async function k(){l&&h.sort(),await _t(`?${h}${w}`,o?Tt:It),u.set(null)}c||s===0?k():De.set(t,setTimeout(k,s))}$e.clear()})}const{subscribe:$}=pt([lt,u],([b,c],w)=>{var k,m,f;if(c!=null)return _e(_,c,a)?void 0:(_=structuredClone(c),w(c));const E=(f=(m=(k=b==null?void 0:b.url)==null?void 0:k.searchParams)==null?void 0:m.get)==null?void 0:f.call(m,t);if(E==null&&r!=null)return i&&g(r,d),_e(_,r,a)?void 0:(_=structuredClone(r),w(r));const h=n(E);if(!_e(_,h,a))return _=structuredClone(h),w(h)});return{set(b){g(b)},subscribe:$,update:b=>{const c=b(_);g(c)}}}function Ct(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}class St extends Map{constructor(e,n=Mt){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,s]of e)this.set(r,s)}get(e){return super.get(Me(this,e))}has(e){return super.has(Me(this,e))}set(e,n){return super.set(At(this,e),n)}delete(e){return super.delete(Dt(this,e))}}function Me({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function At({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Dt({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(n),t.delete(r)),n}function Mt(t){return t!==null&&typeof t=="object"?t.valueOf():t}function jt(t){return t}function Ot(t,...e){return Nt(t,Array.from,jt,e)}function Nt(t,e,n,r){return function s(o,l){if(l>=r.length)return n(o);const i=new St,a=r[l++];let u=-1;for(const d of o){const _=a(d,++u,o),g=i.get(_);g?g.push(d):i.set(_,[d])}for(const[d,_]of i)i.set(d,s(_,l));return e(i)}(t,0)}function Lt(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function Vt(){return this.eachAfter(Lt)}function zt(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function Pt(t,e){for(var n=this,r=[n],s,o,l=-1;n=r.pop();)if(t.call(e,n,++l,this),s=n.children)for(o=s.length-1;o>=0;--o)r.push(s[o]);return this}function Ut(t,e){for(var n=this,r=[n],s=[],o,l,i,a=-1;n=r.pop();)if(s.push(n),o=n.children)for(l=0,i=o.length;l<i;++l)r.push(o[l]);for(;n=s.pop();)t.call(e,n,++a,this);return this}function Rt(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function Gt(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,s=r&&r.length;--s>=0;)n+=r[s].value;e.value=n})}function Ht(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function Bt(t){for(var e=this,n=Wt(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var s=r.length;t!==n;)r.splice(s,0,t),t=t.parent;return r}function Wt(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),s=null;for(t=n.pop(),e=r.pop();t===e;)s=t,t=n.pop(),e=r.pop();return s}function Yt(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function Ft(){return Array.from(this)}function Jt(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function Kt(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*Qt(){var t=this,e,n=[t],r,s,o;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(s=0,o=r.length;s<o;++s)n.push(r[s]);while(n.length)}function ke(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=en)):e===void 0&&(e=Zt);for(var n=new ge(t),r,s=[n],o,l,i,a;r=s.pop();)if((l=e(r.data))&&(a=(l=Array.from(l)).length))for(r.children=l,i=a-1;i>=0;--i)s.push(o=l[i]=new ge(l[i])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(nn)}function Xt(){return ke(this).eachBefore(tn)}function Zt(t){return t.children}function en(t){return Array.isArray(t)?t[1]:null}function tn(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function nn(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function ge(t){this.data=t,this.depth=this.height=0,this.parent=null}ge.prototype=ke.prototype={constructor:ge,count:Vt,each:zt,eachAfter:Ut,eachBefore:Pt,find:Rt,sum:Gt,sort:Ht,path:Bt,ancestors:Yt,descendants:Ft,leaves:Jt,links:Kt,copy:Xt,[Symbol.iterator]:Qt};function rn(t){return t==null?null:sn(t)}function sn(t){if(typeof t!="function")throw new Error;return t}function je(){return 0}function ln(t){return function(){return t}}const on=1664525,an=1013904223,Oe=4294967296;function un(){let t=1;return()=>(t=(on*t+an)%Oe)/Oe}function cn(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function fn(t,e){let n=t.length,r,s;for(;n;)s=e()*n--|0,r=t[n],t[n]=t[s],t[s]=r;return t}function hn(t,e){for(var n=0,r=(t=fn(Array.from(t),e)).length,s=[],o,l;n<r;)o=t[n],l&&ot(l,o)?++n:(l=gn(s=dn(s,o)),n=0);return l}function dn(t,e){var n,r;if(ye(e,t))return[e];for(n=0;n<t.length;++n)if(se(e,t[n])&&ye(te(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(se(te(t[n],t[r]),e)&&se(te(t[n],e),t[r])&&se(te(t[r],e),t[n])&&ye(it(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function se(t,e){var n=t.r-e.r,r=e.x-t.x,s=e.y-t.y;return n<0||n*n<r*r+s*s}function ot(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,r=e.x-t.x,s=e.y-t.y;return n>0&&n*n>r*r+s*s}function ye(t,e){for(var n=0;n<e.length;++n)if(!ot(t,e[n]))return!1;return!0}function gn(t){switch(t.length){case 1:return pn(t[0]);case 2:return te(t[0],t[1]);case 3:return it(t[0],t[1],t[2])}}function pn(t){return{x:t.x,y:t.y,r:t.r}}function te(t,e){var n=t.x,r=t.y,s=t.r,o=e.x,l=e.y,i=e.r,a=o-n,u=l-r,d=i-s,_=Math.sqrt(a*a+u*u);return{x:(n+o+a/_*d)/2,y:(r+l+u/_*d)/2,r:(_+s+i)/2}}function it(t,e,n){var r=t.x,s=t.y,o=t.r,l=e.x,i=e.y,a=e.r,u=n.x,d=n.y,_=n.r,g=r-l,$=r-u,b=s-i,c=s-d,w=a-o,E=_-o,h=r*r+s*s-o*o,k=h-l*l-i*i+a*a,m=h-u*u-d*d+_*_,f=$*b-g*c,p=(b*m-c*k)/(f*2)-r,I=(c*w-b*E)/f,O=($*k-g*m)/(f*2)-s,P=(g*E-$*w)/f,pe=I*I+P*P-1,ne=2*(o+p*I+O*P),be=p*p+O*O-o*o,me=-(Math.abs(pe)>1e-6?(ne+Math.sqrt(ne*ne-4*pe*be))/(2*pe):be/ne);return{x:r+p+I*me,y:s+O+P*me,r:me}}function Ne(t,e,n){var r=t.x-e.x,s,o,l=t.y-e.y,i,a,u=r*r+l*l;u?(o=e.r+n.r,o*=o,a=t.r+n.r,a*=a,o>a?(s=(u+a-o)/(2*u),i=Math.sqrt(Math.max(0,a/u-s*s)),n.x=t.x-s*r-i*l,n.y=t.y-s*l+i*r):(s=(u+o-a)/(2*u),i=Math.sqrt(Math.max(0,o/u-s*s)),n.x=e.x+s*r-i*l,n.y=e.y+s*l+i*r)):(n.x=e.x+n.r,n.y=e.y)}function Le(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,s=e.y-t.y;return n>0&&n*n>r*r+s*s}function Ve(t){var e=t._,n=t.next._,r=e.r+n.r,s=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return s*s+o*o}function le(t){this._=t,this.next=null,this.previous=null}function mn(t,e){if(!(o=(t=cn(t)).length))return 0;var n,r,s,o,l,i,a,u,d,_,g;if(n=t[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;Ne(r,n,s=t[2]),n=new le(n),r=new le(r),s=new le(s),n.next=s.previous=r,r.next=n.previous=s,s.next=r.previous=n;e:for(a=3;a<o;++a){Ne(n._,r._,s=t[a]),s=new le(s),u=r.next,d=n.previous,_=r._.r,g=n._.r;do if(_<=g){if(Le(u._,s._)){r=u,n.next=r,r.previous=n,--a;continue e}_+=u._.r,u=u.next}else{if(Le(d._,s._)){n=d,n.next=r,r.previous=n,--a;continue e}g+=d._.r,d=d.previous}while(u!==d.next);for(s.previous=n,s.next=r,n.next=r.previous=r=s,l=Ve(n);(s=s.next)!==r;)(i=Ve(s))<l&&(n=s,l=i);r=n.next}for(n=[r._],s=r;(s=s.next)!==r;)n.push(s._);for(s=hn(n,e),a=0;a<o;++a)n=t[a],n.x-=s.x,n.y-=s.y;return s.r}function _n(t){return Math.sqrt(t.value)}function $n(){var t=null,e=1,n=1,r=je;function s(o){const l=un();return o.x=e/2,o.y=n/2,t?o.eachBefore(ze(t)).eachAfter(we(r,.5,l)).eachBefore(Pe(1)):o.eachBefore(ze(_n)).eachAfter(we(je,1,l)).eachAfter(we(r,o.r/Math.min(e,n),l)).eachBefore(Pe(Math.min(e,n)/(2*o.r))),o}return s.radius=function(o){return arguments.length?(t=rn(o),s):t},s.size=function(o){return arguments.length?(e=+o[0],n=+o[1],s):[e,n]},s.padding=function(o){return arguments.length?(r=typeof o=="function"?o:ln(+o),s):r},s}function ze(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function we(t,e,n){return function(r){if(s=r.children){var s,o,l=s.length,i=t(r)*e||0,a;if(i)for(o=0;o<l;++o)s[o].r+=i;if(a=mn(s,n),i)for(o=0;o<l;++o)s[o].r-=i;r.r=a+i}}}function Pe(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function Ue(t,e,n){const r=t.slice();return r[12]=e[n],r}function Re(t,e,n){const r=t.slice();return r[12]=e[n],r}function Ge(t){var o;let e,n,r,s;return n=new U({props:{typo:"small",content:(o=t[2].data)==null?void 0:o.text,class:"px-xs py-xxs",ellipsis:!0}}),{c(){e=V("div"),C(n.$$.fragment),this.h()},l(l){e=z(l,"DIV",{class:!0,style:!0});var i=j(e);S(n.$$.fragment,i),i.forEach(y),this.h()},h(){v(e,"class","tooltip svelte-ijmvzk"),re(e,"--top",t[1].y+"px"),re(e,"--left",t[1].x+"px")},m(l,i){M(l,e,i),A(n,e,null),s=!0},p(l,i){var u;const a={};i&4&&(a.content=(u=l[2].data)==null?void 0:u.text),n.$set(a),(!s||i&2)&&re(e,"--top",l[1].y+"px"),(!s||i&2)&&re(e,"--left",l[1].x+"px")},i(l){s||(x(n.$$.fragment,l),l&&at(()=>{s&&(r||(r=Ie(e,Se,{duration:150},!0)),r.run(1))}),s=!0)},o(l){q(n.$$.fragment,l),l&&(r||(r=Ie(e,Se,{duration:150},!1)),r.run(0)),s=!1},d(l){l&&y(e),D(n),l&&r&&r.end()}}}function vn(t){let e,n,r;function s(){return t[7](t[12])}function o(){return t[8](t[12])}return{c(){e=Q("circle"),this.h()},l(l){e=X(l,"circle",{class:!0,cx:!0,cy:!0,r:!0,role:!0,fill:!0,tabindex:!0}),j(e).forEach(y),this.h()},h(){var l;v(e,"class","tooltip-actor svelte-ijmvzk"),v(e,"cx",t[12].x),v(e,"cy",t[12].y),v(e,"r",t[12].r),v(e,"role","tooltip"),v(e,"fill",(l=t[12].data)==null?void 0:l.color),v(e,"tabindex","-1")},m(l,i){M(l,e,i),n||(r=[F(e,"mouseover",s),F(e,"focus",o),F(e,"mouseout",t[9]),F(e,"blur",t[10])],n=!0)},p(l,i){t=l},d(l){l&&y(e),n=!1,ut(r)}}}function yn(t){let e;return{c(){e=Q("circle"),this.h()},l(n){e=X(n,"circle",{cx:!0,cy:!0,r:!0,fill:!0,class:!0}),j(e).forEach(y),this.h()},h(){var n;v(e,"cx",t[12].x),v(e,"cy",t[12].y),v(e,"r",t[12].r),v(e,"fill",(n=t[12].data)==null?void 0:n.color),v(e,"class","svelte-ijmvzk")},m(n,r){M(n,e,r)},p:H,d(n){n&&y(e)}}}function He(t){let e;function n(o,l){return o[4](o[12].r)>6?yn:vn}let s=n(t)(t);return{c(){s.c(),e=R()},l(o){s.l(o),e=R()},m(o,l){s.m(o,l),M(o,e,l)},p(o,l){s.p(o,l)},d(o){o&&y(e),s.d(o)}}}function wn(t){var s;let e,n=((s=t[12].data)==null?void 0:s.text)+"",r;return{c(){e=Q("text"),r=et(n),this.h()},l(o){e=X(o,"text",{x:!0,y:!0,"text-anchor":!0,"dominant-baseline":!0,"font-size":!0,class:!0});var l=j(e);r=tt(l,n),l.forEach(y),this.h()},h(){v(e,"x",t[12].x),v(e,"y",t[12].y),v(e,"text-anchor","middle"),v(e,"dominant-baseline","middle"),v(e,"font-size",t[4](t[12].r)),v(e,"class","svelte-ijmvzk")},m(o,l){M(o,e,l),T(e,r)},p:H,d(o){o&&y(e)}}}function Be(t){let e=t[4](t[12].r)>6,n,r=e&&wn(t);return{c(){r&&r.c(),n=R()},l(s){r&&r.l(s),n=R()},m(s,o){r&&r.m(s,o),M(s,n,o)},p(s,o){e&&r.p(s,o)},d(s){s&&y(n),r&&r.d(s)}}}function kn(t){let e,n,r,s,o,l,i,a,u,d,_,g,$=t[2]&&Ge(t),b=G(t[3]),c=[];for(let h=0;h<b.length;h+=1)c[h]=He(Re(t,b,h));let w=G(t[3]),E=[];for(let h=0;h<w.length;h+=1)E[h]=Be(Ue(t,w,h));return i=new U({props:{typo:"p",content:`${t[0][1][0].clusterLabel}`,class:"px-s py-xs",ellipsis:!0}}),u=new U({props:{typo:"p",content:`tiktoks: ${t[0][2]}`,class:"px-s py-xs",ellipsis:!1}}),{c(){e=V("div"),$&&$.c(),n=N(),r=Q("svg");for(let h=0;h<c.length;h+=1)c[h].c();s=R();for(let h=0;h<E.length;h+=1)E[h].c();o=N(),l=V("div"),C(i.$$.fragment),a=N(),C(u.$$.fragment),this.h()},l(h){e=z(h,"DIV",{class:!0,role:!0,tabindex:!0});var k=j(e);$&&$.l(k),n=L(k),r=X(k,"svg",{width:!0,viewBox:!0,class:!0});var m=j(r);for(let p=0;p<c.length;p+=1)c[p].l(m);s=R();for(let p=0;p<E.length;p+=1)E[p].l(m);m.forEach(y),o=L(k),l=z(k,"DIV",{class:!0});var f=j(l);S(i.$$.fragment,f),a=L(f),S(u.$$.fragment,f),f.forEach(y),k.forEach(y),this.h()},h(){v(r,"width","100%"),v(r,"viewBox","0 0 200 200"),v(r,"class","ratio-square svelte-ijmvzk"),v(l,"class","title svelte-ijmvzk"),v(e,"class","circle-packing flex-col-center-start svelte-ijmvzk"),v(e,"role","button"),v(e,"tabindex","0")},m(h,k){M(h,e,k),$&&$.m(e,null),T(e,n),T(e,r);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(r,null);T(r,s);for(let m=0;m<E.length;m+=1)E[m]&&E[m].m(r,null);T(e,o),T(e,l),A(i,l,null),T(l,a),A(u,l,null),d=!0,_||(g=F(e,"mousemove",t[5]),_=!0)},p(h,[k]){if(h[2]?$?($.p(h,k),k&4&&x($,1)):($=Ge(h),$.c(),x($,1),$.m(e,n)):$&&(Z(),q($,1,1,()=>{$=null}),ee()),k&88){b=G(h[3]);let p;for(p=0;p<b.length;p+=1){const I=Re(h,b,p);c[p]?c[p].p(I,k):(c[p]=He(I),c[p].c(),c[p].m(r,s))}for(;p<c.length;p+=1)c[p].d(1);c.length=b.length}if(k&24){w=G(h[3]);let p;for(p=0;p<w.length;p+=1){const I=Ue(h,w,p);E[p]?E[p].p(I,k):(E[p]=Be(I),E[p].c(),E[p].m(r,null))}for(;p<E.length;p+=1)E[p].d(1);E.length=w.length}const m={};k&1&&(m.content=`${h[0][1][0].clusterLabel}`),i.$set(m);const f={};k&1&&(f.content=`tiktoks: ${h[0][2]}`),u.$set(f)},i(h){d||(x($),x(i.$$.fragment,h),x(u.$$.fragment,h),d=!0)},o(h){q($),q(i.$$.fragment,h),q(u.$$.fragment,h),d=!1},d(h){h&&y(e),$&&$.d(),ce(c,h),ce(E,h),D(i),D(u),_=!1,g()}}}function bn(t,e,n){let{cluster:r}=e;const o=((c,w,E)=>{const h=$n().size([w,E]).padding(5),k=ke(c,f=>Array.isArray(f)?f[1]:null).sum(f=>f.videosNumber),m=h(k).descendants();return m.shift(),m})(r,200,200),l=c=>Math.min(c/3,13);let i={x:0,y:0};const a=c=>{n(1,i.x=c.clientX,i),n(1,i.y=c.clientY,i)};let u;const d=c=>{n(2,u=c)},_=c=>d(c),g=c=>d(c),$=()=>d(null),b=()=>d(null);return t.$$set=c=>{"cluster"in c&&n(0,r=c.cluster)},[r,i,u,o,l,a,d,_,g,$,b]}class xn extends W{constructor(e){super(),Y(this,e,bn,kn,B,{cluster:0})}}function qn(t){let e,n,r='<path d="M13 1L7 7L1 0.999999" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>',s=[{viewBox:"0 0 14 8"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},t[0]],o={};for(let l=0;l<s.length;l+=1)o=J(o,s[l]);return{c(){e=Q("svg"),n=new nt(!0),this.h()},l(l){e=X(l,"svg",{viewBox:!0,fill:!0,xmlns:!0});var i=j(e);n=rt(i,!0),i.forEach(y),this.h()},h(){n.a=null,fe(e,o)},m(l,i){M(l,e,i),n.m(r,e)},p(l,[i]){fe(e,o=st(s,[{viewBox:"0 0 14 8"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i&1&&l[0]]))},i:H,o:H,d(l){l&&y(e)}}}function En(t,e,n){return t.$$set=r=>{n(0,e=J(J({},e),ae(r)))},e=ae(e),[e]}class In extends W{constructor(e){super(),Y(this,e,En,qn,B,{})}}function We(t,e,n){const r=t.slice();return r[9]=e[n],r}function Tn(t){var o,l;let e,n,r,s;return e=new U({props:{class:t[3]?"":"opacity-50",content:(o=t[1])!=null&&o.length?((l=t[3])==null?void 0:l.title)||"Select":"Loading...",typo:"p"}}),r=new In({props:{width:12}}),{c(){C(e.$$.fragment),n=N(),C(r.$$.fragment)},l(i){S(e.$$.fragment,i),n=L(i),S(r.$$.fragment,i)},m(i,a){A(e,i,a),M(i,n,a),A(r,i,a),s=!0},p(i,a){var d,_;const u={};a&8&&(u.class=i[3]?"":"opacity-50"),a&10&&(u.content=(d=i[1])!=null&&d.length?((_=i[3])==null?void 0:_.title)||"Select":"Loading..."),e.$set(u)},i(i){s||(x(e.$$.fragment,i),x(r.$$.fragment,i),s=!0)},o(i){q(e.$$.fragment,i),q(r.$$.fragment,i),s=!1},d(i){i&&y(n),D(e,i),D(r,i)}}}function Ye(t){let e,n,r=G(t[1]),s=[];for(let l=0;l<r.length;l+=1)s[l]=Fe(We(t,r,l));const o=l=>q(s[l],1,1,()=>{s[l]=null});return{c(){e=V("div");for(let l=0;l<s.length;l+=1)s[l].c();this.h()},l(l){e=z(l,"DIV",{class:!0});var i=j(e);for(let a=0;a<s.length;a+=1)s[a].l(i);i.forEach(y),this.h()},h(){v(e,"class","list scrollbar-hide svelte-rjfnlc"),he(e,"show",t[2])},m(l,i){M(l,e,i);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);n=!0},p(l,i){if(i&19){r=G(l[1]);let a;for(a=0;a<r.length;a+=1){const u=We(l,r,a);s[a]?(s[a].p(u,i),x(s[a],1)):(s[a]=Fe(u),s[a].c(),x(s[a],1),s[a].m(e,null))}for(Z(),a=r.length;a<s.length;a+=1)o(a);ee()}(!n||i&4)&&he(e,"show",l[2])},i(l){if(!n){for(let i=0;i<r.length;i+=1)x(s[i]);n=!0}},o(l){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)q(s[i]);n=!1},d(l){l&&y(e),ce(s,l)}}}function Fe(t){let e,n;function r(){return t[7](t[9])}return e=new K({props:{class:`button p-xs ${t[9].slug===t[0]?"selected":""}`,text:t[9].title,fn:r}}),{c(){C(e.$$.fragment)},l(s){S(e.$$.fragment,s)},m(s,o){A(e,s,o),n=!0},p(s,o){t=s;const l={};o&3&&(l.class=`button p-xs ${t[9].slug===t[0]?"selected":""}`),o&2&&(l.text=t[9].title),o&2&&(l.fn=r),e.$set(l)},i(s){n||(x(e.$$.fragment,s),n=!0)},o(s){q(e.$$.fragment,s),n=!1},d(s){D(e,s)}}}function Cn(t){var l;let e,n,r,s;n=new K({props:{class:`dropdown-btn flex-btw-center p-xs ${t[2]?"active":""}`,fn:t[6],$$slots:{default:[Tn]},$$scope:{ctx:t}}});let o=((l=t[1])==null?void 0:l.length)&&Ye(t);return{c(){e=V("div"),C(n.$$.fragment),r=N(),o&&o.c(),this.h()},l(i){e=z(i,"DIV",{class:!0,ref:!0});var a=j(e);S(n.$$.fragment,a),r=L(a),o&&o.l(a),a.forEach(y),this.h()},h(){v(e,"class","dropdown svelte-rjfnlc"),v(e,"ref",t[5])},m(i,a){M(i,e,a),A(n,e,null),T(e,r),o&&o.m(e,null),s=!0},p(i,[a]){var d;const u={};a&4&&(u.class=`dropdown-btn flex-btw-center p-xs ${i[2]?"active":""}`),a&4&&(u.fn=i[6]),a&4106&&(u.$$scope={dirty:a,ctx:i}),n.$set(u),(d=i[1])!=null&&d.length?o?(o.p(i,a),a&2&&x(o,1)):(o=Ye(i),o.c(),x(o,1),o.m(e,null)):o&&(Z(),q(o,1,1,()=>{o=null}),ee())},i(i){s||(x(n.$$.fragment,i),x(o),s=!0)},o(i){q(n.$$.fragment,i),q(o),s=!1},d(i){i&&y(e),D(n),o&&o.d()}}}function Sn(t,e,n){let r,{items:s}=e,{value:o=null}=e,l=!1;const i=g=>{n(0,o=g),n(2,l=!1)};let a;ct(()=>(document.addEventListener("click",u),()=>{document.removeEventListener("click",u)}));const u=g=>{g.target.closest(".dropdown")||n(2,l=!1)},d=()=>n(2,l=!l),_=g=>i(g.slug);return t.$$set=g=>{"items"in g&&n(1,s=g.items),"value"in g&&n(0,o=g.value)},t.$$.update=()=>{var g;t.$$.dirty&3&&n(3,r=(g=s==null?void 0:s.find)==null?void 0:g.call(s,$=>$.slug===o))},[o,s,l,r,i,a,d,_]}class An extends W{constructor(e){super(),Y(this,e,Sn,Cn,B,{items:1,value:0})}}function Dn(t){let e,n,r='<path d="M2 2H32" stroke="currentColor" stroke-width="3" stroke-linecap="round"/><path d="M6 11H28" stroke="currentColor" stroke-width="3" stroke-linecap="round"/><path d="M11 20H23" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>',s=[{viewBox:"0 0 34 22"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},t[0]],o={};for(let l=0;l<s.length;l+=1)o=J(o,s[l]);return{c(){e=Q("svg"),n=new nt(!0),this.h()},l(l){e=X(l,"svg",{viewBox:!0,fill:!0,xmlns:!0});var i=j(e);n=rt(i,!0),i.forEach(y),this.h()},h(){n.a=null,fe(e,o)},m(l,i){M(l,e,i),n.m(r,e)},p(l,[i]){fe(e,o=st(s,[{viewBox:"0 0 34 22"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i&1&&l[0]]))},i:H,o:H,d(l){l&&y(e)}}}function Mn(t,e,n){return t.$$set=r=>{n(0,e=J(J({},e),ae(r)))},e=ae(e),[e]}class jn extends W{constructor(e){super(),Y(this,e,Mn,Dn,B,{})}}function Je(t,e,n){const r=t.slice();return r[5]=e[n].label,r[6]=e[n].code,r[7]=e[n].color,r}function Ke(t){let e,n,r,s=!1,o,l,i=t[5]+"",a,u,d,_,g,$,b;return g=ft(t[4][0]),{c(){e=V("input"),o=N(),l=V("label"),a=et(i),u=N(),this.h()},l(c){e=z(c,"INPUT",{class:!0,type:!0,id:!0}),o=L(c),l=z(c,"LABEL",{class:!0,for:!0,style:!0});var w=j(l);a=tt(w,i),u=L(w),w.forEach(y),this.h()},h(){v(e,"class","sr-only svelte-1q0yvuu"),v(e,"type","radio"),v(e,"id",n=t[6]),e.__value=r=t[6],Te(e,e.__value),v(l,"class","typo-small svelte-1q0yvuu"),v(l,"for",d=t[6]),v(l,"style",_=`--background: var(--color-${t[7]})`),g.p(e)},m(c,w){M(c,e,w),e.checked=e.__value===t[0],M(c,o,w),M(c,l,w),T(l,a),T(l,u),$||(b=F(e,"change",t[3]),$=!0)},p(c,w){w&2&&n!==(n=c[6])&&v(e,"id",n),w&2&&r!==(r=c[6])&&(e.__value=r,Te(e,e.__value),s=!0),(s||w&3)&&(e.checked=e.__value===c[0]),w&2&&i!==(i=c[5]+"")&&ht(a,i),w&2&&d!==(d=c[6])&&v(l,"for",d),w&2&&_!==(_=`--background: var(--color-${c[7]})`)&&v(l,"style",_)},d(c){c&&(y(e),y(o),y(l)),g.r(),$=!1,b()}}}function On(t){let e,n=G(t[1]),r=[];for(let s=0;s<n.length;s+=1)r[s]=Ke(Je(t,n,s));return{c(){e=V("div");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){e=z(s,"DIV",{role:!0,class:!0});var o=j(e);for(let l=0;l<r.length;l+=1)r[l].l(o);o.forEach(y),this.h()},h(){v(e,"role","radiogroup"),v(e,"class","grid-2-xs l:flex flex-wrap items-center gap-xs")},m(s,o){M(s,e,o);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(e,null)},p(s,[o]){if(o&3){n=G(s[1]);let l;for(l=0;l<n.length;l+=1){const i=Je(s,n,l);r[l]?r[l].p(i,o):(r[l]=Ke(i),r[l].c(),r[l].m(e,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},i:H,o:H,d(s){s&&y(e),ce(r,s)}}}function Nn(t,e,n){let r,{items:s}=e,{value:o=null}=e;const l=[[]];function i(){o=this.__value,n(0,o)}return t.$$set=a=>{"items"in a&&n(2,s=a.items),"value"in a&&n(0,o=a.value)},t.$$.update=()=>{t.$$.dirty&4&&n(1,r=Array.isArray(s)?s:Object.values(s))},[o,r,s,i,l]}class Ln extends W{constructor(e){super(),Y(this,e,Nn,On,B,{items:2,value:0})}}function Vn(t){let e,n;return e=new jn({props:{height:"16"}}),{c(){C(e.$$.fragment)},l(r){S(e.$$.fragment,r)},m(r,s){A(e,r,s),n=!0},i(r){n||(x(e.$$.fragment,r),n=!0)},o(r){q(e.$$.fragment,r),n=!1},d(r){D(e,r)}}}function zn(t){let e,n;return e=new U({props:{content:"Confirm",typo:"small"}}),{c(){C(e.$$.fragment)},l(r){S(e.$$.fragment,r)},m(r,s){A(e,r,s),n=!0},i(r){n||(x(e.$$.fragment,r),n=!0)},o(r){q(e.$$.fragment,r),n=!1},d(r){D(e,r)}}}function Pn(t){let e,n,r,s;const o=[zn,Vn],l=[];function i(a,u){return a[1]?0:1}return e=i(t),n=l[e]=o[e](t),{c(){n.c(),r=R()},l(a){n.l(a),r=R()},m(a,u){l[e].m(a,u),M(a,r,u),s=!0},p(a,u){let d=e;e=i(a),e!==d&&(Z(),q(l[d],1,1,()=>{l[d]=null}),ee(),n=l[e],n||(n=l[e]=o[e](a),n.c()),x(n,1),n.m(r.parentNode,r))},i(a){s||(x(n),s=!0)},o(a){q(n),s=!1},d(a){a&&y(r),l[e].d(a)}}}function Un(t){let e,n,r,s,o,l,i,a,u,d,_,g,$,b,c,w;r=new U({props:{typo:"label",content:"Query",class:"case-upper"}});function E(f){t[6](f)}let h={items:t[0]};t[2]!==void 0&&(h.value=t[2]),o=new An({props:h}),xe.push(()=>Ce(o,"value",E)),u=new U({props:{typo:"label",content:"Language",class:"case-upper"}});function k(f){t[7](f)}let m={items:ie};return t[3]!==void 0&&(m.value=t[3]),_=new Ln({props:m}),xe.push(()=>Ce(_,"value",k)),c=new K({props:{class:"button pointer-events-initial",fn:t[8],theme:"cta",$$slots:{default:[Pn]},$$scope:{ctx:t}}}),{c(){e=V("div"),n=V("div"),C(r.$$.fragment),s=N(),C(o.$$.fragment),i=N(),a=V("div"),C(u.$$.fragment),d=N(),C(_.$$.fragment),$=N(),b=V("div"),C(c.$$.fragment),this.h()},l(f){e=z(f,"DIV",{class:!0});var p=j(e);n=z(p,"DIV",{class:!0});var I=j(n);S(r.$$.fragment,I),s=L(I),S(o.$$.fragment,I),I.forEach(y),i=L(p),a=z(p,"DIV",{class:!0});var O=j(a);S(u.$$.fragment,O),d=L(O),S(_.$$.fragment,O),O.forEach(y),p.forEach(y),$=L(f),b=z(f,"DIV",{class:!0});var P=j(b);S(c.$$.fragment,P),P.forEach(y),this.h()},h(){v(n,"class","group flex flex-col gap-xs"),v(a,"class","group flex flex-col gap-xs"),v(e,"class","filters px-s py-m l:p-0 svelte-j7mje2"),he(e,"show",t[1]),v(b,"class","cta pointer-events-none l:hidden svelte-j7mje2")},m(f,p){M(f,e,p),T(e,n),A(r,n,null),T(n,s),A(o,n,null),T(e,i),T(e,a),A(u,a,null),T(a,d),A(_,a,null),M(f,$,p),M(f,b,p),A(c,b,null),w=!0},p(f,[p]){const I={};p&1&&(I.items=f[0]),!l&&p&4&&(l=!0,I.value=f[2],qe(()=>l=!1)),o.$set(I);const O={};!g&&p&8&&(g=!0,O.value=f[3],qe(()=>g=!1)),_.$set(O),(!w||p&2)&&he(e,"show",f[1]);const P={};p&2&&(P.fn=f[8]),p&514&&(P.$$scope={dirty:p,ctx:f}),c.$set(P)},i(f){w||(x(r.$$.fragment,f),x(o.$$.fragment,f),x(u.$$.fragment,f),x(_.$$.fragment,f),x(c.$$.fragment,f),w=!0)},o(f){q(r.$$.fragment,f),q(o.$$.fragment,f),q(u.$$.fragment,f),q(_.$$.fragment,f),q(c.$$.fragment,f),w=!1},d(f){f&&(y(e),y($),y(b)),D(r),D(o),D(u),D(_),D(c)}}}function Rn(t,e,n){let r,s,{queries:o}=e,l=de("query"),i=de("lang");ue(t,l,g=>n(2,r=g)),ue(t,i,g=>n(3,s=g));let a=!1;function u(g){r=g,l.set(r)}function d(g){s=g,i.set(s)}const _=()=>n(1,a=!a);return t.$$set=g=>{"queries"in g&&n(0,o=g.queries)},t.$$.update=()=>{t.$$.dirty&2&&document.body.classList.toggle("scroll-lock",a)},innerWidth>kt(bt.l)&&n(1,a=!1),[o,a,r,s,l,i,u,d,_]}class Gn extends W{constructor(e){super(),Y(this,e,Rn,Un,B,{queries:0})}}const Hn="Getty Images circulation",Bn="By which web pages are the most significant stock photos used?",Wn="Getty Images provides insight into the visual repertoire associated with toxicities. This page shows images returned by GettyImages for each query. Images are grouped into clusters of stereotypes. Clusters of stereotypes are ordered from most to least common.",Yn={identify:"Identify most significant images",reverse:"Reverse search images on Google Image Search",collect:"Collect web pages hosting the images",anlayse:"Analyse top web pages"},Fn={title:Hn,research_question:Bn,description:Wn,protocol:Yn},Jn="Getty Images stereotypes",Kn="Which visual tropes emerge in connection to different pollution routes, practices and substances?",Qn="Getty Images provides insight into the visual repertoire associated with toxicities. This page shows images returned by GettyImages for each query. Images are grouped into clusters of stereotypes. Clusters of stereotypes are ordered from most to least common.",Xn={search:"Search term on Getty Images",collect:"Collect 1000 top photos",similarity:"Cluster images based on similarity",identify:"Identify most recurrent visual stereotypes"},Zn={title:Jn,research_question:Kn,description:Qn,protocol:Xn},er="TikTok topics",tr="Which topics are connected to different substances, practices and devices?",nr="On TikTok users share fears, practices, and information about toxicities. This page collects clusters of similar hashtags, resized based on their frequency of use. By clicking on a cluster, users can explore videos associated with those hashtags.",rr={query:"Query term on TikTok in the local language",collect_per_query:"Collect a set of videos per each query",collect_hashtags:"Collect hashtags for each video",identify:"Identify and characterise clusters of similar hashtags"},sr={title:er,research_question:tr,description:nr,protocol:rr},lr="Youtube language comparison",or="How do video results about substances change according to the language of the query?",ir="Video results on YouTube vary depending on the language of the query. This page displays the top 50 videos for each query across different languages, merged together. Videos can be filtered by language and ordered by view, time, and like count.",ar={search:"Search term on YouTube (with language and country filter activated)",collect:"Collect the top 50 videos from the results using YouTube Data Tools",metadata:"Collect metadata (likes, views, and timestamps)"},ur={title:lr,research_question:or,description:ir,protocol:ar},cr="Youtube network",fr="What topics are substances connected to through the recommendation algorithm?",hr="TBD",dr={search:"Search term on YouTube (with language and country filter activated)",collect:"Collect recommended videos to the top 50 videos",identify:"Identify and characterise clusters of similar videos in dataset"},gr={title:cr,research_question:fr,description:hr,protocol:dr},pr={},oe={getty_circular:Fn,getty_stereotype:Zn,tiktok:sr,youtube_language:ur,youtube_network:gr,globals:pr},mr=(t="globals",e,n)=>oe[t]&&oe[t][e]?n?oe[t][e][n]:oe[t][e]:null,_r=t=>(e,n)=>mr(t,e,n);function $r(t){let e,n,r,s;return e=new U({props:{typo:"small",content:"download data"}}),r=new vt({props:{width:"8"}}),{c(){C(e.$$.fragment),n=N(),C(r.$$.fragment)},l(o){S(e.$$.fragment,o),n=L(o),S(r.$$.fragment,o)},m(o,l){A(e,o,l),M(o,n,l),A(r,o,l),s=!0},p:H,i(o){s||(x(e.$$.fragment,o),x(r.$$.fragment,o),s=!0)},o(o){q(e.$$.fragment,o),q(r.$$.fragment,o),s=!1},d(o){o&&y(n),D(e,o),D(r,o)}}}function vr(t){let e,n;return e=new U({props:{typo:"small",content:"view protocol"}}),{c(){C(e.$$.fragment)},l(r){S(e.$$.fragment,r)},m(r,s){A(e,r,s),n=!0},p:H,i(r){n||(x(e.$$.fragment,r),n=!0)},o(r){q(e.$$.fragment,r),n=!1},d(r){D(e,r)}}}function yr(t){let e,n,r,s,o,l,i,a,u,d,_,g,$,b,c,w,E,h,k;return r=new U({props:{typo:"h2",content:t[2]("research_question")}}),l=new U({props:{typo:"label",content:"WHAT AM I LOOKING AT?"}}),a=new U({props:{typo:"p",content:t[2]("description")}}),d=new Gn({props:{queries:t[0]}}),$=new U({props:{typo:"label",content:"Resources",class:"case-upper"}}),w=new K({props:{url:t[1],theme:"download",class:"flex gap-xxs items-center",$$slots:{default:[$r]},$$scope:{ctx:t}}}),h=new K({props:{url:t[1],theme:"download",class:"flex gap-xs items-center",$$slots:{default:[vr]},$$scope:{ctx:t}}}),{c(){e=V("div"),n=V("div"),C(r.$$.fragment),s=N(),o=V("div"),C(l.$$.fragment),i=N(),C(a.$$.fragment),u=N(),C(d.$$.fragment),_=N(),g=V("div"),C($.$$.fragment),b=N(),c=V("div"),C(w.$$.fragment),E=N(),C(h.$$.fragment),this.h()},l(m){e=z(m,"DIV",{class:!0});var f=j(e);n=z(f,"DIV",{class:!0});var p=j(n);S(r.$$.fragment,p),p.forEach(y),s=L(f),o=z(f,"DIV",{class:!0});var I=j(o);S(l.$$.fragment,I),i=L(I),S(a.$$.fragment,I),I.forEach(y),u=L(f),S(d.$$.fragment,f),_=L(f),g=z(f,"DIV",{class:!0});var O=j(g);S($.$$.fragment,O),b=L(O),c=z(O,"DIV",{class:!0});var P=j(c);S(w.$$.fragment,P),E=L(P),S(h.$$.fragment,P),P.forEach(y),O.forEach(y),f.forEach(y),this.h()},h(){v(n,"class","group"),v(o,"class","group flex flex-col gap-xs"),v(c,"class","flex gap-xs"),v(g,"class","group flex flex-col gap-xs"),v(e,"class","sidebar flex flex-col gap-l py-m px-s svelte-fvv8ff")},m(m,f){M(m,e,f),T(e,n),A(r,n,null),T(e,s),T(e,o),A(l,o,null),T(o,i),A(a,o,null),T(e,u),A(d,e,null),T(e,_),T(e,g),A($,g,null),T(g,b),T(g,c),A(w,c,null),T(c,E),A(h,c,null),k=!0},p(m,[f]){const p={};f&1&&(p.queries=m[0]),d.$set(p);const I={};f&2&&(I.url=m[1]),f&8&&(I.$$scope={dirty:f,ctx:m}),w.$set(I);const O={};f&2&&(O.url=m[1]),f&8&&(O.$$scope={dirty:f,ctx:m}),h.$set(O)},i(m){k||(x(r.$$.fragment,m),x(l.$$.fragment,m),x(a.$$.fragment,m),x(d.$$.fragment,m),x($.$$.fragment,m),x(w.$$.fragment,m),x(h.$$.fragment,m),k=!0)},o(m){q(r.$$.fragment,m),q(l.$$.fragment,m),q(a.$$.fragment,m),q(d.$$.fragment,m),q($.$$.fragment,m),q(w.$$.fragment,m),q(h.$$.fragment,m),k=!1},d(m){m&&y(e),D(r),D(l),D(a),D(d),D($),D(w),D(h)}}}function wr(t,e,n){const r=_r("tiktok");let{queries:s}=e,{dataUrl:o}=e;return t.$$set=l=>{"queries"in l&&n(0,s=l.queries),"dataUrl"in l&&n(1,o=l.dataUrl)},[s,o,r]}class kr extends W{constructor(e){super(),Y(this,e,wr,yr,B,{queries:0,dataUrl:1})}}function Qe(t,e,n){const r=t.slice();return r[15]=e[n],r[17]=n,r}function Xe(t){let e=[],n=new Map,r,s,o=G(t[4]);const l=i=>{var a;return`${i[1]}-${i[2]}-${i[17]}-${(a=i[15])==null?void 0:a[0]}`};for(let i=0;i<o.length;i+=1){let a=Qe(t,o,i),u=l(a);n.set(u,e[i]=Ze(u,a))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();r=R()},l(i){for(let a=0;a<e.length;a+=1)e[a].l(i);r=R()},m(i,a){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(i,a);M(i,r,a),s=!0},p(i,a){a&278&&(o=G(i[4]),Z(),e=dt(e,a,l,1,i,o,n,r.parentNode,gt,Ze,r,Qe),ee())},i(i){if(!s){for(let a=0;a<o.length;a+=1)x(e[a]);s=!0}},o(i){for(let a=0;a<e.length;a+=1)q(e[a]);s=!1},d(i){i&&y(r);for(let a=0;a<e.length;a+=1)e[a].d(i)}}}function br(t){let e,n,r;return e=new xn({props:{cluster:t[15]}}),{c(){C(e.$$.fragment),n=N()},l(s){S(e.$$.fragment,s),n=L(s)},m(s,o){A(e,s,o),M(s,n,o),r=!0},p(s,o){const l={};o&16&&(l.cluster=s[15]),e.$set(l)},i(s){r||(x(e.$$.fragment,s),r=!0)},o(s){q(e.$$.fragment,s),r=!1},d(s){s&&y(n),D(e,s)}}}function Ze(t,e){let n,r,s;return r=new K({props:{url:e[8](e[15]),class:"contents",$$slots:{default:[br]},$$scope:{ctx:e}}}),{key:t,first:null,c(){n=R(),C(r.$$.fragment),this.h()},l(o){n=R(),S(r.$$.fragment,o),this.h()},h(){this.first=n},m(o,l){M(o,n,l),A(r,o,l),s=!0},p(o,l){e=o;const i={};l&16&&(i.url=e[8](e[15])),l&262160&&(i.$$scope={dirty:l,ctx:e}),r.$set(i)},i(o){s||(x(r.$$.fragment,o),s=!0)},o(o){q(r.$$.fragment,o),s=!1},d(o){o&&y(n),D(r,o)}}}function xr(t){let e,n,r,s,o;n=new kr({props:{queries:t[3],dataUrl:t[5]}});let l=t[0]&&Xe(t);return{c(){e=V("div"),C(n.$$.fragment),r=N(),s=V("div"),l&&l.c(),this.h()},l(i){e=z(i,"DIV",{class:!0});var a=j(e);S(n.$$.fragment,a),r=L(a),s=z(a,"DIV",{class:!0});var u=j(s);l&&l.l(u),u.forEach(y),a.forEach(y),this.h()},h(){v(s,"class","container p-s grid-1-s s:grid-2-s xl:grid-3-s xxl:grid-4-s svelte-1bhb5im"),v(e,"class","page l:flex-start-start")},m(i,a){M(i,e,a),A(n,e,null),T(e,r),T(e,s),l&&l.m(s,null),o=!0},p(i,[a]){const u={};a&8&&(u.queries=i[3]),a&32&&(u.dataUrl=i[5]),n.$set(u),i[0]?l?(l.p(i,a),a&1&&x(l,1)):(l=Xe(i),l.c(),x(l,1),l.m(s,null)):l&&(Z(),q(l,1,1,()=>{l=null}),ee())},i(i){o||(x(n.$$.fragment,i),x(l),o=!0)},o(i){q(n.$$.fragment,i),q(l),o=!1},d(i){i&&y(e),D(n),l&&l.d()}}}function qr(t,e,n){let r,s,o,l,i,a,u,d,_,g,$=!1,b=de("query");ue(t,b,h=>n(1,u=h));let c=de("lang");ue(t,c,h=>n(2,d=h));const w=async(h=(k=>(k=Object.keys(ie))==null?void 0:k[0])())=>{var p;if($||!Et)return;$=!0;const{data:m,error:f}=await yt({key:`tiktok-${h}-data`,url:i,type:"text"});m?(n(9,g=wt(m)),_!=null&&_.length||(n(3,_=[]),g.forEach(I=>{_.find(O=>O.slug===I.querySlug)||_.push({slug:I.querySlug,title:I.query})}),u||Ee(b,u=(p=_[0])==null?void 0:p.slug,u),d||Ee(c,d=h,d))):n(9,g=null),$=!1},E=h=>{const k=h==null?void 0:h[0];return`/tiktok/${d}/${u}/${k}`};return t.$$.update=()=>{var h,k,m;t.$$.dirty&518&&n(0,r=(g==null?void 0:g.length)&&u&&d),t.$$.dirty&4&&n(11,s=((h=ie)==null?void 0:h[d])||((k=ie)==null?void 0:k.us)),t.$$.dirty&514&&n(10,o=(m=g==null?void 0:g.filter)==null?void 0:m.call(g,f=>(f==null?void 0:f.querySlug)===u)),t.$$.dirty&2048&&n(12,l=`${xt}/assets/tiktok/${s==null?void 0:s.code}`),t.$$.dirty&6144&&n(5,i=s?`${l}/clusters_${s.code}.csv`:null),t.$$.dirty&2048&&w(s==null?void 0:s.code),t.$$.dirty&1025&&n(4,a=r?Ot(o,f=>f.cluster).map(f=>(f[2]=[...new Set(f[1].map(p=>p.ids.split("|")).flat())].length,f)).sort((f,p)=>Ct(f[2],p[2])):[])},[r,u,d,_,a,i,b,c,E,g,o,s,l]}class Lr extends W{constructor(e){super(),Y(this,e,qr,xr,B,{})}}export{Lr as component};
