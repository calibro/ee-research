import{g as _e,c as ve}from"../chunks/download.HIaS9g-_.js";import"../chunks/index.CzR0xuCU.js";import{b as Z}from"../chunks/paths.DdOS2Gdh.js";import{s as re,d as se,n as G,c as be,o as we,v as ke}from"../chunks/scheduler.CA2uhRhB.js";import{S as ne,i as le,e as b,m as E,s as T,c as w,a as D,n as V,f as M,d as v,o as _,g as H,h,p as L,r as $e,I as qe,k,l as q,q as x,z as W,A as X,y as fe,G as Ie,J as ye}from"../chunks/index.BXv2E_O8.js";import{e as Y,u as De,o as Ee}from"../chunks/each.GjWr3TkG.js";import{L as Ve,S as Le,q as xe,g as Te,a as Me,b as Oe}from"../chunks/index.zO2WISWb.js";import"../chunks/gettyStereo.svelte_svelte_type_style_lang.CjK-h9Su.js";import{T as A}from"../chunks/text.DlD_m8u3.js";import{L as Ce}from"../chunks/link.NXSYj_N5.js";import{C as Ne}from"../chunks/close.CrRRmWma.js";const Se=!1,ze=!0,je=!1;async function Ae({params:c,fetch:e}){const r=`${Z}/assets/gettyimages/queries.csv`,{data:t,error:s}=await _e({key:"gettyimages-queries",url:r,type:"text"},e);if(!t||s)return console.error("error",s),s(404,"Not found");const o=ve(t);return o.sort((l,f)=>l.queryLabel.localeCompare(f.queryLabel)),{queries:o}}const it=Object.freeze(Object.defineProperty({__proto__:null,csr:ze,load:Ae,prerender:Se,ssr:je},Symbol.toStringTag,{value:"Module"}));function Ge(c){let e,r;return e=new Ne({props:{width:"26"}}),{c(){E(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){L(e,t,s),r=!0},p:G,i(t){r||(k(e.$$.fragment,t),r=!0)},o(t){q(e.$$.fragment,t),r=!1},d(t){x(e,t)}}}function He(c){var oe;let e,r,t,s,o,l,f,a,m,g,$,d,i,n,u,I,p,O,S,z,ee,j,P,C,R,te,ae;return l=new A({props:{content:"Query",typo:"label",class:"case-upper"}}),a=new A({props:{tag:"h3",typo:"h3",content:c[1][0].clusterLabel,ellipsis:!0}}),$=new A({props:{content:"Image",typo:"label",class:"case-upper"}}),O=new A({props:{content:"Results",typo:"label",class:"case-upper pb-xxs"}}),z=new A({props:{content:(oe=c[1])==null?void 0:oe.length}}),C=new Ce({props:{fn:c[0],class:"flex-center-center",$$slots:{default:[Ge]},$$scope:{ctx:c}}}),{c(){e=b("div"),r=b("div"),t=b("div"),s=b("div"),o=b("div"),E(l.$$.fragment),f=T(),E(a.$$.fragment),m=T(),g=b("div"),E($.$$.fragment),d=T(),i=b("div"),n=b("img"),I=T(),p=b("div"),E(O.$$.fragment),S=T(),E(z.$$.fragment),ee=T(),j=b("div"),P=b("div"),E(C.$$.fragment),this.h()},l(y){e=w(y,"DIV",{class:!0});var N=D(e);r=w(N,"DIV",{class:!0});var K=D(r);t=w(K,"DIV",{class:!0});var Q=D(t);s=w(Q,"DIV",{class:!0});var U=D(s);o=w(U,"DIV",{class:!0});var B=D(o);V(l.$$.fragment,B),f=M(B),V(a.$$.fragment,B),B.forEach(v),m=M(U),g=w(U,"DIV",{class:!0});var J=D(g);V($.$$.fragment,J),d=M(J),i=w(J,"DIV",{class:!0});var ce=D(i);n=w(ce,"IMG",{src:!0,alt:!0,class:!0}),ce.forEach(v),J.forEach(v),U.forEach(v),I=M(Q),p=w(Q,"DIV",{class:!0});var F=D(p);V(O.$$.fragment,F),S=M(F),V(z.$$.fragment,F),F.forEach(v),ee=M(Q),j=w(Q,"DIV",{class:!0,role:!0});var ie=D(j);P=w(ie,"DIV",{class:!0});var ue=D(P);V(C.$$.fragment,ue),ue.forEach(v),ie.forEach(v),Q.forEach(v),K.forEach(v),N.forEach(v),this.h()},h(){_(o,"class","col-[span-2]"),se(n.src,u=c[2](c[1][0].image_id))||_(n,"src",u),_(n,"alt",""),_(n,"class","svelte-xtpe4m"),_(i,"class","img ratio-[4/3] svelte-xtpe4m"),_(g,"class","col-[span-3]"),_(s,"class","title col-[span-5] py-s px-s grid-5-gap svelte-xtpe4m"),_(p,"class","col-[span-2] xl:col-[10/span-2] py-s px-s xl:px-0"),_(P,"class","flex-end-start h-full pt-m"),_(j,"class","close col-4 xl:col-12 px-s svelte-xtpe4m"),_(j,"role","button"),_(t,"class","content grid-4-0 auto-flow-dense xl:grid-12-gap"),_(r,"class","navbar svelte-xtpe4m"),_(e,"class","news svelte-xtpe4m")},m(y,N){H(y,e,N),h(e,r),h(r,t),h(t,s),h(s,o),L(l,o,null),h(o,f),L(a,o,null),h(s,m),h(s,g),L($,g,null),h(g,d),h(g,i),h(i,n),h(t,I),h(t,p),L(O,p,null),h(p,S),L(z,p,null),h(t,ee),h(t,j),h(j,P),L(C,P,null),R=!0,te||(ae=$e(window,"keydown",qe(c[3])),te=!0)},p(y,[N]){const K={};N&1&&(K.fn=y[0]),N&128&&(K.$$scope={dirty:N,ctx:y}),C.$set(K)},i(y){R||(k(l.$$.fragment,y),k(a.$$.fragment,y),k($.$$.fragment,y),k(O.$$.fragment,y),k(z.$$.fragment,y),k(C.$$.fragment,y),R=!0)},o(y){q(l.$$.fragment,y),q(a.$$.fragment,y),q($.$$.fragment,y),q(O.$$.fragment,y),q(z.$$.fragment,y),q(C.$$.fragment,y),R=!1},d(y){y&&v(e),x(l),x(a),x($),x(O),x(z),x(C),te=!1,ae()}}}function Pe(c,e,r){let{query:t}=e,{news:s}=e,{close:o=()=>{}}=e;const{cluster:l,index:f}=s,a=g=>`${Z}/assets/gettyimages/${t}/images/${g}.jpg`,m=g=>{g.key==="Escape"&&o()};return c.$$set=g=>{"query"in g&&r(4,t=g.query),"news"in g&&r(5,s=g.news),"close"in g&&r(0,o=g.close)},[o,l,a,m,t,s]}class Ke extends ne{constructor(e){super(),le(this,e,Pe,He,re,{query:4,news:5,close:0})}}function me(c,e,r){const t=c.slice();return t[5]=e[r][0],t[6]=e[r][1],t[8]=r,t}function ge(c,e){let r,t,s,o,l,f,a,m,g,$;s=new Ve({props:{label:"RANK #"+(e[8]+1),typo:"label"}});function d(){return e[4](e[6])}return{key:c,first:null,c(){r=b("button"),t=b("div"),E(s.$$.fragment),o=T(),l=b("img"),a=T(),this.h()},l(i){r=w(i,"BUTTON",{class:!0});var n=D(r);t=w(n,"DIV",{class:!0});var u=D(t);V(s.$$.fragment,u),u.forEach(v),o=M(n),l=w(n,"IMG",{src:!0,alt:!0,class:!0}),a=M(n),n.forEach(v),this.h()},h(){_(t,"class","absolute top-0 left-0 p-s"),se(l.src,f=e[3](e[5]))||_(l,"src",f),_(l,"alt",""),_(l,"class","svelte-1yqzyfw"),_(r,"class","img relative svelte-1yqzyfw"),this.first=r},m(i,n){H(i,r,n),h(r,t),L(s,t,null),h(r,o),h(r,l),h(r,a),m=!0,g||($=$e(r,"click",d),g=!0)},p(i,n){e=i;const u={};n&1&&(u.label="RANK #"+(e[8]+1)),s.$set(u),(!m||n&1&&!se(l.src,f=e[3](e[5])))&&_(l,"src",f)},i(i){m||(k(s.$$.fragment,i),m=!0)},o(i){q(s.$$.fragment,i),m=!1},d(i){i&&v(r),x(s),g=!1,$()}}}function Qe(c){let e,r,t,s,o,l,f,a,m=[],g=new Map,$;s=new A({props:{typo:"label",content:"Query",class:"case-upper"}}),l=new A({props:{typo:"h3",content:c[0][1][0][1][0].clusterLabel,class:"mb-xs"}});let d=Y(c[0][1]);const i=n=>`${n[5]}-${n[0][0]}-${n[1]}`;for(let n=0;n<d.length;n+=1){let u=me(c,d,n),I=i(u);g.set(I,m[n]=ge(I,u))}return{c(){e=b("div"),r=b("div"),t=b("div"),E(s.$$.fragment),o=T(),E(l.$$.fragment),f=T(),a=b("div");for(let n=0;n<m.length;n+=1)m[n].c();this.h()},l(n){e=w(n,"DIV",{class:!0});var u=D(e);r=w(u,"DIV",{class:!0});var I=D(r);t=w(I,"DIV",{});var p=D(t);V(s.$$.fragment,p),o=M(p),V(l.$$.fragment,p),p.forEach(v),I.forEach(v),f=M(u),a=w(u,"DIV",{class:!0});var O=D(a);for(let S=0;S<m.length;S+=1)m[S].l(O);O.forEach(v),u.forEach(v),this.h()},h(){_(r,"class","h-full overflow-hidden col-[span-9] l:col-[span-2] flex-btw-start l:flex-col-btw-start p-s"),_(a,"class","h-full overflow-hidden col-[span-9] l:col-[span-7] grid-3-0"),_(e,"class","getty grid-9-gap svelte-1yqzyfw")},m(n,u){H(n,e,u),h(e,r),h(r,t),L(s,t,null),h(t,o),L(l,t,null),h(e,f),h(e,a);for(let I=0;I<m.length;I+=1)m[I]&&m[I].m(a,null);$=!0},p(n,[u]){const I={};u&1&&(I.content=n[0][1][0][1][0].clusterLabel),l.$set(I),u&15&&(d=Y(n[0][1]),W(),m=De(m,u,i,1,n,d,g,a,Ee,ge,null,me),X())},i(n){if(!$){k(s.$$.fragment,n),k(l.$$.fragment,n);for(let u=0;u<d.length;u+=1)k(m[u]);$=!0}},o(n){q(s.$$.fragment,n),q(l.$$.fragment,n);for(let u=0;u<m.length;u+=1)q(m[u]);$=!1},d(n){n&&v(e),x(s),x(l);for(let u=0;u<m.length;u+=1)m[u].d()}}}function Re(c,e,r){let{cluster:t}=e,{query:s}=e,{open:o=a=>{}}=e;const l=a=>`${Z}/assets/gettyimages/${s}/images/${a}.jpg`,f=a=>o(a);return c.$$set=a=>{"cluster"in a&&r(0,t=a.cluster),"query"in a&&r(1,s=a.query),"open"in a&&r(2,o=a.open)},[t,s,o,l,f]}class Ue extends ne{constructor(e){super(),le(this,e,Re,Qe,re,{cluster:0,query:1,open:2})}}function de(c,e,r){const t=c.slice();return t[14]=e[r],t}function Be(c){let e,r,t=Y(c[4]),s=[];for(let l=0;l<t.length;l+=1)s[l]=pe(de(c,t,l));const o=l=>q(s[l],1,1,()=>{s[l]=null});return{c(){e=b("div");for(let l=0;l<s.length;l+=1)s[l].c();this.h()},l(l){e=w(l,"DIV",{class:!0});var f=D(e);for(let a=0;a<s.length;a+=1)s[a].l(f);f.forEach(v),this.h()},h(){_(e,"class","container p-s grid-1-s svelte-1bhb5im")},m(l,f){H(l,e,f);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);r=!0},p(l,f){if(f&532){t=Y(l[4]);let a;for(a=0;a<t.length;a+=1){const m=de(l,t,a);s[a]?(s[a].p(m,f),k(s[a],1)):(s[a]=pe(m),s[a].c(),k(s[a],1),s[a].m(e,null))}for(W(),a=t.length;a<s.length;a+=1)o(a);X()}},i(l){if(!r){for(let f=0;f<t.length;f+=1)k(s[f]);r=!0}},o(l){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)q(s[f]);r=!1},d(l){l&&v(e),Ie(s,l)}}}function Je(c){let e,r="<p>No data available</p>";return{c(){e=b("div"),e.innerHTML=r,this.h()},l(t){e=w(t,"DIV",{class:!0,"data-svelte-h":!0}),ye(e)!=="svelte-kunnt3"&&(e.innerHTML=r),this.h()},h(){_(e,"class","container flex-center-center svelte-1bhb5im")},m(t,s){H(t,e,s)},p:G,i:G,o:G,d(t){t&&v(e)}}}function Fe(c){let e,r="<p>Loading...</p>";return{c(){e=b("div"),e.innerHTML=r,this.h()},l(t){e=w(t,"DIV",{class:!0,"data-svelte-h":!0}),ye(e)!=="svelte-qdph03"&&(e.innerHTML=r),this.h()},h(){_(e,"class","container flex-center-center svelte-1bhb5im")},m(t,s){H(t,e,s)},p:G,i:G,o:G,d(t){t&&v(e)}}}function pe(c){let e,r;return e=new Ue({props:{cluster:c[14],query:c[2],open:c[9]}}),{c(){E(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){L(e,t,s),r=!0},p(t,s){const o={};s&16&&(o.cluster=t[14]),s&4&&(o.query=t[2]),e.$set(o)},i(t){r||(k(e.$$.fragment,t),r=!0)},o(t){q(e.$$.fragment,t),r=!1},d(t){x(e,t)}}}function he(c){let e,r;return e=new Ke({props:{news:c[3],close:c[8],query:c[2]}}),{c(){E(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){L(e,t,s),r=!0},p(t,s){const o={};s&8&&(o.news=t[3]),s&4&&(o.query=t[2]),e.$set(o)},i(t){r||(k(e.$$.fragment,t),r=!0)},o(t){q(e.$$.fragment,t),r=!1},d(t){x(e,t)}}}function We(c){let e,r,t,s,o,l,f,a;r=new Le({props:{queries:c[5],showLang:!1,description:c[6]("description"),question:c[6]("research_question")}});const m=[Fe,Je,Be],g=[];function $(i,n){var u;return i[1]?0:(u=i[0])!=null&&u.length?2:1}s=$(c),o=g[s]=m[s](c);let d=c[3].isOpen&&he(c);return{c(){e=b("div"),E(r.$$.fragment),t=T(),o.c(),l=T(),d&&d.c(),f=fe(),this.h()},l(i){e=w(i,"DIV",{class:!0});var n=D(e);V(r.$$.fragment,n),t=M(n),o.l(n),l=M(n),d&&d.l(n),f=fe(),n.forEach(v),this.h()},h(){_(e,"class","page l:flex-start-start")},m(i,n){H(i,e,n),L(r,e,null),h(e,t),g[s].m(e,null),h(e,l),d&&d.m(e,null),h(e,f),a=!0},p(i,[n]){let u=s;s=$(i),s===u?g[s].p(i,n):(W(),q(g[u],1,1,()=>{g[u]=null}),X(),o=g[s],o?o.p(i,n):(o=g[s]=m[s](i),o.c()),k(o,1),o.m(e,l)),i[3].isOpen?d?(d.p(i,n),n&8&&k(d,1)):(d=he(i),d.c(),k(d,1),d.m(f.parentNode,f)):d&&(W(),q(d,1,1,()=>{d=null}),X())},i(i){a||(k(r.$$.fragment,i),k(o),k(d),a=!0)},o(i){q(r.$$.fragment,i),q(o),q(d),a=!1},d(i){i&&v(e),x(r),g[s].d(),d&&d.d()}}}function Xe(c,e,r){let t,s,o,{data:l}=e;const{queries:f}=l,a=Te("getty_circulation");let m,g=!1,$=xe("query");be(c,$,p=>r(2,o=p)),we(()=>{var p;o||ke($,o=(p=f[0])==null?void 0:p.query,o)});const d=`${Z}/assets/gettyimages`,i=async()=>{if(g||!Oe)return;if(r(1,g=!0),!o){r(1,g=!1),r(0,m=null);return}const{data:p,error:O}=await _e({key:"getty-stereotypes-data",url:t,type:"text"});p?r(0,m=ve(p)):r(0,m=null),r(1,g=!1)},n={isOpen:!1,cluster:[]},u=()=>{r(3,n.isOpen=!1,n),r(3,n.cluster=[],n)},I=p=>{r(3,n.isOpen=!0,n),r(3,n.cluster=p,n)};return c.$$set=p=>{"data"in p&&r(10,l=p.data)},c.$$.update=()=>{c.$$.dirty&4&&r(11,t=`${d}/${o}/reverse_image_search/${o}.csv`),c.$$.dirty&3&&r(4,s=m!=null&&m.length&&!g?Me(m,p=>p.cluster,p=>p.image_id):[]),c.$$.dirty&2048&&i()},[m,g,o,n,s,f,a,$,u,I,l,t]}class ut extends ne{constructor(e){super(),le(this,e,Xe,We,re,{data:10})}}export{ut as component,it as universal};
