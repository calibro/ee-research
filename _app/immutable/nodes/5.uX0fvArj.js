import{s as B,l as ut,n as z,r as at,d as K,e as ie,o as ft,k as be,E as xe,c as ue,F as Ee}from"../chunks/scheduler.BvAkape9.js";import{S as W,i as G,e as P,s as T,m as X,r as H,x as I,c as V,a as j,f as N,n as Y,d as y,y as M,q as w,g as O,h as D,z as S,G as J,k as b,u as Z,l as x,v as ee,F as ae,A as C,B as re,I as qe,t as et,b as tt,H as nt,o as rt,p as fe,D as ce,K as ct,L as Ae,j as ht,M as De}from"../chunks/index.FHAnUYL_.js";import{e as F,u as dt,o as pt}from"../chunks/each.CV5-vln6.js";import{d as gt,w as _t,g as mt}from"../chunks/entry.BFgMireQ.js";import{p as vt}from"../chunks/stores.DLS6XGOb.js";import{f as Ie,l as oe,D as $t,g as wt,c as yt}from"../chunks/download.Yn29mlZM.js";import{T as R}from"../chunks/text.CubgupKh.js";import{g as lt,L as Q,e as kt}from"../chunks/link.BGZnTZuy.js";import{b as bt}from"../chunks/tokens.DVXvbK2-.js";import{b as xt}from"../chunks/paths.BNq2E7lx.js";const Et=!0,qt=Et;let st;st=vt;const At={keepFocus:!0,noScroll:!0,replaceState:!0},Dt={keepFocus:!0,noScroll:!0,replaceState:!1};function _e(t,e,n=(r,l)=>JSON.stringify(r)===JSON.stringify(l)){return typeof t=="object"&&typeof e=="object"&&n(t,e)}const me=new Set;let Me;const Se=new Map,ve={encode:t=>t.toString(),decode:t=>t?t.toString():null};function he(t,{encode:e=ve.encode,decode:n=ve.decode,defaultValue:r}=ve,{debounceHistory:l=0,pushHistory:o=!0,sort:s=!0,showDefaults:i=!0,equalityFn:u}={}){const a=_t(null);let p=!0,f;function h(v,d){p=!1;const c=window.location.hash,E=m=>{if(v==null)m.delete(t);else{const g=e(v);g==null?m.delete(t):m.set(t,g)}};me.add(E),clearTimeout(Me);const $=new URLSearchParams(window.location.search);Me=setTimeout(async()=>{me.forEach(m=>{m($)}),clearTimeout(Se.get(t));{a.set(v);async function m(){s&&$.sort(),await mt(`?${$}${c}`,o?Dt:At),a.set(null)}d||l===0?m():Se.set(t,setTimeout(m,l))}me.clear()})}const{subscribe:k}=gt([st,a],([v,d],c)=>{var m,g,_;if(d!=null)return _e(f,d,u)?void 0:(f=structuredClone(d),c(d));const E=(_=(g=(m=v==null?void 0:v.url)==null?void 0:m.searchParams)==null?void 0:g.get)==null?void 0:_.call(g,t);if(E==null&&r!=null)return i&&h(r,p),_e(f,r,u)?void 0:(f=structuredClone(r),c(r));const $=n(E);if(!_e(f,$,u))return f=structuredClone($),c($)});return{set(v){h(v)},subscribe:k,update:v=>{const d=v(f);h(d)}}}class It extends Map{constructor(e,n=Ct){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,l]of e)this.set(r,l)}get(e){return super.get(Ce(this,e))}has(e){return super.has(Ce(this,e))}set(e,n){return super.set(Mt(this,e),n)}delete(e){return super.delete(St(this,e))}}function Ce({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Mt({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function St({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(n),t.delete(r)),n}function Ct(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Oe(t){return t}function Ot(t,...e){return jt(t,Oe,Oe,e)}function jt(t,e,n,r){return function l(o,s){if(s>=r.length)return n(o);const i=new It,u=r[s++];let a=-1;for(const p of o){const f=u(p,++a,o),h=i.get(f);h?h.push(p):i.set(f,[p])}for(const[p,f]of i)i.set(p,l(f,s));return e(i)}(t,0)}function Lt(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function Tt(){return this.eachAfter(Lt)}function Nt(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function Pt(t,e){for(var n=this,r=[n],l,o,s=-1;n=r.pop();)if(t.call(e,n,++s,this),l=n.children)for(o=l.length-1;o>=0;--o)r.push(l[o]);return this}function Vt(t,e){for(var n=this,r=[n],l=[],o,s,i,u=-1;n=r.pop();)if(l.push(n),o=n.children)for(s=0,i=o.length;s<i;++s)r.push(o[s]);for(;n=l.pop();)t.call(e,n,++u,this);return this}function Ut(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function Rt(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,l=r&&r.length;--l>=0;)n+=r[l].value;e.value=n})}function Ht(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function Ft(t){for(var e=this,n=zt(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var l=r.length;t!==n;)r.splice(l,0,t),t=t.parent;return r}function zt(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),l=null;for(t=n.pop(),e=r.pop();t===e;)l=t,t=n.pop(),e=r.pop();return l}function Bt(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function Wt(){return Array.from(this)}function Gt(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function Jt(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*Kt(){var t=this,e,n=[t],r,l,o;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(l=0,o=r.length;l<o;++l)n.push(r[l]);while(n.length)}function ye(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=Yt)):e===void 0&&(e=Xt);for(var n=new de(t),r,l=[n],o,s,i,u;r=l.pop();)if((s=e(r.data))&&(u=(s=Array.from(s)).length))for(r.children=s,i=u-1;i>=0;--i)l.push(o=s[i]=new de(s[i])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(en)}function Qt(){return ye(this).eachBefore(Zt)}function Xt(t){return t.children}function Yt(t){return Array.isArray(t)?t[1]:null}function Zt(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function en(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function de(t){this.data=t,this.depth=this.height=0,this.parent=null}de.prototype=ye.prototype={constructor:de,count:Tt,each:Nt,eachAfter:Vt,eachBefore:Pt,find:Ut,sum:Rt,sort:Ht,path:Ft,ancestors:Bt,descendants:Wt,leaves:Gt,links:Jt,copy:Qt,[Symbol.iterator]:Kt};function tn(t){return t==null?null:nn(t)}function nn(t){if(typeof t!="function")throw new Error;return t}function je(){return 0}function rn(t){return function(){return t}}const ln=1664525,sn=1013904223,Le=4294967296;function on(){let t=1;return()=>(t=(ln*t+sn)%Le)/Le}function un(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function an(t,e){let n=t.length,r,l;for(;n;)l=e()*n--|0,r=t[n],t[n]=t[l],t[l]=r;return t}function fn(t,e){for(var n=0,r=(t=an(Array.from(t),e)).length,l=[],o,s;n<r;)o=t[n],s&&ot(s,o)?++n:(s=hn(l=cn(l,o)),n=0);return s}function cn(t,e){var n,r;if($e(e,t))return[e];for(n=0;n<t.length;++n)if(le(e,t[n])&&$e(te(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(le(te(t[n],t[r]),e)&&le(te(t[n],e),t[r])&&le(te(t[r],e),t[n])&&$e(it(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function le(t,e){var n=t.r-e.r,r=e.x-t.x,l=e.y-t.y;return n<0||n*n<r*r+l*l}function ot(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,r=e.x-t.x,l=e.y-t.y;return n>0&&n*n>r*r+l*l}function $e(t,e){for(var n=0;n<e.length;++n)if(!ot(t,e[n]))return!1;return!0}function hn(t){switch(t.length){case 1:return dn(t[0]);case 2:return te(t[0],t[1]);case 3:return it(t[0],t[1],t[2])}}function dn(t){return{x:t.x,y:t.y,r:t.r}}function te(t,e){var n=t.x,r=t.y,l=t.r,o=e.x,s=e.y,i=e.r,u=o-n,a=s-r,p=i-l,f=Math.sqrt(u*u+a*a);return{x:(n+o+u/f*p)/2,y:(r+s+a/f*p)/2,r:(f+l+i)/2}}function it(t,e,n){var r=t.x,l=t.y,o=t.r,s=e.x,i=e.y,u=e.r,a=n.x,p=n.y,f=n.r,h=r-s,k=r-a,v=l-i,d=l-p,c=u-o,E=f-o,$=r*r+l*l-o*o,m=$-s*s-i*i+u*u,g=$-a*a-p*p+f*f,_=k*v-h*d,q=(v*g-d*m)/(_*2)-r,A=(d*c-v*E)/_,L=(k*m-h*g)/(_*2)-l,U=(h*E-k*c)/_,pe=A*A+U*U-1,ne=2*(o+q*A+L*U),ke=q*q+L*L-o*o,ge=-(Math.abs(pe)>1e-6?(ne+Math.sqrt(ne*ne-4*pe*ke))/(2*pe):ke/ne);return{x:r+q+A*ge,y:l+L+U*ge,r:ge}}function Te(t,e,n){var r=t.x-e.x,l,o,s=t.y-e.y,i,u,a=r*r+s*s;a?(o=e.r+n.r,o*=o,u=t.r+n.r,u*=u,o>u?(l=(a+u-o)/(2*a),i=Math.sqrt(Math.max(0,u/a-l*l)),n.x=t.x-l*r-i*s,n.y=t.y-l*s+i*r):(l=(a+o-u)/(2*a),i=Math.sqrt(Math.max(0,o/a-l*l)),n.x=e.x+l*r-i*s,n.y=e.y+l*s+i*r)):(n.x=e.x+n.r,n.y=e.y)}function Ne(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,l=e.y-t.y;return n>0&&n*n>r*r+l*l}function Pe(t){var e=t._,n=t.next._,r=e.r+n.r,l=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return l*l+o*o}function se(t){this._=t,this.next=null,this.previous=null}function pn(t,e){if(!(o=(t=un(t)).length))return 0;var n,r,l,o,s,i,u,a,p,f,h;if(n=t[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;Te(r,n,l=t[2]),n=new se(n),r=new se(r),l=new se(l),n.next=l.previous=r,r.next=n.previous=l,l.next=r.previous=n;e:for(u=3;u<o;++u){Te(n._,r._,l=t[u]),l=new se(l),a=r.next,p=n.previous,f=r._.r,h=n._.r;do if(f<=h){if(Ne(a._,l._)){r=a,n.next=r,r.previous=n,--u;continue e}f+=a._.r,a=a.next}else{if(Ne(p._,l._)){n=p,n.next=r,r.previous=n,--u;continue e}h+=p._.r,p=p.previous}while(a!==p.next);for(l.previous=n,l.next=r,n.next=r.previous=r=l,s=Pe(n);(l=l.next)!==r;)(i=Pe(l))<s&&(n=l,s=i);r=n.next}for(n=[r._],l=r;(l=l.next)!==r;)n.push(l._);for(l=fn(n,e),u=0;u<o;++u)n=t[u],n.x-=l.x,n.y-=l.y;return l.r}function gn(t){return Math.sqrt(t.value)}function _n(){var t=null,e=1,n=1,r=je;function l(o){const s=on();return o.x=e/2,o.y=n/2,t?o.eachBefore(Ve(t)).eachAfter(we(r,.5,s)).eachBefore(Ue(1)):o.eachBefore(Ve(gn)).eachAfter(we(je,1,s)).eachAfter(we(r,o.r/Math.min(e,n),s)).eachBefore(Ue(Math.min(e,n)/(2*o.r))),o}return l.radius=function(o){return arguments.length?(t=tn(o),l):t},l.size=function(o){return arguments.length?(e=+o[0],n=+o[1],l):[e,n]},l.padding=function(o){return arguments.length?(r=typeof o=="function"?o:rn(+o),l):r},l}function Ve(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function we(t,e,n){return function(r){if(l=r.children){var l,o,s=l.length,i=t(r)*e||0,u;if(i)for(o=0;o<s;++o)l[o].r+=i;if(u=pn(l,n),i)for(o=0;o<s;++o)l[o].r-=i;r.r=u+i}}}function Ue(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function Re(t,e,n){const r=t.slice();return r[11]=e[n],r}function He(t,e,n){const r=t.slice();return r[11]=e[n],r}function Fe(t){var o;let e,n,r,l;return n=new R({props:{typo:"small",content:(o=t[2].data)==null?void 0:o.text,class:"px-xs py-xxs",ellipsis:!0}}),{c(){e=P("div"),I(n.$$.fragment),this.h()},l(s){e=V(s,"DIV",{class:!0,style:!0});var i=j(e);M(n.$$.fragment,i),i.forEach(y),this.h()},h(){w(e,"class","tooltip svelte-9rf4s6"),re(e,"--top",t[1].y+"px"),re(e,"--left",t[1].x+"px")},m(s,i){O(s,e,i),S(n,e,null),l=!0},p(s,i){var a;const u={};i&4&&(u.content=(a=s[2].data)==null?void 0:a.text),n.$set(u),(!l||i&2)&&re(e,"--top",s[1].y+"px"),(!l||i&2)&&re(e,"--left",s[1].x+"px")},i(s){l||(b(n.$$.fragment,s),s&&ut(()=>{l&&(r||(r=qe(e,Ie,{duration:150},!0)),r.run(1))}),l=!0)},o(s){x(n.$$.fragment,s),s&&(r||(r=qe(e,Ie,{duration:150},!1)),r.run(0)),l=!1},d(s){s&&y(e),C(n),s&&r&&r.end()}}}function mn(t){let e,n,r;function l(){return t[6](t[11])}function o(){return t[7](t[11])}return{c(){e=X("circle"),this.h()},l(s){e=Y(s,"circle",{class:!0,cx:!0,cy:!0,r:!0,role:!0,fill:!0,tabindex:!0}),j(e).forEach(y),this.h()},h(){var s;w(e,"class","tooltip-actor svelte-9rf4s6"),w(e,"cx",t[11].x),w(e,"cy",t[11].y),w(e,"r",t[11].r),w(e,"role","tooltip"),w(e,"fill",(s=t[11].data)==null?void 0:s.color),w(e,"tabindex","-1")},m(s,i){O(s,e,i),n||(r=[J(e,"mouseover",l),J(e,"focus",o),J(e,"mouseout",t[8]),J(e,"blur",t[9])],n=!0)},p(s,i){t=s},d(s){s&&y(e),n=!1,at(r)}}}function vn(t){let e;return{c(){e=X("circle"),this.h()},l(n){e=Y(n,"circle",{cx:!0,cy:!0,r:!0,fill:!0,class:!0}),j(e).forEach(y),this.h()},h(){var n;w(e,"cx",t[11].x),w(e,"cy",t[11].y),w(e,"r",t[11].r),w(e,"fill",(n=t[11].data)==null?void 0:n.color),w(e,"class","svelte-9rf4s6")},m(n,r){O(n,e,r)},p:z,d(n){n&&y(e)}}}function ze(t){let e;function n(o,s){return o[11].r/3>6?vn:mn}let l=n(t)(t);return{c(){l.c(),e=H()},l(o){l.l(o),e=H()},m(o,s){l.m(o,s),O(o,e,s)},p(o,s){l.p(o,s)},d(o){o&&y(e),l.d(o)}}}function $n(t){var l;let e,n=((l=t[11].data)==null?void 0:l.text)+"",r;return{c(){e=X("text"),r=et(n),this.h()},l(o){e=Y(o,"text",{x:!0,y:!0,"text-anchor":!0,"dominant-baseline":!0,"font-size":!0,class:!0});var s=j(e);r=tt(s,n),s.forEach(y),this.h()},h(){w(e,"x",t[11].x),w(e,"y",t[11].y),w(e,"text-anchor","middle"),w(e,"dominant-baseline","middle"),w(e,"font-size",t[11].r/3),w(e,"class","svelte-9rf4s6")},m(o,s){O(o,e,s),D(e,r)},p:z,d(o){o&&y(e)}}}function Be(t){let e,n=t[11].r/3>6&&$n(t);return{c(){n&&n.c(),e=H()},l(r){n&&n.l(r),e=H()},m(r,l){n&&n.m(r,l),O(r,e,l)},p(r,l){r[11].r/3>6&&n.p(r,l)},d(r){r&&y(e),n&&n.d(r)}}}function wn(t){let e,n,r,l,o,s,i,u,a,p,f=t[2]&&Fe(t),h=F(t[3]),k=[];for(let c=0;c<h.length;c+=1)k[c]=ze(He(t,h,c));let v=F(t[3]),d=[];for(let c=0;c<v.length;c+=1)d[c]=Be(Re(t,v,c));return i=new R({props:{typo:"p",content:t[0][1][0].clusterLabel,class:"px-m py-xs",ellipsis:!0}}),{c(){e=P("div"),f&&f.c(),n=T(),r=X("svg");for(let c=0;c<k.length;c+=1)k[c].c();l=H();for(let c=0;c<d.length;c+=1)d[c].c();o=T(),s=P("div"),I(i.$$.fragment),this.h()},l(c){e=V(c,"DIV",{class:!0,role:!0,tabindex:!0});var E=j(e);f&&f.l(E),n=N(E),r=Y(E,"svg",{width:!0,viewBox:!0,class:!0});var $=j(r);for(let g=0;g<k.length;g+=1)k[g].l($);l=H();for(let g=0;g<d.length;g+=1)d[g].l($);$.forEach(y),o=N(E),s=V(E,"DIV",{class:!0});var m=j(s);M(i.$$.fragment,m),m.forEach(y),E.forEach(y),this.h()},h(){w(r,"width","100%"),w(r,"viewBox","0 0 200 200"),w(r,"class","ratio-square svelte-9rf4s6"),w(s,"class","title svelte-9rf4s6"),w(e,"class","circle-packing flex-col-center-start svelte-9rf4s6"),w(e,"role","button"),w(e,"tabindex","0")},m(c,E){O(c,e,E),f&&f.m(e,null),D(e,n),D(e,r);for(let $=0;$<k.length;$+=1)k[$]&&k[$].m(r,null);D(r,l);for(let $=0;$<d.length;$+=1)d[$]&&d[$].m(r,null);D(e,o),D(e,s),S(i,s,null),u=!0,a||(p=J(e,"mousemove",t[4]),a=!0)},p(c,[E]){if(c[2]?f?(f.p(c,E),E&4&&b(f,1)):(f=Fe(c),f.c(),b(f,1),f.m(e,n)):f&&(Z(),x(f,1,1,()=>{f=null}),ee()),E&40){h=F(c[3]);let m;for(m=0;m<h.length;m+=1){const g=He(c,h,m);k[m]?k[m].p(g,E):(k[m]=ze(g),k[m].c(),k[m].m(r,l))}for(;m<k.length;m+=1)k[m].d(1);k.length=h.length}if(E&8){v=F(c[3]);let m;for(m=0;m<v.length;m+=1){const g=Re(c,v,m);d[m]?d[m].p(g,E):(d[m]=Be(g),d[m].c(),d[m].m(r,null))}for(;m<d.length;m+=1)d[m].d(1);d.length=v.length}const $={};E&1&&($.content=c[0][1][0].clusterLabel),i.$set($)},i(c){u||(b(f),b(i.$$.fragment,c),u=!0)},o(c){x(f),x(i.$$.fragment,c),u=!1},d(c){c&&y(e),f&&f.d(),ae(k,c),ae(d,c),C(i),a=!1,p()}}}function yn(t,e,n){let{cluster:r}=e;const o=((v,d,c)=>{const E=_n().size([d,c]).padding(5),$=ye(v,g=>Array.isArray(g)?g[1]:null).sum(g=>g.videosNumber),m=E($).descendants();return m.shift(),m})(r,200,200);let s={x:0,y:0};function i(v){n(1,s.x=v.clientX,s),n(1,s.y=v.clientY,s)}let u;const a=v=>{n(2,u=v)},p=v=>a(v),f=v=>a(v),h=()=>a(null),k=()=>a(null);return t.$$set=v=>{"cluster"in v&&n(0,r=v.cluster)},[r,s,u,o,i,a,p,f,h,k]}class kn extends W{constructor(e){super(),G(this,e,yn,wn,B,{cluster:0})}}function bn(t){let e,n,r='<path d="M13 1L7 7L1 0.999999" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>',l=[{viewBox:"0 0 14 8"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},t[0]],o={};for(let s=0;s<l.length;s+=1)o=K(o,l[s]);return{c(){e=X("svg"),n=new nt(!0),this.h()},l(s){e=Y(s,"svg",{viewBox:!0,fill:!0,xmlns:!0});var i=j(e);n=rt(i,!0),i.forEach(y),this.h()},h(){n.a=null,fe(e,o)},m(s,i){O(s,e,i),n.m(r,e)},p(s,[i]){fe(e,o=lt(l,[{viewBox:"0 0 14 8"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i&1&&s[0]]))},i:z,o:z,d(s){s&&y(e)}}}function xn(t,e,n){return t.$$set=r=>{n(0,e=K(K({},e),ie(r)))},e=ie(e),[e]}class En extends W{constructor(e){super(),G(this,e,xn,bn,B,{})}}function We(t,e,n){const r=t.slice();return r[9]=e[n],r}function qn(t){var o,s;let e,n,r,l;return e=new R({props:{class:t[3]?"":"opacity-50",content:(o=t[1])!=null&&o.length?((s=t[3])==null?void 0:s.title)||"Select":"Loading...",typo:"p"}}),r=new En({props:{width:12}}),{c(){I(e.$$.fragment),n=T(),I(r.$$.fragment)},l(i){M(e.$$.fragment,i),n=N(i),M(r.$$.fragment,i)},m(i,u){S(e,i,u),O(i,n,u),S(r,i,u),l=!0},p(i,u){var p,f;const a={};u&8&&(a.class=i[3]?"":"opacity-50"),u&10&&(a.content=(p=i[1])!=null&&p.length?((f=i[3])==null?void 0:f.title)||"Select":"Loading..."),e.$set(a)},i(i){l||(b(e.$$.fragment,i),b(r.$$.fragment,i),l=!0)},o(i){x(e.$$.fragment,i),x(r.$$.fragment,i),l=!1},d(i){i&&y(n),C(e,i),C(r,i)}}}function Ge(t){let e,n,r=F(t[1]),l=[];for(let s=0;s<r.length;s+=1)l[s]=Je(We(t,r,s));const o=s=>x(l[s],1,1,()=>{l[s]=null});return{c(){e=P("div");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=V(s,"DIV",{class:!0});var i=j(e);for(let u=0;u<l.length;u+=1)l[u].l(i);i.forEach(y),this.h()},h(){w(e,"class","list scrollbar-hide svelte-rjfnlc"),ce(e,"show",t[2])},m(s,i){O(s,e,i);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(e,null);n=!0},p(s,i){if(i&19){r=F(s[1]);let u;for(u=0;u<r.length;u+=1){const a=We(s,r,u);l[u]?(l[u].p(a,i),b(l[u],1)):(l[u]=Je(a),l[u].c(),b(l[u],1),l[u].m(e,null))}for(Z(),u=r.length;u<l.length;u+=1)o(u);ee()}(!n||i&4)&&ce(e,"show",s[2])},i(s){if(!n){for(let i=0;i<r.length;i+=1)b(l[i]);n=!0}},o(s){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)x(l[i]);n=!1},d(s){s&&y(e),ae(l,s)}}}function Je(t){let e,n;function r(){return t[7](t[9])}return e=new Q({props:{class:`button p-xs ${t[9].slug===t[0]?"selected":""}`,text:t[9].title,fn:r}}),{c(){I(e.$$.fragment)},l(l){M(e.$$.fragment,l)},m(l,o){S(e,l,o),n=!0},p(l,o){t=l;const s={};o&3&&(s.class=`button p-xs ${t[9].slug===t[0]?"selected":""}`),o&2&&(s.text=t[9].title),o&2&&(s.fn=r),e.$set(s)},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){x(e.$$.fragment,l),n=!1},d(l){C(e,l)}}}function An(t){var s;let e,n,r,l;n=new Q({props:{class:`dropdown-btn flex-btw-center p-xs ${t[2]?"active":""}`,fn:t[6],$$slots:{default:[qn]},$$scope:{ctx:t}}});let o=((s=t[1])==null?void 0:s.length)&&Ge(t);return{c(){e=P("div"),I(n.$$.fragment),r=T(),o&&o.c(),this.h()},l(i){e=V(i,"DIV",{class:!0,ref:!0});var u=j(e);M(n.$$.fragment,u),r=N(u),o&&o.l(u),u.forEach(y),this.h()},h(){w(e,"class","dropdown svelte-rjfnlc"),w(e,"ref",t[5])},m(i,u){O(i,e,u),S(n,e,null),D(e,r),o&&o.m(e,null),l=!0},p(i,[u]){var p;const a={};u&4&&(a.class=`dropdown-btn flex-btw-center p-xs ${i[2]?"active":""}`),u&4&&(a.fn=i[6]),u&4106&&(a.$$scope={dirty:u,ctx:i}),n.$set(a),(p=i[1])!=null&&p.length?o?(o.p(i,u),u&2&&b(o,1)):(o=Ge(i),o.c(),b(o,1),o.m(e,null)):o&&(Z(),x(o,1,1,()=>{o=null}),ee())},i(i){l||(b(n.$$.fragment,i),b(o),l=!0)},o(i){x(n.$$.fragment,i),x(o),l=!1},d(i){i&&y(e),C(n),o&&o.d()}}}function Dn(t,e,n){let r,{items:l}=e,{value:o=null}=e,s=!1;const i=h=>{n(0,o=h),n(2,s=!1)};let u;ft(()=>(document.addEventListener("click",a),()=>{document.removeEventListener("click",a)}));const a=h=>{h.target.closest(".dropdown")||n(2,s=!1)},p=()=>n(2,s=!s),f=h=>i(h.slug);return t.$$set=h=>{"items"in h&&n(1,l=h.items),"value"in h&&n(0,o=h.value)},t.$$.update=()=>{var h;t.$$.dirty&3&&n(3,r=(h=l==null?void 0:l.find)==null?void 0:h.call(l,k=>k.slug===o))},[o,l,s,r,i,u,p,f]}class In extends W{constructor(e){super(),G(this,e,Dn,An,B,{items:1,value:0})}}function Mn(t){let e,n,r='<path d="M2 2H32" stroke="currentColor" stroke-width="3" stroke-linecap="round"/><path d="M6 11H28" stroke="currentColor" stroke-width="3" stroke-linecap="round"/><path d="M11 20H23" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>',l=[{viewBox:"0 0 34 22"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},t[0]],o={};for(let s=0;s<l.length;s+=1)o=K(o,l[s]);return{c(){e=X("svg"),n=new nt(!0),this.h()},l(s){e=Y(s,"svg",{viewBox:!0,fill:!0,xmlns:!0});var i=j(e);n=rt(i,!0),i.forEach(y),this.h()},h(){n.a=null,fe(e,o)},m(s,i){O(s,e,i),n.m(r,e)},p(s,[i]){fe(e,o=lt(l,[{viewBox:"0 0 34 22"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i&1&&s[0]]))},i:z,o:z,d(s){s&&y(e)}}}function Sn(t,e,n){return t.$$set=r=>{n(0,e=K(K({},e),ie(r)))},e=ie(e),[e]}class Cn extends W{constructor(e){super(),G(this,e,Sn,Mn,B,{})}}function Ke(t,e,n){const r=t.slice();return r[5]=e[n].label,r[6]=e[n].code,r[7]=e[n].color,r}function Qe(t){let e,n,r,l=!1,o,s,i=t[5]+"",u,a,p,f,h,k,v;return h=ct(t[4][0]),{c(){e=P("input"),o=T(),s=P("label"),u=et(i),a=T(),this.h()},l(d){e=V(d,"INPUT",{class:!0,type:!0,id:!0}),o=N(d),s=V(d,"LABEL",{class:!0,for:!0,style:!0});var c=j(s);u=tt(c,i),a=N(c),c.forEach(y),this.h()},h(){w(e,"class","sr-only svelte-1q0yvuu"),w(e,"type","radio"),w(e,"id",n=t[6]),e.__value=r=t[6],Ae(e,e.__value),w(s,"class","typo-small svelte-1q0yvuu"),w(s,"for",p=t[6]),w(s,"style",f=`--background: var(--color-${t[7]})`),h.p(e)},m(d,c){O(d,e,c),e.checked=e.__value===t[0],O(d,o,c),O(d,s,c),D(s,u),D(s,a),k||(v=J(e,"change",t[3]),k=!0)},p(d,c){c&2&&n!==(n=d[6])&&w(e,"id",n),c&2&&r!==(r=d[6])&&(e.__value=r,Ae(e,e.__value),l=!0),(l||c&3)&&(e.checked=e.__value===d[0]),c&2&&i!==(i=d[5]+"")&&ht(u,i),c&2&&p!==(p=d[6])&&w(s,"for",p),c&2&&f!==(f=`--background: var(--color-${d[7]})`)&&w(s,"style",f)},d(d){d&&(y(e),y(o),y(s)),h.r(),k=!1,v()}}}function On(t){let e,n=F(t[1]),r=[];for(let l=0;l<n.length;l+=1)r[l]=Qe(Ke(t,n,l));return{c(){e=P("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=V(l,"DIV",{role:!0,class:!0});var o=j(e);for(let s=0;s<r.length;s+=1)r[s].l(o);o.forEach(y),this.h()},h(){w(e,"role","radiogroup"),w(e,"class","grid-2-xs l:flex flex-wrap items-center gap-xs")},m(l,o){O(l,e,o);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(e,null)},p(l,[o]){if(o&3){n=F(l[1]);let s;for(s=0;s<n.length;s+=1){const i=Ke(l,n,s);r[s]?r[s].p(i,o):(r[s]=Qe(i),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},i:z,o:z,d(l){l&&y(e),ae(r,l)}}}function jn(t,e,n){let r,{items:l}=e,{value:o=null}=e;const s=[[]];function i(){o=this.__value,n(0,o)}return t.$$set=u=>{"items"in u&&n(2,l=u.items),"value"in u&&n(0,o=u.value)},t.$$.update=()=>{t.$$.dirty&4&&n(1,r=Array.isArray(l)?l:Object.values(l))},[o,r,l,i,s]}class Ln extends W{constructor(e){super(),G(this,e,jn,On,B,{items:2,value:0})}}function Tn(t){let e,n;return e=new Cn({props:{height:"16"}}),{c(){I(e.$$.fragment)},l(r){M(e.$$.fragment,r)},m(r,l){S(e,r,l),n=!0},i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){x(e.$$.fragment,r),n=!1},d(r){C(e,r)}}}function Nn(t){let e,n;return e=new R({props:{content:"Confirm",typo:"small"}}),{c(){I(e.$$.fragment)},l(r){M(e.$$.fragment,r)},m(r,l){S(e,r,l),n=!0},i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){x(e.$$.fragment,r),n=!1},d(r){C(e,r)}}}function Pn(t){let e,n,r,l;const o=[Nn,Tn],s=[];function i(u,a){return u[1]?0:1}return e=i(t),n=s[e]=o[e](t),{c(){n.c(),r=H()},l(u){n.l(u),r=H()},m(u,a){s[e].m(u,a),O(u,r,a),l=!0},p(u,a){let p=e;e=i(u),e!==p&&(Z(),x(s[p],1,1,()=>{s[p]=null}),ee(),n=s[e],n||(n=s[e]=o[e](u),n.c()),b(n,1),n.m(r.parentNode,r))},i(u){l||(b(n),l=!0)},o(u){x(n),l=!1},d(u){u&&y(r),s[e].d(u)}}}function Vn(t){let e,n,r,l,o,s,i,u,a,p,f,h,k,v,d,c;r=new R({props:{typo:"label",content:"Query",class:"case-upper"}});function E(_){t[6](_)}let $={items:t[0]};t[2]!==void 0&&($.value=t[2]),o=new In({props:$}),be.push(()=>De(o,"value",E)),a=new R({props:{typo:"label",content:"Language",class:"case-upper"}});function m(_){t[7](_)}let g={items:oe};return t[3]!==void 0&&(g.value=t[3]),f=new Ln({props:g}),be.push(()=>De(f,"value",m)),d=new Q({props:{class:"button pointer-events-initial",fn:t[8],theme:"cta",$$slots:{default:[Pn]},$$scope:{ctx:t}}}),{c(){e=P("div"),n=P("div"),I(r.$$.fragment),l=T(),I(o.$$.fragment),i=T(),u=P("div"),I(a.$$.fragment),p=T(),I(f.$$.fragment),k=T(),v=P("div"),I(d.$$.fragment),this.h()},l(_){e=V(_,"DIV",{class:!0});var q=j(e);n=V(q,"DIV",{class:!0});var A=j(n);M(r.$$.fragment,A),l=N(A),M(o.$$.fragment,A),A.forEach(y),i=N(q),u=V(q,"DIV",{class:!0});var L=j(u);M(a.$$.fragment,L),p=N(L),M(f.$$.fragment,L),L.forEach(y),q.forEach(y),k=N(_),v=V(_,"DIV",{class:!0});var U=j(v);M(d.$$.fragment,U),U.forEach(y),this.h()},h(){w(n,"class","group flex flex-col gap-xs"),w(u,"class","group flex flex-col gap-xs"),w(e,"class","filters px-s py-m l:p-0 svelte-j7mje2"),ce(e,"show",t[1]),w(v,"class","cta pointer-events-none l:hidden svelte-j7mje2")},m(_,q){O(_,e,q),D(e,n),S(r,n,null),D(n,l),S(o,n,null),D(e,i),D(e,u),S(a,u,null),D(u,p),S(f,u,null),O(_,k,q),O(_,v,q),S(d,v,null),c=!0},p(_,[q]){const A={};q&1&&(A.items=_[0]),!s&&q&4&&(s=!0,A.value=_[2],xe(()=>s=!1)),o.$set(A);const L={};!h&&q&8&&(h=!0,L.value=_[3],xe(()=>h=!1)),f.$set(L),(!c||q&2)&&ce(e,"show",_[1]);const U={};q&2&&(U.fn=_[8]),q&514&&(U.$$scope={dirty:q,ctx:_}),d.$set(U)},i(_){c||(b(r.$$.fragment,_),b(o.$$.fragment,_),b(a.$$.fragment,_),b(f.$$.fragment,_),b(d.$$.fragment,_),c=!0)},o(_){x(r.$$.fragment,_),x(o.$$.fragment,_),x(a.$$.fragment,_),x(f.$$.fragment,_),x(d.$$.fragment,_),c=!1},d(_){_&&(y(e),y(k),y(v)),C(r),C(o),C(a),C(f),C(d)}}}function Un(t,e,n){let r,l,{queries:o}=e,s=he("query"),i=he("lang");ue(t,s,h=>n(2,r=h)),ue(t,i,h=>n(3,l=h));let u=!1;function a(h){r=h,s.set(r)}function p(h){l=h,i.set(l)}const f=()=>n(1,u=!u);return t.$$set=h=>{"queries"in h&&n(0,o=h.queries)},t.$$.update=()=>{t.$$.dirty&2&&document.body.classList.toggle("scroll-lock",u)},innerWidth>kt(bt.l)&&n(1,u=!1),[o,u,r,l,s,i,a,p,f]}class Rn extends W{constructor(e){super(),G(this,e,Un,Vn,B,{queries:0})}}function Hn(t){let e,n,r,l;return e=new R({props:{typo:"small",content:"download data"}}),r=new $t({props:{width:"8"}}),{c(){I(e.$$.fragment),n=T(),I(r.$$.fragment)},l(o){M(e.$$.fragment,o),n=N(o),M(r.$$.fragment,o)},m(o,s){S(e,o,s),O(o,n,s),S(r,o,s),l=!0},p:z,i(o){l||(b(e.$$.fragment,o),b(r.$$.fragment,o),l=!0)},o(o){x(e.$$.fragment,o),x(r.$$.fragment,o),l=!1},d(o){o&&y(n),C(e,o),C(r,o)}}}function Fn(t){let e,n;return e=new R({props:{typo:"small",content:"view protocol"}}),{c(){I(e.$$.fragment)},l(r){M(e.$$.fragment,r)},m(r,l){S(e,r,l),n=!0},p:z,i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){x(e.$$.fragment,r),n=!1},d(r){C(e,r)}}}function zn(t){let e,n,r,l,o,s,i,u,a,p,f,h,k,v,d,c,E,$,m;return r=new R({props:{typo:"h2",content:"Looking at pollution on stock photos platforms"}}),s=new R({props:{typo:"label",content:"WHAT AM I LOOKING AT?"}}),u=new R({props:{typo:"p",content:"Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Donec id elit non mi porta gravida at eget metus."}}),p=new Rn({props:{queries:t[0]}}),k=new R({props:{typo:"label",content:"Resources",class:"case-upper"}}),c=new Q({props:{url:t[1],theme:"download",class:"flex gap-xxs items-center",$$slots:{default:[Hn]},$$scope:{ctx:t}}}),$=new Q({props:{url:t[1],theme:"download",class:"flex gap-xs items-center",$$slots:{default:[Fn]},$$scope:{ctx:t}}}),{c(){e=P("div"),n=P("div"),I(r.$$.fragment),l=T(),o=P("div"),I(s.$$.fragment),i=T(),I(u.$$.fragment),a=T(),I(p.$$.fragment),f=T(),h=P("div"),I(k.$$.fragment),v=T(),d=P("div"),I(c.$$.fragment),E=T(),I($.$$.fragment),this.h()},l(g){e=V(g,"DIV",{class:!0});var _=j(e);n=V(_,"DIV",{class:!0});var q=j(n);M(r.$$.fragment,q),q.forEach(y),l=N(_),o=V(_,"DIV",{class:!0});var A=j(o);M(s.$$.fragment,A),i=N(A),M(u.$$.fragment,A),A.forEach(y),a=N(_),M(p.$$.fragment,_),f=N(_),h=V(_,"DIV",{class:!0});var L=j(h);M(k.$$.fragment,L),v=N(L),d=V(L,"DIV",{class:!0});var U=j(d);M(c.$$.fragment,U),E=N(U),M($.$$.fragment,U),U.forEach(y),L.forEach(y),_.forEach(y),this.h()},h(){w(n,"class","group"),w(o,"class","group flex flex-col gap-xs"),w(d,"class","flex gap-xs"),w(h,"class","group flex flex-col gap-xs"),w(e,"class","sidebar flex flex-col gap-l py-m px-s svelte-fvv8ff")},m(g,_){O(g,e,_),D(e,n),S(r,n,null),D(e,l),D(e,o),S(s,o,null),D(o,i),S(u,o,null),D(e,a),S(p,e,null),D(e,f),D(e,h),S(k,h,null),D(h,v),D(h,d),S(c,d,null),D(d,E),S($,d,null),m=!0},p(g,[_]){const q={};_&1&&(q.queries=g[0]),p.$set(q);const A={};_&2&&(A.url=g[1]),_&4&&(A.$$scope={dirty:_,ctx:g}),c.$set(A);const L={};_&2&&(L.url=g[1]),_&4&&(L.$$scope={dirty:_,ctx:g}),$.$set(L)},i(g){m||(b(r.$$.fragment,g),b(s.$$.fragment,g),b(u.$$.fragment,g),b(p.$$.fragment,g),b(k.$$.fragment,g),b(c.$$.fragment,g),b($.$$.fragment,g),m=!0)},o(g){x(r.$$.fragment,g),x(s.$$.fragment,g),x(u.$$.fragment,g),x(p.$$.fragment,g),x(k.$$.fragment,g),x(c.$$.fragment,g),x($.$$.fragment,g),m=!1},d(g){g&&y(e),C(r),C(s),C(u),C(p),C(k),C(c),C($)}}}function Bn(t,e,n){let{queries:r}=e,{dataUrl:l}=e;return t.$$set=o=>{"queries"in o&&n(0,r=o.queries),"dataUrl"in o&&n(1,l=o.dataUrl)},[r,l]}class Wn extends W{constructor(e){super(),G(this,e,Bn,zn,B,{queries:0,dataUrl:1})}}function Xe(t,e,n){const r=t.slice();return r[15]=e[n],r[17]=n,r}function Ye(t){let e=[],n=new Map,r,l,o=F(t[4]);const s=i=>{var u;return`${i[1]}-${i[2]}-${i[17]}-${(u=i[15])==null?void 0:u[0]}`};for(let i=0;i<o.length;i+=1){let u=Xe(t,o,i),a=s(u);n.set(a,e[i]=Ze(a,u))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();r=H()},l(i){for(let u=0;u<e.length;u+=1)e[u].l(i);r=H()},m(i,u){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(i,u);O(i,r,u),l=!0},p(i,u){u&278&&(o=F(i[4]),Z(),e=dt(e,u,s,1,i,o,n,r.parentNode,pt,Ze,r,Xe),ee())},i(i){if(!l){for(let u=0;u<o.length;u+=1)b(e[u]);l=!0}},o(i){for(let u=0;u<e.length;u+=1)x(e[u]);l=!1},d(i){i&&y(r);for(let u=0;u<e.length;u+=1)e[u].d(i)}}}function Gn(t){let e,n,r;return e=new kn({props:{cluster:t[15]}}),{c(){I(e.$$.fragment),n=T()},l(l){M(e.$$.fragment,l),n=N(l)},m(l,o){S(e,l,o),O(l,n,o),r=!0},p(l,o){const s={};o&16&&(s.cluster=l[15]),e.$set(s)},i(l){r||(b(e.$$.fragment,l),r=!0)},o(l){x(e.$$.fragment,l),r=!1},d(l){l&&y(n),C(e,l)}}}function Ze(t,e){let n,r,l;return r=new Q({props:{url:e[8](e[15]),class:"contents",$$slots:{default:[Gn]},$$scope:{ctx:e}}}),{key:t,first:null,c(){n=H(),I(r.$$.fragment),this.h()},l(o){n=H(),M(r.$$.fragment,o),this.h()},h(){this.first=n},m(o,s){O(o,n,s),S(r,o,s),l=!0},p(o,s){e=o;const i={};s&16&&(i.url=e[8](e[15])),s&262160&&(i.$$scope={dirty:s,ctx:e}),r.$set(i)},i(o){l||(b(r.$$.fragment,o),l=!0)},o(o){x(r.$$.fragment,o),l=!1},d(o){o&&y(n),C(r,o)}}}function Jn(t){let e,n,r,l,o;n=new Wn({props:{queries:t[3],dataUrl:t[5]}});let s=t[0]&&Ye(t);return{c(){e=P("div"),I(n.$$.fragment),r=T(),l=P("div"),s&&s.c(),this.h()},l(i){e=V(i,"DIV",{class:!0});var u=j(e);M(n.$$.fragment,u),r=N(u),l=V(u,"DIV",{class:!0});var a=j(l);s&&s.l(a),a.forEach(y),u.forEach(y),this.h()},h(){w(l,"class","container p-s grid-1-s s:grid-2-s xl:grid-3-s xxl:grid-4-s svelte-rjtclb"),w(e,"class","page l:flex-start-start")},m(i,u){O(i,e,u),S(n,e,null),D(e,r),D(e,l),s&&s.m(l,null),o=!0},p(i,[u]){const a={};u&8&&(a.queries=i[3]),u&32&&(a.dataUrl=i[5]),n.$set(a),i[0]?s?(s.p(i,u),u&1&&b(s,1)):(s=Ye(i),s.c(),b(s,1),s.m(l,null)):s&&(Z(),x(s,1,1,()=>{s=null}),ee())},i(i){o||(b(n.$$.fragment,i),b(s),o=!0)},o(i){x(n.$$.fragment,i),x(s),o=!1},d(i){i&&y(e),C(n),s&&s.d()}}}function Kn(t,e,n){let r,l,o,s,i,u,a,p,f,h,k=!1,v=he("query");ue(t,v,$=>n(1,a=$));let d=he("lang");ue(t,d,$=>n(2,p=$));const c=async($=(m=>(m=Object.keys(oe))==null?void 0:m[0])())=>{var q;if(k||!qt)return;k=!0;const{data:g,error:_}=await wt({key:`tiktok-${$}-data`,url:i,type:"text"});g?(n(9,h=yt(g)),f!=null&&f.length||(n(3,f=[]),h.forEach(A=>{f.find(L=>L.slug===A.querySlug)||f.push({slug:A.querySlug,title:A.query})}),a||Ee(v,a=(q=f[0])==null?void 0:q.slug,a),p||Ee(d,p=$,p))):n(9,h=null),k=!1},E=$=>{const m=$==null?void 0:$[0];return`/tiktok/${p}/${a}/${m}`};return t.$$.update=()=>{var $,m,g;t.$$.dirty&518&&n(0,r=(h==null?void 0:h.length)&&a&&p),t.$$.dirty&4&&n(11,l=(($=oe)==null?void 0:$[p])||((m=oe)==null?void 0:m.us)),t.$$.dirty&514&&n(10,o=(g=h==null?void 0:h.filter)==null?void 0:g.call(h,_=>(_==null?void 0:_.querySlug)===a)),t.$$.dirty&2048&&n(12,s=`${xt}/tiktokAssets/${l==null?void 0:l.code}`),t.$$.dirty&6144&&n(5,i=l?`${s}/clusters_${l.code}.csv`:null),t.$$.dirty&2048&&c(l==null?void 0:l.code),t.$$.dirty&1025&&n(4,u=r?Ot(o,_=>_.cluster):[])},[r,a,p,f,u,i,v,d,E,h,o,l,s]}class or extends W{constructor(e){super(),G(this,e,Kn,Jn,B,{})}}export{or as component};
